import{_ as E}from"./AppTextField.vue_vue_type_script_setup_true_lang-5287073f.js";import{_ as F}from"./AppSelect.vue_vue_type_script_setup_true_lang-3c530a2c.js";import{a as S,b as D,p as G}from"./utils-91d4e8c2.js";import{d as H,t as g,M as K,o as u,i as w,y as e,B as a,aj as C,aa as O,ap as R,ai as B,e as s,w as d,ah as j,K as c,D as i,G as n,F as M,j as q,f as b,ae as J,ao as Q,H as k,cj as _,as as T}from"./main-834b9cca.js";import{u as W}from"./useCourseStore-17a7c475.js";import{l as X}from"./lodash-5666b82a.js";import{_ as Y}from"./ScheduleCourse.vue_vue_type_script_setup_true_lang-4c428ea5.js";import{V as U}from"./VDivider-b2b5b2f6.js";import{V as Z,a as ee}from"./VPagination-303317e7.js";import{V as z}from"./VChip-7003a31a.js";import{V as te}from"./VMenu-ec466a7c.js";import{V as ae,a as v,b as V}from"./VList-483d2f15.js";import"./VInput-586caf66.js";import"./VTextField-87129457.js";import"./VCheckboxBtn-7bb82281.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-b4d7dd43.js";import"./VSpacer-447b73cb.js";import"./VTable-00e944d3.js";const se={class:"d-flex justify-end flex-wrap gap-4"},le={class:"text-capitalize"},oe={class:"text-capitalize"},re={class:"v-avatar-group pa-2 staked-images"},ie={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ne={class:"text-sm text-disabled mb-0"},ue=H({__name:"index",setup(de){const h=g(null),p=g(0),P=g([]),o=g({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),y=W(),I=l=>y.deleteCourse(l).then(m),N=l=>y.publishCourse(l).then(m),m=X.debounce(()=>{y.getCourses({...o.value,additional:{hasMedia:!0}}).then(({data:l,meta:r})=>{P.value=l,p.value=r.total})},500),A=[{title:"Title",key:"title"},{title:"Media",key:"media",width:"70",sortable:!1},{title:"Status",key:"status",width:"70"},{title:"Difficulty",key:"difficulty",width:"70"},{title:"",key:"actions",sortable:!1,width:"70"}];return K(Object.keys(o.value).map(l=>()=>o.value[l]),([l,r,$])=>{m()}),(l,r)=>{const $=F,L=E;return u(),w("section",null,[e(B,null,{default:a(()=>[e(C,{cols:"12"},{default:a(()=>[e(O,{title:l.$t("Cours")},{default:a(()=>[e(R,null,{default:a(()=>[e(B,{align:"end"},{default:a(()=>[e(C,{cols:"12",sm:"2"},{default:a(()=>[e($,{label:l.$t("Items Per Page"),items:[10,20,50,100],modelValue:s(o).itemsPerPage,"onUpdate:modelValue":r[0]||(r[0]=t=>s(o).itemsPerPage=t)},null,8,["label","modelValue"])]),_:1}),e(C,{class:"d-flex gap-5"},{default:a(()=>[e(L,{modelValue:s(o).search,"onUpdate:modelValue":r[1]||(r[1]=t=>s(o).search=t),placeholder:l.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),d("div",se,[e(j,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:a(()=>[c(i(l.$t("Add New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),e(U),e(s(Z),{"items-per-page":s(o).itemsPerPage,"onUpdate:itemsPerPage":r[3]||(r[3]=t=>s(o).itemsPerPage=t),page:s(o).page,"onUpdate:page":r[4]||(r[4]=t=>s(o).page=t),items:s(P),"items-length":s(p),headers:A.map(t=>({...t,title:l.$t(t.title)})),class:"text-no-wrap","onUpdate:options":r[5]||(r[5]=t=>o.value=t)},{"item.status":a(({item:t})=>[e(z,{color:s(S)(t.raw.status).color},{default:a(()=>[e(n,{icon:s(S)(t.raw.status).icon,class:"ma-1"},null,8,["icon"]),d("span",le,i(t.raw.status),1)]),_:2},1032,["color"])]),"item.difficulty":a(({item:t})=>[e(z,{color:s(D)(t.raw.difficulty).color},{default:a(()=>[e(n,{icon:s(D)(t.raw.difficulty).icon,class:"ma-1"},null,8,["icon"]),d("span",oe,i(t.raw.difficulty),1)]),_:2},1032,["color"])]),"item.media":a(({item:t})=>[d("div",re,[(u(!0),w(M,null,q(t.raw.media,(f,x)=>(u(),w(M,{key:x},[x<4?(u(),b(J,{key:0,variant:"text",rounded:"lg",style:{width:"70px"},size:"52"},{default:a(()=>[e(Q,{cover:"",src:f},null,8,["src"])]),_:2},1024)):k("",!0)],64))),128))])]),"item.actions":a(({item:t})=>[e(j,{icon:"",variant:"text",size:"small",color:"medium-emphasis"},{default:a(()=>[e(n,{size:"24",icon:"tabler-dots-vertical"}),e(te,{activator:"parent"},{default:a(()=>[e(ae,null,{default:a(()=>[e(v,null,{prepend:a(()=>[e(n,{icon:"tabler-eye"})]),default:a(()=>[e(V,null,{default:a(()=>[c(i(l.$t("View")),1)]),_:1})]),_:1}),t.raw.status===s(_).Draft||t.raw.status===s(_).Error?(u(),b(v,{key:0,onClick:f=>N(t.raw.id)},{prepend:a(()=>[e(n,{icon:"material-symbols:publish-rounded"})]),default:a(()=>[e(V,null,{default:a(()=>[c(i(l.$t("Publish")),1)]),_:1})]),_:2},1032,["onClick"])):k("",!0),t.raw.status===s(_).Draft||t.raw.status===s(_).Scheduled?(u(),b(v,{key:1,onClick:f=>h.value=t.raw.id},{prepend:a(()=>[e(n,{icon:"solar:calendar-broken"})]),default:a(()=>[e(V,null,{default:a(()=>[c(i(l.$t("Schedule publish")),1)]),_:1})]),_:2},1032,["onClick"])):k("",!0),e(v,{onClick:f=>I(t.raw.id)},{prepend:a(()=>[e(n,{icon:"tabler-trash"})]),default:a(()=>[e(V,null,{default:a(()=>[c(i(l.$t("Delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[e(U),d("div",ie,[d("p",ne,i(s(G)(s(o),s(p))),1),e(ee,{"model-value":s(o).page,"onUpdate:modelValue":r[2]||(r[2]=t=>o.value={...s(o),page:t}),length:Math.ceil(s(p)/s(o).itemsPerPage),"total-visible":l.$vuetify.display.xs?1:Math.ceil(s(p)/s(o).itemsPerPage)},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers"])]),_:1},8,["title"]),e(Y,{onDone:r[6]||(r[6]=t=>(h.value=null,s(m)())),"course-id":s(h)},null,8,["course-id"])]),_:1})]),_:1})])}}});typeof T=="function"&&T(ue);export{ue as default};
