import{cM as Z,ac as ee,cV as ae,M as te,ab as le,aC as ne,df as oe,aD as se,t as B,a4 as E,G as C,aa as ue,y as s,F as ie,m as b,dd as re,as as ce,dj as de,cW as fe,d as z,ci as M,o as O,i as me,e as I,f as ve,E as pe,bi as he,j as ye,B as Ve,x as Ce,n as R,bw as K,z as ke}from"./main-6856e496.js";import{u as ge,a as be}from"./VInput-05f64f58.js";import{m as _e,V as N}from"./VTextField-3f8fbc0a.js";import{m as we,u as xe,V as Pe,a as U}from"./VList-83a806ee.js";import{V as De}from"./VMenu-02b0b56f.js";import{c as Be}from"./VCheckboxBtn-a53b3bbd.js";import{V as Ie}from"./VChip-bb22c723.js";const Se=Z({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ee,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:ae},...we({itemChildren:!1})},"v-select"),Te=te()({name:"VSelect",props:{...Se(),...le(_e({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ne({transition:{component:oe}})},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,_){let{slots:t}=_;const{t:c}=se(),v=B(),S=B(),h=E(e,"menu"),o=C({get:()=>h.value,set:a=>{var n;h.value&&!a&&((n=S.value)!=null&&n.Î¨openChildren)||(h.value=a)}}),{items:k,transformIn:H,transformOut:j}=xe(e),u=E(e,"modelValue",[],a=>H(fe(a)),a=>{const n=j(a);return e.multiple?n:n[0]??null}),y=ge(),w=C(()=>u.value.map(a=>k.value.find(n=>e.valueComparator(n.value,a.value))||a)),$=C(()=>w.value.map(a=>a.props.value)),g=B(!1);let T="",A;const F=C(()=>e.hideSelected?k.value.filter(a=>!w.value.some(n=>n===a)):k.value),V=B();function W(a){e.openOnClear&&(o.value=!0)}function q(){e.hideNoData&&!k.value.length||e.readonly||y!=null&&y.isReadonly.value||(o.value=!o.value)}function G(a){var l,m,p,r;if(e.readonly||y!=null&&y.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(o.value=!0),["Escape","Tab"].includes(a.key)&&(o.value=!1),a.key==="ArrowDown"?(l=V.value)==null||l.focus("next"):a.key==="ArrowUp"?(m=V.value)==null||m.focus("prev"):a.key==="Home"?(p=V.value)==null||p.focus("first"):a.key==="End"&&((r=V.value)==null||r.focus("last"));const n=1e3;function f(i){const d=i.key.length===1,L=!i.ctrlKey&&!i.metaKey&&!i.altKey;return d&&L}if(e.multiple||!f(a))return;const P=performance.now();P-A>n&&(T=""),T+=a.key.toLowerCase(),A=P;const D=k.value.find(i=>i.title.toLowerCase().startsWith(T));D!==void 0&&(u.value=[D])}function x(a){if(e.multiple){const n=$.value.findIndex(f=>e.valueComparator(f,a.value));if(n===-1)u.value=[...u.value,a];else{const f=[...u.value];f.splice(n,1),u.value=f}}else u.value=[a],o.value=!1}function Y(a){var n;(n=V.value)!=null&&n.$el.contains(a.relatedTarget)||(o.value=!1)}function J(a){g.value=!0}function Q(a){var n;a.relatedTarget==null&&((n=v.value)==null||n.focus())}return ue(()=>{const a=!!(e.chips||t.chip),n=!!(!e.hideNoData||F.value.length||t.prepend||t.append||t["no-data"]),f=u.value.length>0,[P]=N.filterProps(e),D=f||!g.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(N,b({ref:v},P,{modelValue:u.value.map(l=>l.props.value).join(", "),"onUpdate:modelValue":l=>{l==null&&(u.value=[])},focused:g.value,"onUpdate:focused":l=>g.value=l,validationValue:u.externalValue,dirty:f,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:D,"onClick:clear":W,"onMousedown:control":q,onBlur:Y,onKeydown:G}),{...t,default:()=>s(ie,null,[s(De,b({ref:S,modelValue:o.value,"onUpdate:modelValue":l=>o.value=l,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[n&&s(Pe,{ref:V,selected:$.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:l=>l.preventDefault(),onFocusin:J,onFocusout:Q},{default:()=>{var l,m,p;return[!F.value.length&&!e.hideNoData&&(((l=t["no-data"])==null?void 0:l.call(t))??s(U,{title:c(e.noDataText)},null)),(m=t["prepend-item"])==null?void 0:m.call(t),F.value.map((r,i)=>{var d;return t.item?(d=t.item)==null?void 0:d.call(t,{item:r,index:i,props:b(r.props,{onClick:()=>x(r)})}):s(U,b({key:i},r.props,{onClick:()=>x(r)}),{prepend:L=>{let{isSelected:X}=L;return e.multiple&&!e.hideSelected?s(Be,{modelValue:X,ripple:!1,tabindex:"-1"},null):void 0}})}),(p=t["append-item"])==null?void 0:p.call(t)]}})]}),w.value.map((l,m)=>{var i;function p(d){d.stopPropagation(),d.preventDefault(),x(l)}const r={"onClick:close":p,modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:l.value,class:"v-select__selection"},[a?t.chip?s(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:l.title}}},{default:()=>{var d;return[(d=t.chip)==null?void 0:d.call(t,{item:l,index:m,props:r})]}}):s(Ie,b({key:"chip",closable:e.closableChips,size:"small",text:l.title},r),null):((i=t.selection)==null?void 0:i.call(t,{item:l,index:m}))??s("span",{class:"v-select__selection-text"},[l.title,e.multiple&&m<w.value.length-1&&s("span",{class:"v-select__selection-comma"},[ce(",")])])])})])})}),de({isFocused:g,menu:o,select:x},v)}}),Fe=z({name:"AppSelect",inheritAttrs:!1}),Ke=z({...Fe,setup(e){const _=C(()=>{const c=M(),v=c.id||c.label;return v?`app-select-${v}-${Math.random().toString(36).slice(2,7)}`:void 0}),t=C(()=>M().label);return(c,v)=>(O(),me("div",{class:ke(["app-select flex-grow-1",c.$attrs.class])},[I(t)?(O(),ve(be,{key:0,for:I(_),class:"mb-1 text-body-2 text-high-emphasis",text:I(t)},null,8,["for","text"])):pe("",!0),s(Te,R(K({...c.$attrs,class:null,label:void 0,variant:"outlined",id:I(_),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",c.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),he({_:2},[ye(c.$slots,(S,h)=>({name:h,fn:Ve(o=>[Ce(c.$slots,h,R(K(o||{})))])}))]),1040)],2))}});export{Te as V,Ke as _};
