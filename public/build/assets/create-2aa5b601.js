import{_ as ee}from"./DateTimePicker.vue_vue_type_style_index_0_lang-12f1c32b.js";import{_ as te}from"./CustomRadiosWithIcon-610191b9.js";import{_ as oe}from"./CourseChaptersForm.vue_vue_type_script_setup_true_lang-65207fa3.js";import{_ as se}from"./CourseDetailsForm.vue_vue_type_script_setup_true_lang-c4d1e146.js";import{V as ae}from"./VSlideGroup-5752cb22.js";import{V as le}from"./VSlideGroupItem-11ca740b.js";import{d as H,r as y,a8 as F,bs as ie,o as i,h as f,f as t,c as g,j as re,F as j,q as o,b2 as C,A as T,e as d,b as e,a3 as z,z as h,k as x,al as w,K as ne,c1 as O,m as ce,c5 as ue,y as S,bD as L}from"./main-2d2efdef.js";import{u as pe}from"./useCourseStore-6cd84d06.js";import{a as D,V as de}from"./VRow-b362c44e.js";import{a as me,b as I}from"./VWindowItem-3c677ea6.js";import{V as ve,a as W,b as G,c as q}from"./VExpansionPanel-8b4637e4.js";import{V as fe}from"./VContainer-0f3fe374.js";import"./component-32c86fd4.js";import"./VField-92f9d8a9.js";import"./VInput-84038333.js";import"./VRadioGroup-8505cdaf.js";import"./VSelectionControl-23864fe7.js";import"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-f2d763a2.js";import"./VCheckboxBtn-c66b2d93.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-235432c3.js";import"./VTextField-a58b9262.js";import"./index-c8be389a.js";import"./ActionButton-893daa0c.js";import"./utils-cf604421.js";import"./VSpacer-f886726f.js";import"./VChip-5110b4ca.js";import"./VPagination-1f9c92d0.js";import"./VMenu-1ed28082.js";import"./VList-3e9a4151.js";import"./VDivider-56b2b415.js";import"./lodash-af665324.js";import"./preact.module-7f17e2b0.js";import"./InfoTooltip.vue_vue_type_script_setup_true_lang-1bc17a1b.js";import"./VTooltip-dfa1b725.js";import"./validators-753247d6.js";import"./VForm-d1b03105.js";import"./VSelect-4c5979a9.js";import"./VSwitch-c025f875.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-5c14f55a.js";import"./VTextarea-5701c4af.js";const _e=["onClick"],he={key:0,class:"stepper-icon-step text-high-emphasis d-flex align-center gap-2"},be={class:"stepper-icon"},ye={class:"stepper-title font-weight-medium mb-0"},Ve={key:0,class:"stepper-subtitle"},ge={class:"text-sm"},Se={key:1,class:"d-flex align-center gap-x-4"},we={class:"d-flex align-center gap-2"},ke={class:"d-flex align-center justify-center"},Ce={class:"text-h5",style:{color:"rgb(var(--v-theme-primary))"}},ze={class:"d-flex flex-column justify-center"},xe={class:"step-title font-weight-medium"},$e={key:0,class:"step-subtitle text-sm text-disabled"},Ee={key:0,class:"stepper-step-line"},Pe=H({__name:"AppStepper",props:{items:{},currentStep:{default:0},direction:{default:"horizontal"},iconSize:{default:52},isActiveStepValid:{type:Boolean,default:void 0},align:{default:"center"}},emits:["update:currentStep"],setup(N,{emit:u}){const s=N,V=u,n=y(s.currentStep||0),k=F(()=>p=>p<n.value?"stepper-steps-completed":p===n.value?"stepper-steps-active":""),_=F(()=>p=>s.direction==="horizontal"&&s.items.length-1!==p),v=F(()=>s.isActiveStepValid!==void 0);return ie(()=>{s.currentStep!==void 0&&s.currentStep<s.items.length&&s.currentStep>=0&&(n.value=s.currentStep),V("update:currentStep",n.value)}),(p,$)=>(i(),f(ae,{modelValue:o(n),"onUpdate:modelValue":$[0]||($[0]=l=>C(n)?n.value=l:null),class:T(["app-stepper",`app-stepper-${s.align}`]),"show-arrows":"",direction:s.direction},{default:t(()=>[(i(!0),g(j,null,re(s.items,(l,c)=>(i(),f(le,{key:l.title,value:c},{default:t(()=>[d("div",{class:T(["cursor-pointer mx-1",[!s.isActiveStepValid&&o(v)&&"stepper-steps-invalid",o(k)(c)]]),onClick:U=>!o(v)&&V("update:currentStep",c)},[l.icon?(i(),g("div",he,[d("div",{class:T(["d-flex align-center gap-4 step-wrapper",[s.direction==="horizontal"&&"flex-column"]])},[d("div",be,[e(z,{icon:l.icon,size:l.size||s.iconSize},null,8,["icon","size"])]),d("div",null,[d("p",ye,h(p.$t(l.title)),1),l.subtitle?(i(),g("span",Ve,[d("span",ge,h(p.$t(l.subtitle)),1)])):x("",!0)])],2),o(_)(c)?(i(),f(z,{key:0,class:"flip-in-rtl stepper-chevron-indicator mx-6",size:"24",icon:"tabler-chevron-right"})):x("",!0)])):(i(),g("div",Se,[d("div",we,[d("div",ke,[c>=o(n)?(i(),g(j,{key:0},[!o(v)||s.isActiveStepValid||c!==o(n)?(i(),f(w,{key:0,size:"40",variant:c===o(n)?"elevated":"tonal",color:c===o(n)?"primary":"default"},{default:t(()=>[d("h5",{class:"text-h5",style:ne(c===o(n)?{color:"#fff"}:"")},h(c+1),5)]),_:2},1032,["variant","color"])):(i(),f(z,{key:1,icon:"tabler-alert-circle",size:"24",color:"error"}))],64)):(i(),f(w,{key:1,class:"stepper-icon",variant:"tonal",color:"primary",size:"40"},{default:t(()=>[d("h5",Ce,h(c+1),1)]),_:2},1024))])]),d("div",ze,[d("div",xe,h(p.$t(l.title)),1),l.subtitle?(i(),g("div",$e,h(p.$t(l.subtitle)),1)):x("",!0)]),o(_)(c)?(i(),g("div",Ee,[e(z,{icon:"tabler-chevron-right",size:"24"})])):x("",!0)]))],10,_e)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","direction","class"]))}});const Ae={class:"d-flex justify-space-between mt-8"},bt=H({__name:"create",setup(N){const u=y(0),s=y("publish"),V=y("private"),n=[{title:"Private",desc:"Only you and people you choose can watch your video",value:O.Private,icon:{icon:"carbon:virtual-private-cloud",size:"28"}},{title:"Publish",desc:"Everyone can watch your video",value:O.Published,icon:{icon:"mdi-public",size:"28"}}],k=y(new Date().toISOString()),_=y([{id:1,icon:"tabler-clipboard",title:"course.steps.details.title",subtitle:"course.steps.details.subtitle",component:null},{id:2,icon:"grommet-icons:chapter-add",title:"course.steps.chapters.title",subtitle:"course.steps.chapters.subtitle",component:null},{id:3,icon:"mdi-publish",title:"course.steps.visibility.title",subtitle:"course.steps.visibility.subtitle",component:null}]),v=y(),p=y("list"),$=ce(),l=pe(),c=async()=>{var r,E,P;const m=_.value[u.value];try{if(m.id===1){const b=await((r=m.component)==null?void 0:r.validate());v.value=await l.createCourse(b)}if(m.id===2&&v.value){const A=(await((E=m.component)==null?void 0:E.validate())).map((a,J)=>{const R={};return a.attachments.forEach(({watermark:K,name:M,id:Z,type:Q,download:X,visibility:Y})=>{R[Z]={name:M,type:Q,download:X,visibility:JSON.stringify(Y),watermark:K}}),{...a,attachments:R,order:J}}),B=v.value.id;await Promise.all(A.map(a=>l.createChapter(B,a)))}if(m.id===3){const b=await((P=m.component)==null?void 0:P.validate());console.log(b);return}_.value.length-1>u.value&&u.value++}catch(b){console.error(b)}},U=async()=>{try{if(!v.value)throw new Error("Course not Found");s.value==="schedule"&&await l.scheduleCourse(v.value.id,k.value),s.value==="publish"&&await l.publishCourse(v.value.id,V.value),$.push({name:"course"})}catch(m){throw m}};return(m,r)=>{const E=Pe,P=se,b=oe,A=te,B=ee;return i(),f(fe,null,{default:t(()=>[e(de,{align:"center"},{default:t(()=>[e(D,null,{default:t(()=>[e(E,{"current-step":o(u),direction:"horizontal",items:o(_),"icon-size":"22",class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),o(u)===1?(i(),f(D,{key:0},{default:t(()=>[e(ue,{modelValue:o(p),"onUpdate:modelValue":r[0]||(r[0]=a=>C(p)?p.value=a:null),divided:"",color:"primary",variant:"outlined",class:"mx-auto"},{default:t(()=>[e(w,{value:"list",icon:"mdi-list-box-outline"}),e(w,{value:"grid",icon:"mdi-grid-large"})]),_:1},8,["modelValue"])]),_:1})):x("",!0),e(D,{cols:"12"},{default:t(()=>[e(me,{modelValue:o(u),"onUpdate:modelValue":r[4]||(r[4]=a=>C(u)?u.value=a:null),class:"disable-tab-transition stepper-content mt-5"},{default:t(()=>[e(I,null,{default:t(()=>[e(P,{ref:a=>o(_)[0].component=a},null,512)]),_:1}),e(I,null,{default:t(()=>[e(b,{ref:a=>o(_)[1].component=a},null,512)]),_:1}),e(I,null,{default:t(()=>[e(ve,{modelValue:o(s),"onUpdate:modelValue":r[3]||(r[3]=a=>C(s)?s.value=a:null),mandatory:"force",style:{"max-width":"500px","margin-inline":"auto"},variant:"accordion"},{default:t(()=>[e(W,{value:"publish"},{default:t(()=>[e(G,null,{default:t(()=>[S(" Save or publish ")]),_:1}),e(L,{class:"mb-2"},{default:t(()=>[S(" Make your video public or private ")]),_:1}),e(q,null,{default:t(()=>[e(A,{"selected-radio":o(V),"onUpdate:selectedRadio":r[1]||(r[1]=a=>C(V)?V.value=a:null),"radio-content":n,"grid-column":{md:"6"}},null,8,["selected-radio"])]),_:1})]),_:1}),e(W,{value:"schedule"},{default:t(()=>[e(G,null,{default:t(()=>[S(" Schedule ")]),_:1}),e(L,{class:"mb-2"},{default:t(()=>[S(" Select a date to make your video public. ")]),_:1}),e(q,null,{default:t(()=>[e(B,{modelValue:o(k),"onUpdate:modelValue":r[2]||(r[2]=a=>C(k)?k.value=a:null),style:{width:"min-content"},config:{inline:!0,enableTime:!0,dateFormat:"Z"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),d("div",Ae,[e(w,{variant:"plain",color:"secondary",disabled:o(u)===0,onClick:r[5]||(r[5]=a=>u.value--)},{default:t(()=>[e(z,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),S(" "+h(m.$t("previous")),1)]),_:1},8,["disabled"]),o(_).length-1===o(u)?(i(),f(w,{key:0,"append-icon":"tabler-check",color:"success",onClick:U},{default:t(()=>[S(h(m.$t(o(s))),1)]),_:1})):(i(),f(w,{key:1,variant:"plain",onClick:c},{default:t(()=>[S(h(m.$t("next"))+" ",1),e(z,{icon:"tabler-arrow-right",end:"",class:"flip-in-rtl"})]),_:1}))])]),_:1})]),_:1})]),_:1})}}});export{bt as default};
