import{_ as F}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-112168bb.js";import{_ as O}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-f0d0e182.js";import{_ as q}from"./AppTextField.vue_vue_type_script_setup_true_lang-1f509c94.js";import{_ as G}from"./AppSelect.vue_vue_type_script_setup_true_lang-6c729fa7.js";import{f as H}from"./formatters-386d1040.js";import{u as J}from"./useCourseStore-5ce782b5.js";import{r as w,a as S,p as K}from"./utils-a37cea90.js";import{d as Q,r as f,w as W,a as X,o as d,c as D,b as a,f as o,bi as Y,bw as Z,p as t,e as n,aj as B,v as p,x as r,bB as ee,bC as c,h as g,a0 as u,z as k}from"./main-ab587e07.js";import{l as te}from"./lodash-5afa6c31.js";import{V as z,a as x}from"./VRow-5caa7b67.js";import{V as T}from"./VDivider-8124f53f.js";import{V as ae}from"./VDataTableServer-5b7c9a65.js";import{V as L}from"./VChip-6a02f0c0.js";import{V as oe}from"./VMenu-dfb1af7a.js";import{V as se,a as h,b as v}from"./VList-8bffd640.js";import{V as le}from"./VPagination-35fe8804.js";import{b as U}from"./route-block-83d24a4e.js";import"./DateTimePicker.vue_vue_type_style_index_0_lang-2b0f74cd.js";import"./VField-3a656c69.js";import"./VInput-5eb88156.js";import"./VSpacer-d0ad8875.js";import"./VTooltip-0d8f9dc0.js";import"./VTextField-deb3e0dc.js";import"./VSelect-fdde16f0.js";import"./VCheckboxBtn-a46fe0b5.js";import"./VSelectionControl-e21cd96e.js";import"./VTable-2388767a.js";const ie={class:"d-flex justify-end flex-wrap gap-4"},re={class:"d-flex align-center gap-2 py-2 text-capitalize"},ne={class:"d-flex flex-column"},ue={class:"text-base"},de={class:"text-capitalize ml-1"},pe={key:0,class:"text-capitalize ml-1"},ce={class:"text-capitalize"},me={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},fe={class:"text-sm text-disabled mb-0"},_e=Q({__name:"index",setup(ge){const V=f(null),m=f(0),b=f([]),y=f(!1),l=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),C=J(),j=s=>C.deleteCourse(s).then(_),E=s=>C.publishCourse(s).then(_),_=te.debounce(()=>{b.value.length||(y.value=!0),C.getCourses(l.value).then(({data:s,meta:i})=>{b.value=s,m.value=i.total}).finally(()=>y.value=!1)},500),I=[{title:"Title",key:"title"},{title:"Status",key:"status",width:70},{title:"Difficulty",key:"difficulty",width:70},{title:"",key:"actions",sortable:!1,width:70}];return W(Object.keys(l.value).map(s=>()=>l.value[s]),([s,i,P])=>{_()}),(s,i)=>{const P=G,N=q,M=X("RouterLink"),A=O,R=F;return d(),D("section",null,[a(z,null,{default:o(()=>[a(x,{cols:"12"},{default:o(()=>[a(Y,{title:s.$t("Cours")},{default:o(()=>[a(Z,null,{default:o(()=>[a(z,{align:"end"},{default:o(()=>[a(x,{cols:"12",sm:"2"},{default:o(()=>[a(P,{modelValue:t(l).itemsPerPage,"onUpdate:modelValue":i[0]||(i[0]=e=>t(l).itemsPerPage=e),label:s.$t("Items Per Page"),items:[10,20,50,100]},null,8,["modelValue","label"])]),_:1}),a(x,{class:"d-flex gap-5"},{default:o(()=>[a(N,{modelValue:t(l).search,"onUpdate:modelValue":i[1]||(i[1]=e=>t(l).search=e),placeholder:s.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),n("div",ie,[a(B,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:o(()=>[p(r(s.$t("Add New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(T),a(t(ae),{"items-per-page":t(l).itemsPerPage,"onUpdate:itemsPerPage":i[3]||(i[3]=e=>t(l).itemsPerPage=e),page:t(l).page,"onUpdate:page":i[4]||(i[4]=e=>t(l).page=e),items:t(b),"items-length":t(m),headers:I.map(e=>({...e,title:s.$t(e.title)})),class:"text-no-wrap",loading:t(y),"onUpdate:options":i[5]||(i[5]=e=>l.value=e)},{loading:o(()=>[a(t(ee),{class:"pt-2",type:["table-tbody"]})]),"item.title":o(({item:e})=>[n("div",re,[n("div",ne,[n("h6",ue,[a(M,{to:{name:"course-id",params:{id:e.id}},class:"font-weight-medium user-list-name"},{default:o(()=>[p(r(e.title),1)]),_:2},1032,["to"])])])])]),"item.status":o(({item:e})=>[a(L,{color:t(w)(e.status).color},{prepend:o(()=>[e.status===t(c).Scheduled?(d(),g(A,{key:0,icon:"mdi-clock-time-five-outline",text:t(H)(e.schedule_at)},null,8,["text"])):(d(),g(u,{key:1,icon:t(w)(e.status).icon},null,8,["icon"]))]),default:o(()=>[n("span",de,r(e.status),1),e.status===t(c).Error?(d(),D("span",pe,r(`#${e.id}`),1)):k("",!0)]),_:2},1032,["color"])]),"item.difficulty":o(({item:e})=>[a(L,{color:t(S)(e.difficulty).color},{default:o(()=>[a(u,{icon:t(S)(e.difficulty).icon,class:"ma-1"},null,8,["icon"]),n("span",ce,r(e.difficulty),1)]),_:2},1032,["color"])]),"item.actions":o(({item:e})=>[a(B,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:o(()=>[a(u,{size:"24",icon:"tabler-dots-vertical"}),a(oe,{activator:"parent"},{default:o(()=>[a(se,null,{default:o(()=>[a(h,{to:{name:"course-id-edit",params:{id:e.id}}},{prepend:o(()=>[a(u,{icon:"tabler-edit"})]),default:o(()=>[a(v,null,{default:o(()=>[p(r(s.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.status===t(c).Draft||e.status===t(c).Error?(d(),g(h,{key:0,onClick:$=>E(e.id)},{prepend:o(()=>[a(u,{icon:"material-symbols:publish-rounded"})]),default:o(()=>[a(v,null,{default:o(()=>[p(r(s.$t("Publish")),1)]),_:1})]),_:2},1032,["onClick"])):k("",!0),e.status===t(c).Draft||e.status===t(c).Scheduled?(d(),g(h,{key:1,onClick:$=>V.value=e.id},{prepend:o(()=>[a(u,{icon:"solar:calendar-broken"})]),default:o(()=>[a(v,null,{default:o(()=>[p(r(s.$t("Schedule publish")),1)]),_:1})]),_:2},1032,["onClick"])):k("",!0),a(h,{onClick:$=>j(e.id)},{prepend:o(()=>[a(u,{icon:"tabler-trash"})]),default:o(()=>[a(v,null,{default:o(()=>[p(r(s.$t("Delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:o(()=>[a(T),n("div",me,[n("p",fe,r(t(K)(t(l),t(m))),1),a(le,{"model-value":t(l).page,length:Math.ceil(t(m)/t(l).itemsPerPage),"total-visible":s.$vuetify.display.xs?1:Math.ceil(t(m)/t(l).itemsPerPage),"onUpdate:modelValue":i[2]||(i[2]=e=>l.value={...t(l),page:e})},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),a(R,{"course-id":t(V),onDone:i[6]||(i[6]=e=>(V.value=null,t(_)()))},null,8,["course-id"])]),_:1})]),_:1})])}}});typeof U=="function"&&U(_e);export{_e as default};
