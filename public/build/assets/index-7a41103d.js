import{_ as U}from"./CoursePlayList.vue_vue_type_script_setup_true_lang-45c0c9c3.js";import{_ as $}from"./ResponsiveText.vue_vue_type_script_setup_true_lang-43f04b88.js";import{u as q}from"./useCourseStore-8c81fa27.js";import{a as H}from"./formatters-2598f6f8.js";import{d as O,d3 as Q,s as Z,t as _,au as J,I as S,dV as K,L as W,a9 as X,r as Y,o,i as k,y as a,B as s,ar as B,aF as ee,e,f as c,aQ as te,w as r,m as I,af as w,ap as u,G as T,cI as y,aG as C,aH as ae,D as m,cZ as se,aI as oe,aP as re,F as ie,j as le,E as v,dM as ne,ah as ce,aq as de,aV as M}from"./main-85c91a26.js";import{M as ue}from"./index-b0a2f6a5.js";import{V as pe}from"./VSpacer-ceb774a5.js";import{V as me}from"./VSlideGroup-a0ae32ff.js";import{V as fe}from"./VSlideGroupItem-1fc9f008.js";import{V as _e}from"./VChip-72ddf64b.js";import"./VMenu-b096078e.js";import"./VList-d1048358.js";import{V as R}from"./VDivider-fc49786d.js";import"./InfoTooltip.vue_vue_type_script_setup_true_lang-a31bc9e3.js";import"./VTooltip-9a294455.js";import"./ActionButton-42114dd8.js";import"./VPagination-452297c5.js";const he={class:"card"},ye={class:"position-relative"},ve={key:0,class:"position-absolute w-100 h-100 d-flex gap-1 align-center justify-center",style:{inset:"0","background-color":"rgba(0, 0, 0, 0.568)"}},xe={key:1},Ve={class:"d-flex flex-column"},ke={class:"text-base"},ge=r("p",{class:"text-xs"},"Lorem ipsum dolor sit amet",-1),we={class:"mb-0 pt-1"},Ce={class:"d-flex flex-wrap mt-5"},be={class:"me-5"},Le={class:"text-nowrap"},Se={class:"text-nowrap"},Be={class:"text-nowrap"},Ie={class:"text-nowrap"},Te={class:"text-nowrap"},Me={class:"position-sticky",style:{top:"90px"}},Re=O({__name:"index",setup(Ne){const N=Q(),P=Z(),f=_(!1),A=q(),i=_(),h=_(!1),d=_(),b=_(),E=J(),g=_(),G=S(()=>{var l,n;return[{title:"edit",_if:E.user.id===((l=i.value)==null?void 0:l.author.id),props:{to:{name:"course-id-edit",params:{id:(n=i.value)==null?void 0:n.id}},"prepend-icon":"mdi-edit"}},{title:"share",_if:!0,props:{"prepend-icon":"tabler-share"}}]}),D=S(()=>{var l;if(d.value&&((l=d.value)==null?void 0:l.type)===K.video)return{onReady:n=>{var x;return g.value=(x=n.target)==null?void 0:x.plyr},onEnded:n=>h.value=!0,onPause:n=>d.value.playing=!1,onPlay:n=>d.value.playing=!0}}),L=()=>{b.value.next(),h.value=!1},F=()=>{setTimeout(()=>{var l;(l=g.value)==null||l.play()},500),h.value=!1};return W(d,l=>{l&&l.type==="video"&&(setTimeout(()=>{var n;(n=g.value)==null||n.play()},500),h.value=!1)}),X(async()=>{f.value=!0;try{i.value=await A.getCourse(Number(N.params.id),{additional:{chapters:!0}})}catch{P.push({name:"course"})}f.value=!1}),(l,n)=>{const x=$,j=Y("RouterLink"),z=U;return o(),k("div",he,[a(de,null,{default:s(()=>[a(B,{cols:"12",md:"8"},{default:s(()=>[a(ee,null,{default:s(()=>[!e(f)&&e(d)?(o(),c(te,{key:0,class:"py-0 px-0"},{default:s(()=>[r("div",ye,[(o(),c(ue,I({...e(D)},{key:e(d).id,"aspect-ratio":"1.77",media:e(d)}),{toolbar:s(()=>[a(w,{onClick:L,variant:"elevated",color:"default","append-icon":"mdi-skip-forward"},{default:s(()=>[u(" Continue ")]),_:1})]),_:1},16,["media"])),e(h)?(o(),k("div",ve,[a(w,{onClick:F,color:"default","prepend-icon":"mdi-rotate-left"},{default:s(()=>[u("Start Over")]),_:1}),a(w,{onClick:L,color:"default","append-icon":"mdi-skip-forward"},{default:s(()=>[u("Continue")]),_:1})])):T("",!0)])]),_:1})):(o(),c(e(y),{key:1,type:["image","image"]}))]),_:1}),e(f)?(o(),c(e(y),{key:1,type:["heading","list-item-avatar-three-line"]})):(o(),c(C,{key:0},{default:s(()=>[a(ae,{class:"text-capitalize text-h3 text-wrap d-flex"},{default:s(()=>{var t;return[a(x,{"max-lines":2,"char-width":3.5,text:((t=e(i))==null?void 0:t.title)||""},{default:s(({text:p})=>[u(m(p),1)]),_:1},8,["char-width","text"])]}),_:1}),a(se,{class:"d-flex mt-3 px-1 align-center"},{default:s(()=>[a(oe,{size:"35",class:"me-2"},{default:s(()=>{var t,p,V;return[(t=e(i))!=null&&t.author.profile_photo_url?(o(),c(re,{key:0,src:(p=e(i))==null?void 0:p.author.profile_photo_url,cover:""},null,8,["src"])):(o(),k("span",xe,m(e(H)(((V=e(i))==null?void 0:V.author.name)||"")),1))]}),_:1}),r("div",Ve,[r("h6",ke,[a(j,{to:"#",class:"font-weight-medium user-list-name text-grey-600"},{default:s(()=>{var t;return[u(m((t=e(i))==null?void 0:t.author.name),1)]}),_:1})]),ge]),a(pe),a(me,{"show-arrows":"","center-active":""},{default:s(()=>[(o(!0),k(ie,null,le(e(G).filter(({_if:t})=>t),t=>(o(),c(fe,{key:t.title},{default:s(()=>[a(_e,I(t.props,{class:"ma-1"}),{default:s(()=>[u(m(t.title),1)]),_:2},1040)]),_:2},1024))),128))]),_:1}),T("",!0)]),_:1})]),_:1})),a(R,{class:"mx-6"}),e(f)?(o(),c(e(y),{key:3,class:"py-5",type:["heading","paragraph"]})):(o(),c(C,{key:2,title:"About this course"},{default:s(()=>{var t;return[r("p",we,m((t=e(i))==null?void 0:t.description),1)]}),_:1})),a(R,{class:"mx-6"}),e(f)?(o(),c(e(y),{key:5,class:"py-5",type:["heading","paragraph"]})):(o(),c(C,{key:4,title:"By the numbers"},{default:s(()=>{var t,p;return[r("div",Ce,[r("div",be,[r("p",Le,[a(v,{icon:"mdi-check-all",class:"me-2 mt-n2"}),u(" Skill level: "+m((t=e(i))==null?void 0:t.difficulty),1)]),r("p",Se,[a(v,{icon:"mdi-users",class:"me-2 mt-n2"}),u("Students: 38,815")]),r("p",Be,[a(v,{icon:"mdi-flag",class:"me-2 mt-n2"}),u("Languages: English")])]),r("div",null,[r("p",Ie,[a(v,{icon:"mdi-pencil",class:"me-2 mt-n2"}),u("Lectures: 19")]),r("p",Te,[a(v,{icon:"mdi-clock",class:"me-2 mt-n2"}),u("Video: "+m(e(ne)(((p=e(i))==null?void 0:p.duration)||0))+" total minutes ",1)])])])]}),_:1}))]),_:1}),a(B,{cols:"12",md:"4"},{default:s(()=>{var t,p;return[r("div",Me,[(t=e(i))!=null&&t.chapters?(o(),c(z,{key:0,ref_key:"playList",ref:b,attachment:e(d),"onUpdate:attachment":n[0]||(n[0]=V=>ce(d)?d.value=V:null),chapters:(p=e(i))==null?void 0:p.chapters},null,8,["attachment","chapters"])):(o(),c(e(y),{key:1,type:Array(5).fill("list-item-avatar-three-line")},null,8,["type"]))])]}),_:1})]),_:1})])}}});typeof M=="function"&&M(Re);export{Re as default};
