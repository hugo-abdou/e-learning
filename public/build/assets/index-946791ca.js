import{_ as X}from"./ActionButton-28965bd3.js";import{d as V,o as i,h as c,f as r,b as a,bz as j,A as k,dV as g,bi as w,_ as $,r as I,a6 as f,v as T,x as b,p as t,bb as G,dX as H,bH as W,bD as x,dY as m,dU as Z,bW as q,G as F,e as z,z as R,c0 as J,I as C,aj as K,bA as O,s as Q,bX as ee,j as te,i as ae,bY as se,bZ as oe}from"./main-b48d3f12.js";import{b as re,d as M}from"./utils-676f4eba.js";import{V as h}from"./VSpacer-41b8f790.js";import{V as A}from"./VChip-dc7e3cd5.js";import{V as le}from"./VPagination-409ad022.js";import{V as ne}from"./VRow-932bb168.js";import{V as ie}from"./VMenu-4188ebde.js";import{V as ce}from"./VList-b374d8f4.js";const de=V({__name:"ImageType",props:{media:{}},setup(y){return(n,o)=>(i(),c(w,{class:"media-card"},{default:r(()=>[a(j,{src:n.media.url,cover:""},null,8,["src"]),a(g,{absolute:"",density:"compact",class:"px-2"},{default:r(()=>[a(h),k(n.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3}))}});const pe=$(de,[["__scopeId","data-v-20186660"]]),ue=V({__name:"PdfType",props:{media:{}},setup(y,{expose:n}){const o=I({page:1,pages:0}),l=f({get:()=>o.value.page||0,set:e=>{o.value.page=e}});return n({...o.value}),(e,d)=>{const p=H;return i(),c(w,{class:"media-card"},{default:r(()=>[a(p,{ref_key:"pdfViwer",ref:o,document:e.media,"can-open-preview":""},null,8,["document"]),a(g,{absolute:"",density:"compact",class:"px-2"},{default:r(()=>[a(A,{rounded:"sm",size:"small",class:"ml-1",color:"surface",variant:"elevated"},{default:r(()=>{var u,v;return[T(" page "+b((u=t(o))==null?void 0:u.page)+" of "+b((v=t(o))==null?void 0:v.pages)+" pages ",1)]}),_:1}),a(h),a(le,{color:"surface",variant:"elevated",modelValue:t(l),"onUpdate:modelValue":d[0]||(d[0]=u=>G(l)?l.value=u:null),length:Math.ceil(t(o).pages/1),"total-visible":5},null,8,["modelValue","length"]),a(h),k(e.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3})}}});const me=$(ue,[["__scopeId","data-v-cf1e3680"]]),_e=V({inheritAttrs:!1,__name:"VideoType",props:{media:{}},setup(y,{expose:n}){const o=I();return n({...o.value}),(l,e)=>{const d=W;return i(),c(w,null,{default:r(()=>[a(d,{ref_key:"plyr",ref:o,src:l.media.url,poster:l.media.thumb_url},null,8,["src","poster"])]),_:1})}}}),fe={class:"card-header-actions pa-1"},ye={class:"d-flex align-center justify-center w-100 me-2"},ve=V({__name:"index",props:{isPreview:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},aspectRatio:{},media:{}},emits:["onDelete","update:pdf","update:media"],setup(y,{emit:n}){const o=y,l=n,e=I(o.media),d=f(()=>e.value.thumb_url||re(e.value.type)),p=f(()=>({aspectRatio:o.aspectRatio||e.value.width/e.value.height})),u=f(()=>{switch(e.value.type){case x.pdf:return me;case x.image:return pe;case x.video:return _e;default:throw new Error("Media Type dos not exist")}}),v=f(()=>[{title:"Delete",_if:o.deletable,props:{"prepend-icon":"tabler-trash",onClick:()=>Y(e.value)}},{title:"retry",_if:e.value.status===m.Pending||e.value.status===m.Processing,props:{"prepend-icon":"tabler-refresh",onClick:S}},{title:"retry",_if:e.value.status===m.Error,props:{"prepend-icon":"tabler-refresh",onClick:E}}]),P=Z(),N=s=>{P.openMediaDialog(e.value,s)},S=async()=>{try{const s=await P.getById(e.value.id);if(e.value=s,s.status!==m.Completed){await q(2e3),S();return}l("update:media",s)}catch{}};F(()=>{});const E=async()=>{try{const s=await P.retry(e.value.id);e.value=s}catch{}},Y=s=>{l("onDelete",s.id)};return(s,B)=>{const L=X;return s.isPreview?(i(),c(w,{key:0,style:C(t(p)),color:"surface",class:"media-card w-100 h-100 overflow-hidden"},{default:r(()=>[z("div",fe,[t(e).status===t(m).Processing||t(e).status===t(m).Error?(i(),c(A,{key:0,variant:"flat",size:"x-small",text:t(M)(t(e).status).lable,color:t(M)(t(e).status).color,"prepend-icon":t(M)(t(e).status).icon},null,8,["text","color","prepend-icon"])):R("",!0),T(" "+b(t(p)),1)]),a(j,{src:t(d),style:C(t(p)),cover:""},{placeholder:r(()=>[a(ne,{class:"fill-height ma-0",align:"center",justify:"center"},{default:r(()=>[a(J,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:1},8,["src","style"]),a(g,{absolute:"",density:"compact",class:"toolbar-overlay pa-2"},{default:r(()=>[z("div",ye,[t(e).url?(i(),c(K,{key:0,onClick:B[0]||(B[0]=_=>N(t(e).type)),icon:"tabler-play",variant:"elevated"})):R("",!0)])]),_:1}),a(g,{absolute:"",density:"compact",class:"toolbar-actions"},{default:r(()=>[a(O,{style:{"inline-size":"85%"},class:"text-white",title:t(e).name},{default:r(()=>[T(b(t(e).name),1)]),_:1},8,["title"]),a(h),a(ie,{attach:s.$el,transition:"speed-dial",location:"top end"},{activator:r(({props:_})=>[a(L,Q(_,{color:"#fff",variant:"text",icon:"mdi-dots-vertical"}),null,16)]),default:r(()=>[a(ce,{items:t(v).filter(({_if:_})=>_)},null,8,["items"])]),_:1},8,["attach"])]),_:1})]),_:1},8,["style"])):(i(),c(ae(t(u)),{key:1,style:C(t(p)),media:t(e),class:"media-card"},ee({_:2},[te(s.$slots,(_,D)=>({name:D,fn:r(U=>[k(s.$slots,D,se(oe(U||{})),void 0,!0)])}))]),1032,["style","media"]))}}});const Te=$(ve,[["__scopeId","data-v-856eba29"]]);export{Te as M};
