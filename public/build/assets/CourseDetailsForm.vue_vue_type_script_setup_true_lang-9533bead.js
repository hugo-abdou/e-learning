import{a as ae}from"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-b5be49e2.js";import{_ as oe}from"./AppSelect.vue_vue_type_script_setup_true_lang-2d20289e.js";import{_ as ne}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-5b9b39a6.js";import{O as ie,dB as se,a6 as ue,I as N,t as p,K as re,L as y,M as de,ac as ce,d0 as fe,y as t,m as $,F as I,al as H,b$ as me,cr as ve,dp as pe,a8 as E,dC as xe,J as Ve,dN as ge,d as ye,cK as be,dO as G,o as T,i as O,B as u,aF as he,aG as we,aq as Ce,ar as P,e as s,f as _e,af as Fe,dP as ke,w as Pe,E as $e,ap as Ie,D as Be,ah as Re}from"./main-0fb5c6c1.js";import{r as j}from"./validators-f52bbb1d.js";import{M as Se}from"./index-7381233a.js";import{m as De,b as Ue,u as Me,a as K,f as Ne,d as Ee,V as Te}from"./VInput-e0df6d44.js";import{a as qe,V as ze}from"./VTextField-532f6e97.js";import{V as Ae}from"./VForm-9682cdf4.js";const He=ie()({name:"VTextarea",directives:{Intersect:se},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...De(),...Ue()},emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,B){let{attrs:C,emit:b,slots:r}=B;const l=ue(e,"modelValue"),{isFocused:f,focus:q,blur:n}=Me(e),i=N(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),x=N(()=>{if(C.maxlength)return C.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function _(a,c){var d,m;!e.autofocus||!a||(m=(d=c[0].target)==null?void 0:d.focus)==null||m.call(d)}const F=p(),o=p(),R=p(""),k=p(),L=N(()=>f.value||e.persistentPlaceholder);function S(){var a;k.value!==document.activeElement&&((a=k.value)==null||a.focus()),f.value||q()}function J(a){S(),b("click:control",a)}function Q(a){b("mousedown:control",a)}function W(a){a.stopPropagation(),S(),E(()=>{l.value="",xe(e["onClick:clear"],a)})}function X(a){var d;const c=a.target;if(l.value=c.value,(d=e.modelModifiers)!=null&&d.trim){const m=[c.selectionStart,c.selectionEnd];E(()=>{c.selectionStart=m[0],c.selectionEnd=m[1]})}}const V=p();function g(){e.autoGrow&&E(()=>{if(!V.value||!o.value)return;const a=getComputedStyle(V.value),c=getComputedStyle(o.value.$el),d=parseFloat(a.getPropertyValue("--v-field-padding-top"))+parseFloat(a.getPropertyValue("--v-input-padding-top"))+parseFloat(a.getPropertyValue("--v-field-padding-bottom")),m=V.value.scrollHeight,D=parseFloat(a.lineHeight),U=Math.max(parseFloat(e.rows)*D+d,parseFloat(c.getPropertyValue("--v-input-control-height"))),M=parseFloat(e.maxRows)*D+d||1/0;R.value=Ve(ge(m??0,U,M))})}re(g),y(l,g),y(()=>e.rows,g),y(()=>e.maxRows,g),y(()=>e.density,g);let v;return y(V,a=>{a?(v=new ResizeObserver(g),v.observe(V.value)):v==null||v.disconnect()}),de(()=>{v==null||v.disconnect()}),ce(()=>{const a=!!(r.counter||e.counter||e.counterValue),c=!!(a||r.details),[d,m]=fe(C),[{modelValue:D,...U}]=K.filterProps(e),[M]=Ne(e);return t(K,$({ref:F,modelValue:l.value,"onUpdate:modelValue":h=>l.value=h,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(e.variant)},e.class],style:e.style},d,U,{focused:f.value}),{...r,default:h=>{let{isDisabled:w,isDirty:z,isReadonly:Y,isValid:Z}=h;return t(Ee,$({ref:o,style:{"--v-textarea-control-height":R.value},onClick:J,onMousedown:Q,"onClick:clear":W,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"],role:"textbox"},M,{active:L.value||z.value,dirty:z.value||e.dirty,disabled:w.value,focused:f.value,error:Z.value===!1}),{...r,default:ee=>{let{props:{class:A,...te}}=ee;return t(I,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),H(t("textarea",$({ref:k,class:A,value:l.value,onInput:X,autofocus:e.autofocus,readonly:Y.value,disabled:w.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:S,onBlur:n},te,m),null),[[me("intersect"),{handler:_},null,{once:!0}]]),e.autoGrow&&H(t("textarea",{class:[A,"v-textarea__sizer"],"onUpdate:modelValue":le=>l.value=le,ref:V,readonly:!0,"aria-hidden":"true"},null),[[ve,l.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:c?h=>{var w;return t(I,null,[(w=r.details)==null?void 0:w.call(r,h),a&&t(I,null,[t("span",null,null),t(qe,{active:e.persistentCounter||f.value,value:i.value,max:x.value},r.counter)])])}:void 0})}),pe({},F,o,k)}}),Ge={key:0,style:{"max-height":"200px"},class:"h-100"},Oe={class:"d-flex flex-column align-center"},et=ye({__name:"CourseDetailsForm",props:{course:{default:()=>({title:"",description:"",status:be.Draft,difficulty:G.Beginner,thumbnail:null,prerequisite_id:null})}},setup(e,{expose:B,emit:C}){const b=e,r=p(!1),l=p(b.course),f=p({});return B({formEl:f,validate:async()=>{try{const{valid:n}=await f.value.validate();return n?Promise.resolve(l.value):Promise.reject(new Error("validation faild"))}catch(n){throw n}}}),y(()=>b.course,n=>{l.value=n}),(n,i)=>{const x=ne,_=oe,F=ae;return T(),O(I,null,[t(Ae,{ref_key:"formEl",ref:f},{default:u(()=>[t(he,null,{default:u(()=>[t(we,null,{default:u(()=>[t(Ce,{class:"mt-0"},{default:u(()=>[t(P,{cols:"12",sm:"4"},{default:u(()=>[s(l).thumbnail?(T(),O("div",Ge,[t(Se,{media:{thumb_url:s(l).thumbnail,status:2,type:"image"},deletable:"",onOnDelete:i[0]||(i[0]=o=>s(l).thumbnail=null)},null,8,["media"])])):(T(),_e(x,{key:1,text:n.$t("media.upload.description")},{default:u(({props:o})=>[t(Fe,$({onClick:i[1]||(i[1]=R=>r.value=!0)},{...o,...s(ke),style:"min-height: 130px"}),{default:u(()=>[Pe("div",Oe,[t($e,{icon:"flat-color-icons:add-image",size:"28"}),t(Te,{class:"mt-2"},{default:u(()=>[Ie(Be(n.$t("media.thumbnale")),1)]),_:1})])]),_:2},1040)]),_:1},8,["text"]))]),_:1}),t(P,{cols:"12",sm:"8"},{default:u(()=>[t(ze,{modelValue:s(l).title,"onUpdate:modelValue":i[2]||(i[2]=o=>s(l).title=o),rules:[s(j)],label:n.$t("course.fields.title.label"),class:"mb-5"},{"append-inner":u(()=>[t(x,{text:n.$t("course.fields.title.description")},null,8,["text"])]),_:1},8,["modelValue","rules","label"]),t(He,{modelValue:s(l).description,"onUpdate:modelValue":i[3]||(i[3]=o=>s(l).description=o),rules:[s(j)],label:n.$t("course.fields.description.label")},{"append-inner":u(()=>[t(x,{text:n.$t("course.fields.description.description")},null,8,["text"])]),_:1},8,["modelValue","rules","label"])]),_:1}),t(P,{cols:"12",sm:"6"},{default:u(()=>[t(_,{modelValue:s(l).difficulty,"onUpdate:modelValue":i[4]||(i[4]=o=>s(l).difficulty=o),items:Object.values(s(G)).map(o=>({title:n.$t(`course.fields.difficulty.options.${o}`),value:o})),label:n.$t("course.fields.difficulty.label")},{"append-inner":u(()=>[t(x,{text:n.$t("course.fields.difficulty.description")},null,8,["text"])]),_:1},8,["modelValue","items","label"])]),_:1}),t(P,{cols:"12",sm:"6"},{default:u(()=>[t(_,{modelValue:s(l).prerequisite_id,"onUpdate:modelValue":i[5]||(i[5]=o=>s(l).prerequisite_id=o),items:[],label:n.$t("course.fields.prerequisite.label")},{"append-inner":u(()=>[t(x,{text:n.$t("course.fields.prerequisite.description")},null,8,["text"])]),_:1},8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),t(F,{"allowed-file-types":["image/*"],"max-number-of-files":1,onDone:i[6]||(i[6]=o=>{s(l).thumbnail=o[0].thumb_url,r.value=!1}),"is-dialog-visible":s(r),"onUpdate:isDialogVisible":i[7]||(i[7]=o=>Re(r)?r.value=o:null)},null,8,["is-dialog-visible"])],64)}}});export{et as _};
