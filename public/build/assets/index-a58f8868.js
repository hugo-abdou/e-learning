import{_ as k}from"./AppTextField.vue_vue_type_script_setup_true_lang-235432c3.js";import{d as S,r as n,w as E,o as b,h as x,f as a,b as s,ba as j,bb as M,y as u,z as V,bD as q,bf as T,e as m,q as t,b2 as _,al as h,b9 as $,c7 as L,c8 as z,c as I,j as W,F as G,v as A}from"./main-2d2efdef.js";import{V as H}from"./VForm-d1b03105.js";import{V as J}from"./VAlert-95d1ad7a.js";import{V as K}from"./VCheckbox-2b803ef7.js";import{_ as O}from"./AppSelect.vue_vue_type_script_setup_true_lang-5c14f55a.js";import{u as Q}from"./useRolesStore-3e106e81.js";import{p as X}from"./utils-cf604421.js";import{a as B,V as Y}from"./VRow-b362c44e.js";import{V as U}from"./VDivider-56b2b415.js";import{V as Z}from"./VDataTableServer-ff091fcc.js";import{V as ee}from"./VPagination-1f9c92d0.js";import{V as se}from"./VChip-5110b4ca.js";import"./VInput-84038333.js";import"./VTextField-a58b9262.js";import"./VField-92f9d8a9.js";import"./VCheckboxBtn-c66b2d93.js";import"./VSelectionControl-23864fe7.js";import"./VSelect-4c5979a9.js";import"./VList-3e9a4151.js";import"./VMenu-1ed28082.js";import"./VTable-97ddfd2c.js";const te={class:"d-flex align-end gap-3 mb-3"},ae=S({__name:"AddEditPermissionDialog",props:{isDialogVisible:{type:Boolean},permissionName:{default:""}},emits:["update:isDialogVisible","update:permissionName"],setup(D,{emit:P}){const r=D,p=P,l=n(""),o=()=>{p("update:isDialogVisible",!1),l.value=""},f=()=>{p("update:isDialogVisible",!1),p("update:permissionName",l.value)};return E(r,()=>{l.value=r.permissionName}),(g,c)=>{const v=z,y=k;return b(),x(L,{width:g.$vuetify.display.smAndDown?"auto":600,"model-value":r.isDialogVisible,"onUpdate:modelValue":o},{default:a(()=>[s(v,{onClick:o}),s($,{class:"pa-sm-8 pa-5"},{default:a(()=>[s(j,{class:"text-center"},{default:a(()=>[s(M,{class:"text-h5"},{default:a(()=>[u(V(r.permissionName?"Edit":"Add")+" Permission ",1)]),_:1}),s(q,null,{default:a(()=>[u(V(r.permissionName?"Edit":"Add")+" permission as per your requirements. ",1)]),_:1})]),_:1}),s(T,{class:"mt-1"},{default:a(()=>[s(H,null,{default:a(()=>[s(J,{type:"warning",title:"Warning!",variant:"tonal",class:"mb-6"},{default:a(()=>[u(" By editing the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding. ")]),_:1}),m("div",te,[s(y,{modelValue:t(l),"onUpdate:modelValue":c[0]||(c[0]=w=>_(l)?l.value=w:null),density:"compact",label:"Permission Name",placeholder:"Enter Permission Name"},null,8,["modelValue"]),s(h,{onClick:f},{default:a(()=>[u(" Update ")]),_:1})]),s(K,{label:"Set as core permission"})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}});const ie=m("h5",{class:"text-h4 mb-6"},"Permissions List",-1),oe=m("p",{class:"mb-0"}," Each category (Basic, Professional, and Business) includes the four predefined roles shown below. ",-1),le={class:"d-flex align-center gap-4 flex-wrap"},ne={class:"d-flex gap-2"},re={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},me={class:"text-sm text-medium-emphasis mb-0"},Se=S({__name:"index",setup(D){const P=[{title:"Name",key:"name"},{title:"Assigned To",key:"roles",sortable:!1},{title:"Created Date",key:"created_at",sortable:!1}],r=n(),p=n(""),l=n(0),o=n({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),f=n(!1),g=n(!1),c=n(""),v=n(1),y=Q();return E(()=>o.value.itemsPerPage,async()=>{var i;const d=await y.fetchPermissions(o.value);r.value=d.data,d.meta&&(v.value=d.meta.total/d.meta.per_page||0,l.value=((i=d.meta)==null?void 0:i.total)||0)},{immediate:!0}),(d,i)=>{const F=O,R=k,N=ae;return b(),x(Y,null,{default:a(()=>[s(B,{cols:"12"},{default:a(()=>[ie,oe]),_:1}),s(B,{cols:"12"},{default:a(()=>[s($,null,{default:a(()=>[s(T,{class:"d-flex align-center justify-space-between flex-wrap gap-4"},{default:a(()=>[s(F,{modelValue:t(o).itemsPerPage,"onUpdate:modelValue":i[0]||(i[0]=e=>t(o).itemsPerPage=e),items:[10,20,50,100],style:{width:"5rem"}},null,8,["modelValue"]),m("div",le,[s(R,{modelValue:t(p),"onUpdate:modelValue":i[1]||(i[1]=e=>_(p)?p.value=e:null),placeholder:"Search",density:"compact",style:{width:"12.5rem"}},null,8,["modelValue"])])]),_:1}),s(U),s(t(Z),{"items-per-page":t(o).itemsPerPage,"onUpdate:itemsPerPage":i[3]||(i[3]=e=>t(o).itemsPerPage=e),page:t(o).page,"onUpdate:page":i[4]||(i[4]=e=>t(o).page=e),"items-length":t(l),headers:P,items:t(r),class:"text-medium-emphasis text-no-wrap","onUpdate:options":i[5]||(i[5]=e=>o.value=e)},{"item.roles":a(({item:e})=>[m("div",ne,[(b(!0),I(G,null,W(e.roles,C=>(b(),x(se,{key:C,color:"primary",label:"",class:"font-weight-medium"},{default:a(()=>[u(V(C),1)]),_:2},1024))),128))])]),bottom:a(()=>[s(U),m("div",re,[m("p",me,V(t(X)(t(o),t(l))),1),s(ee,{modelValue:t(o).page,"onUpdate:modelValue":i[2]||(i[2]=e=>t(o).page=e),length:Math.ceil(t(l)/t(o).itemsPerPage),"total-visible":d.$vuetify.display.xs?1:Math.ceil(t(l)/t(o).itemsPerPage)},{prev:a(e=>[s(h,A({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>[u(" Previous ")]),_:2},1040)]),next:a(e=>[s(h,A({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>[u(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.created_at":a(({item:e})=>[m("span",null,V(e.created_at),1)]),_:1},8,["items-per-page","page","items-length","items"])]),_:1}),s(N,{isDialogVisible:t(f),"onUpdate:isDialogVisible":i[6]||(i[6]=e=>_(f)?f.value=e:null),"permission-name":t(c),"onUpdate:permissionName":i[7]||(i[7]=e=>_(c)?c.value=e:null)},null,8,["isDialogVisible","permission-name"]),s(N,{isDialogVisible:t(g),"onUpdate:isDialogVisible":i[8]||(i[8]=e=>_(g)?g.value=e:null)},null,8,["isDialogVisible"])]),_:1})]),_:1})}}});export{Se as default};
