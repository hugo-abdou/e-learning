import{aZ as Q,ab as ee,b8 as ae,L as te,aa as le,aB as ne,bV as oe,aC as se,s as B,a3 as E,E as C,a9 as ue,x as s,F as ie,m as g,bP as re,ar as ce,bt as de,b9 as fe,d as z,aW as O,o as R,g as me,e as I,f as ve,D as pe,bW as he,i as ye,z as Ve,w as Ce,n as M,bX as K,y as ke}from"./main-8c6cae95.js";import{d as be,a as ge}from"./VInput-74f983d3.js";import{m as _e,V as N}from"./VTextField-41755040.js";import{m as we,d as Pe,V as xe,a as U}from"./VList-04d013c6.js";import{V as De}from"./VMenu-ca74f75b.js";import{c as Be}from"./VCheckboxBtn-cc4c4e9f.js";import{V as Ie}from"./VChip-bf88e46a.js";const Se=Q({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ee,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:ae},...we({itemChildren:!1})},"v-select"),Te=te()({name:"VSelect",props:{...Se(),...le(_e({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ne({transition:{component:oe}})},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,_){let{slots:t}=_;const{t:c}=se(),v=B(),S=B(),h=E(e,"menu"),o=C({get:()=>h.value,set:a=>{var n;h.value&&!a&&((n=S.value)!=null&&n.Î¨openChildren)||(h.value=a)}}),{items:k,transformIn:H,transformOut:W}=Pe(e),u=E(e,"modelValue",[],a=>H(fe(a)),a=>{const n=W(a);return e.multiple?n:n[0]??null}),y=be(),w=C(()=>u.value.map(a=>k.value.find(n=>e.valueComparator(n.value,a.value))||a)),$=C(()=>w.value.map(a=>a.props.value)),b=B(!1);let T="",A;const F=C(()=>e.hideSelected?k.value.filter(a=>!w.value.some(n=>n===a)):k.value),V=B();function j(a){e.openOnClear&&(o.value=!0)}function q(){e.hideNoData&&!k.value.length||e.readonly||y!=null&&y.isReadonly.value||(o.value=!o.value)}function X(a){var l,m,p,r;if(e.readonly||y!=null&&y.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(o.value=!0),["Escape","Tab"].includes(a.key)&&(o.value=!1),a.key==="ArrowDown"?(l=V.value)==null||l.focus("next"):a.key==="ArrowUp"?(m=V.value)==null||m.focus("prev"):a.key==="Home"?(p=V.value)==null||p.focus("first"):a.key==="End"&&((r=V.value)==null||r.focus("last"));const n=1e3;function f(i){const d=i.key.length===1,L=!i.ctrlKey&&!i.metaKey&&!i.altKey;return d&&L}if(e.multiple||!f(a))return;const x=performance.now();x-A>n&&(T=""),T+=a.key.toLowerCase(),A=x;const D=k.value.find(i=>i.title.toLowerCase().startsWith(T));D!==void 0&&(u.value=[D])}function P(a){if(e.multiple){const n=$.value.findIndex(f=>e.valueComparator(f,a.value));if(n===-1)u.value=[...u.value,a];else{const f=[...u.value];f.splice(n,1),u.value=f}}else u.value=[a],o.value=!1}function Y(a){var n;(n=V.value)!=null&&n.$el.contains(a.relatedTarget)||(o.value=!1)}function Z(a){b.value=!0}function G(a){var n;a.relatedTarget==null&&((n=v.value)==null||n.focus())}return ue(()=>{const a=!!(e.chips||t.chip),n=!!(!e.hideNoData||F.value.length||t.prepend||t.append||t["no-data"]),f=u.value.length>0,[x]=N.filterProps(e),D=f||!b.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(N,g({ref:v},x,{modelValue:u.value.map(l=>l.props.value).join(", "),"onUpdate:modelValue":l=>{l==null&&(u.value=[])},focused:b.value,"onUpdate:focused":l=>b.value=l,validationValue:u.externalValue,dirty:f,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:D,"onClick:clear":j,"onMousedown:control":q,onBlur:Y,onKeydown:X}),{...t,default:()=>s(ie,null,[s(De,g({ref:S,modelValue:o.value,"onUpdate:modelValue":l=>o.value=l,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[n&&s(xe,{ref:V,selected:$.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:l=>l.preventDefault(),onFocusin:Z,onFocusout:G},{default:()=>{var l,m,p;return[!F.value.length&&!e.hideNoData&&(((l=t["no-data"])==null?void 0:l.call(t))??s(U,{title:c(e.noDataText)},null)),(m=t["prepend-item"])==null?void 0:m.call(t),F.value.map((r,i)=>{var d;return t.item?(d=t.item)==null?void 0:d.call(t,{item:r,index:i,props:g(r.props,{onClick:()=>P(r)})}):s(U,g({key:i},r.props,{onClick:()=>P(r)}),{prepend:L=>{let{isSelected:J}=L;return e.multiple&&!e.hideSelected?s(Be,{modelValue:J,ripple:!1,tabindex:"-1"},null):void 0}})}),(p=t["append-item"])==null?void 0:p.call(t)]}})]}),w.value.map((l,m)=>{var i;function p(d){d.stopPropagation(),d.preventDefault(),P(l)}const r={"onClick:close":p,modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:l.value,class:"v-select__selection"},[a?t.chip?s(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:l.title}}},{default:()=>{var d;return[(d=t.chip)==null?void 0:d.call(t,{item:l,index:m,props:r})]}}):s(Ie,g({key:"chip",closable:e.closableChips,size:"small",text:l.title},r),null):((i=t.selection)==null?void 0:i.call(t,{item:l,index:m}))??s("span",{class:"v-select__selection-text"},[l.title,e.multiple&&m<w.value.length-1&&s("span",{class:"v-select__selection-comma"},[ce(",")])])])})])})}),de({isFocused:b,menu:o,select:P},v)}}),Fe=z({name:"AppSelect",inheritAttrs:!1}),Ke=z({...Fe,setup(e){const _=C(()=>{const c=O(),v=c.id||c.label;return v?`app-select-${v}-${Math.random().toString(36).slice(2,7)}`:void 0}),t=C(()=>O().label);return(c,v)=>(R(),me("div",{class:ke(["app-select flex-grow-1",c.$attrs.class])},[I(t)?(R(),ve(ge,{key:0,for:I(_),class:"mb-1 text-body-2 text-high-emphasis",text:I(t)},null,8,["for","text"])):pe("",!0),s(Te,M(K({...c.$attrs,class:null,label:void 0,variant:"outlined",id:I(_),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",c.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),he({_:2},[ye(c.$slots,(S,h)=>({name:h,fn:Ve(o=>[Ce(c.$slots,h,M(K(o||{})))])}))]),1040)],2))}});export{Te as V,Ke as _};
