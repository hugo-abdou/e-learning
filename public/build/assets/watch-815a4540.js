import{_ as V}from"./CoursePlayList.vue_vue_type_script_setup_true_lang-a76e13f2.js";import{d as x,l as P,r as d,N,a9 as S,c3 as u,w as B,o as n,h as p,f as s,b as l,q as o,c as v,c8 as L,v as R,bZ as T,am as f,y as m,k as U,b_ as E,bb as M,b4 as $}from"./main-83f81ad7.js";import{P as j}from"./vue3-perfect-scrollbar.esm-016ed6f3.js";import{a as k,V as q}from"./VRow-4a6d7b26.js";import"./InfoTooltip.vue_vue_type_script_setup_true_lang-7165c29f.js";import"./VTooltip-29248371.js";import"./ActionButton-4878606a.js";import"./ResponsiveText.vue_vue_type_script_setup_true_lang-fc540f3f.js";import"./useCourseStore-c17730ae.js";import"./VList-26f98dda.js";import"./ssrBoot-7be77cee.js";import"./VDivider-1b4c54ac.js";const A={key:0,class:"position-relative h-100 border"},O={key:0,class:"position-absolute w-100 h-100 d-flex gap-1 align-center justify-center",style:{"background-color":"rgba(0, 0, 0, 56.8%)",inset:"0"}},ee=x({__name:"watch",setup(Z){const g=P(),e=d(),r=d(!1);N();const c=d(),_=d(),b=S(()=>{if(!e.value)return{};if(e.value.type===u.video)return{onReady:t=>{var a;return c.value=(a=t.target)==null?void 0:a.plyr},onEnded:t=>r.value=!0,onPause:t=>e.value.playing=!1,onPlay:t=>e.value.playing=!0};if(e.value.type===u.pdf)return{"onUpdate:pdf":h}}),h=({page:t,pages:a})=>{t==a&&(r.value=!0)},y=()=>{_.value.next(),r.value=!1},C=()=>{var t;((t=e.value)==null?void 0:t.type)===u.video&&setTimeout(()=>{var a;(a=c.value)==null||a.play()},500),r.value=!1};return B(e,t=>{t&&t.type==="video"&&(setTimeout(()=>{var a;(a=c.value)==null||a.play()},500),r.value=!1)}),(t,a)=>{const w=V;return n(),p(q,{align:"start"},{default:s(()=>[l(k,{cols:"9",class:"py-0"},{default:s(()=>{var i;return[o(e)?(n(),v("div",A,[(n(),p(o(L),R(o(b),{key:(i=o(e))==null?void 0:i.id,"aspect-ratio":"1.77",media:o(e)}),T({_:2},[o(e).type===o(u).image?{name:"toolbar",fn:s(()=>[l(f,{variant:"elevated",color:"default","append-icon":"mdi-skip-forward",onClick:y},{default:s(()=>[m(" Continue ")]),_:1})]),key:"0"}:void 0]),1040,["media"])),o(r)?(n(),v("div",O,[l(f,{color:"default","prepend-icon":"mdi-rotate-left",onClick:C},{default:s(()=>[m(" Start Over ")]),_:1}),l(f,{color:"default","append-icon":"mdi-skip-forward",onClick:y},{default:s(()=>[m(" Continue ")]),_:1})])):U("",!0)])):(n(),p(o(E),{key:1,type:["image","image"]}))]}),_:1}),l(k,{cols:"3",class:"rounded pa-0"},{default:s(()=>[l(M,null,{default:s(()=>[l(o(j),{options:{wheelPropagation:!0}},{default:s(()=>[l(w,{ref_key:"playList",ref:_,selected:o(e),"onUpdate:selected":a[0]||(a[0]=i=>$(e)?e.value=i:null),"course-id":Number(o(g).params.id)},null,8,["selected","course-id"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ee as default};
