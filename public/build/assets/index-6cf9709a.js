import{_ as M}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-77225ec1.js";import{_ as A}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-bc3adc91.js";import{_ as R}from"./AppTextField.vue_vue_type_script_setup_true_lang-ef3bc5fd.js";import{_ as F}from"./AppSelect.vue_vue_type_script_setup_true_lang-871cc6c2.js";import{f as H}from"./formatters-386d1040.js";import{u as O}from"./useCourseStore-bc687bd9.js";import{r as S,a as w,p as W}from"./utils-6ad673f2.js";import{t as q,r as f,w as G,S as J,v as r,z as u,A as a,n as o,H as t,D as n,B as D,aa as P,E as p,bW as d,C as h,x as K,a2 as _}from"./plugins-23ac56fa.js";import{l as Q}from"./lodash-f6b38868.js";import{V as X}from"./VCard-76e97c90.js";import{V as Y}from"./VCardText-bc505610.js";import{V as B,a as $}from"./VRow-85c1bb44.js";import{V as z}from"./VDivider-96dac35c.js";import{V as Z}from"./VDataTableServer-87120d01.js";import{V as ee}from"./VSkeletonLoader-6d9b67e8.js";import{V as T}from"./VChip-7aebcdb4.js";import{V as te}from"./VMenu-3cd3f165.js";import{V as oe,a as m,b as ae}from"./VList-d52d4d68.js";import{V as se}from"./VPagination-bf5baa2a.js";import"./DateTimePicker.vue_vue_type_style_index_0_lang-ab817b8b.js";import"./component-4851ecd9.js";import"./VField-37b3162f.js";import"./VInput-3fba20f5.js";import"./index-fb540909.js";import"./forwardRefs-6ea3df5c.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-41bdfac7.js";import"./VCardActions-cfac30f0.js";import"./VSpacer-82458221.js";import"./createSimpleFunctional-510e0cf2.js";import"./VDialog-abdd39d4.js";import"./VOverlay-bf54c426.js";import"./scopeId-9684f7d2.js";import"./dialog-transition-4e0bea32.js";import"./VTooltip-f4539d91.js";import"./VTextField-8224b973.js";import"./VSelect-9be68f15.js";import"./VCheckboxBtn-928b9cee.js";import"./VSelectionControl-6b7bc1e2.js";import"./_commonjsHelpers-de833af9.js";import"./VAvatar-6b93ad41.js";import"./VTable-b8302633.js";import"./ssrBoot-1ad8a147.js";const le={class:"d-flex justify-end flex-wrap gap-4"},ie={class:"d-flex align-center gap-2 py-2 text-capitalize"},re={class:"d-flex flex-column"},ne={class:"text-base"},ue={class:"text-capitalize ml-1"},pe={key:0,class:"text-capitalize ml-1"},de={class:"text-capitalize"},me={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},ce={class:"text-sm text-disabled mb-0"},at=q({__name:"index",setup(fe){const y=f(null),c=f(0),V=f([]),C=f(!1),i=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),b=O(),L=s=>b.deleteCourse(s).then(g),k=(s,l="Published")=>b.publishCourse(s,l).then(g),g=Q.debounce(()=>{V.value.length||(C.value=!0),b.getCourses(i.value).then(({data:s,meta:l})=>{V.value=s,c.value=l.total}).finally(()=>C.value=!1)},500),U=[{title:"Title",key:"title"},{title:"Status",key:"status",width:70},{title:"Difficulty",key:"difficulty",width:70},{title:"",key:"actions",sortable:!1,width:70}];return G(Object.keys(i.value).map(s=>()=>i.value[s]),([s,l,x])=>{g()}),(s,l)=>{const x=F,E=R,I=J("RouterLink"),N=A,j=M;return r(),u(B,null,{default:a(()=>[o($,{cols:"12"},{default:a(()=>[o(X,{title:s.$t("Cours")},{default:a(()=>[o(Y,null,{default:a(()=>[o(B,{align:"end"},{default:a(()=>[o($,{cols:"12",sm:"2"},{default:a(()=>[o(x,{modelValue:t(i).itemsPerPage,"onUpdate:modelValue":l[0]||(l[0]=e=>t(i).itemsPerPage=e),label:s.$t("Items Per Page"),items:[10,20,50,100]},null,8,["modelValue","label"])]),_:1}),o($,{class:"d-flex gap-5"},{default:a(()=>[o(E,{modelValue:t(i).search,"onUpdate:modelValue":l[1]||(l[1]=e=>t(i).search=e),placeholder:s.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),n("div",le,[o(D,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:a(()=>[P(p(s.$t("New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),o(z),o(t(Z),{"items-per-page":t(i).itemsPerPage,"onUpdate:itemsPerPage":l[3]||(l[3]=e=>t(i).itemsPerPage=e),page:t(i).page,"onUpdate:page":l[4]||(l[4]=e=>t(i).page=e),items:t(V),"items-length":t(c),headers:U.map(e=>({...e,title:s.$t(e.title)})),class:"text-no-wrap",loading:t(C),"onUpdate:options":l[5]||(l[5]=e=>i.value=e)},{loading:a(()=>[o(t(ee),{class:"pt-2",type:["table-tbody"]})]),"item.title":a(({item:e})=>[n("div",ie,[n("div",re,[n("h6",ne,[o(I,{to:{name:"course-id",params:{id:e.id}},class:"font-weight-medium user-list-name"},{default:a(()=>[P(p(e.title),1)]),_:2},1032,["to"])])])])]),"item.status":a(({item:e})=>[o(T,{color:t(S)(e.status).color},{prepend:a(()=>[e.status===t(d).Scheduled?(r(),u(N,{key:0,icon:"mdi-clock-time-five-outline",text:t(H)(e.schedule_at)},null,8,["text"])):(r(),u(h,{key:1,icon:t(S)(e.status).icon},null,8,["icon"]))]),default:a(()=>[n("span",ue,p(e.status),1),e.status===t(d).Error?(r(),K("span",pe,p(`#${e.id}`),1)):_("",!0)]),_:2},1032,["color"])]),"item.difficulty":a(({item:e})=>[o(T,{color:t(w)(e.difficulty).color},{default:a(()=>[o(h,{icon:t(w)(e.difficulty).icon,class:"ma-1"},null,8,["icon"]),n("span",de,p(e.difficulty),1)]),_:2},1032,["color"])]),"item.actions":a(({item:e})=>[o(D,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:a(()=>[o(h,{size:"24",icon:"tabler-dots-vertical"}),o(te,{activator:"parent"},{default:a(()=>[o(oe,null,{default:a(()=>[o(m,{to:{name:"course-id-edit",params:{id:e.id}}},{prepend:a(()=>[o(h,{icon:"tabler-edit"})]),default:a(()=>[o(ae,null,{default:a(()=>[P(p(s.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.status===t(d).Published?(r(),u(m,{key:0,onClick:v=>k(e.id,"Closed"),"prepend-icon":"material-symbols:close-rounded",title:s.$t("Close")},null,8,["onClick","title"])):_("",!0),e.status===t(d).Published?(r(),u(m,{key:1,onClick:v=>k(e.id,"Private"),"prepend-icon":"material-symbols:private-connectivity-outline",title:s.$t("Private")},null,8,["onClick","title"])):_("",!0),e.status!==t(d).Published?(r(),u(m,{key:2,onClick:v=>k(e.id),"prepend-icon":"material-symbols:publish-rounded",title:s.$t("Publish")},null,8,["onClick","title"])):_("",!0),e.status===t(d).Draft||e.status===t(d).Scheduled?(r(),u(m,{key:3,onClick:v=>y.value=e.id,"prepend-icon":"solar:calendar-broken",title:s.$t("Schedule publish")},null,8,["onClick","title"])):_("",!0),o(m,{"prepend-icon":"tabler-trash",title:s.$t("Delete"),onClick:v=>L(e.id)},null,8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[o(z),n("div",me,[n("p",ce,p(t(W)(t(i),t(c))),1),o(se,{"model-value":t(i).page,length:Math.ceil(t(c)/t(i).itemsPerPage),"total-visible":s.$vuetify.display.xs?1:Math.ceil(t(c)/t(i).itemsPerPage),"onUpdate:modelValue":l[2]||(l[2]=e=>i.value={...t(i),page:e})},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),o(j,{"course-id":t(y),onDone:l[6]||(l[6]=e=>(y.value=null,t(g)()))},null,8,["course-id"])]),_:1})]),_:1})}}});export{at as default};
