import{r as C}from"./validators-3a378363.js";import{_ as ce}from"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-76076707.js";import{_ as me}from"./DateTimePicker.vue_vue_type_style_index_0_lang-c2aa8feb.js";import{_ as pe}from"./CustomRadiosWithIcon-138d9720.js";import{_ as fe}from"./EditorJs.vue_vue_type_style_index_0_lang-cbe574ee.js";import{_ as Ve}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-d423ce93.js";import{u as b,U as W}from"./utils-4f96d8b5.js";import{t as _e,r as h,a4 as ve,S as be,v as c,x as U,n as e,A as t,aa as d,H as i,F as A,y as R,a2 as x,B as p,s as P,D as F,C as Q,E as I,L as S,z as q}from"./plugins-1ca62e54.js";import{u as he}from"./useQuizzesStore-6ffdf938.js";import{V as ye}from"./VAppBarTitle-cce8670b.js";import{V as $,a as u}from"./VRow-063e83bb.js";import{V as L,a as j,c as G}from"./VCard-2a55749d.js";import{V as B}from"./VTextField-38237e59.js";import{V as we}from"./VTextarea-8a139c5f.js";import{b as K}from"./VInput-0f0d564d.js";import{V as ke,a as Z,b as X,c as Y}from"./VExpansionPanel-60a279c2.js";import{V as Ce}from"./VCardText-f87185bc.js";import{V as qe}from"./VSpacer-b2217678.js";import{V as ge}from"./VForm-11822a25.js";import{V as ze}from"./VCheckbox-4f5a6ff8.js";import{V as ee}from"./VTooltip-98a36fe7.js";import{V as De}from"./VSwitch-15c3cd26.js";import{V as Ue}from"./VCardActions-114e80cb.js";import"./VCheckboxBtn-bf01db5f.js";import"./VSelectionControl-1b1614f2.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-9838b75e.js";import"./index-b32b8b4e.js";import"./VToolbar-96f2844b.js";import"./index-290985fb.js";import"./_commonjsHelpers-de833af9.js";import"./VSkeletonLoader-2a84e475.js";import"./VChip-412e0c07.js";import"./VAvatar-15acdbba.js";import"./VPagination-03e938d2.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./lodash-f6b38868.js";import"./preact.module-7f17e2b0.js";import"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-3d4c07f0.js";import"./VWindowItem-24433b63.js";import"./forwardRefs-6ea3df5c.js";import"./VSlideGroup-cb6b3143.js";import"./VOverlay-ce640807.js";import"./scopeId-598a8366.js";import"./ssrBoot-6bb28df7.js";import"./VDialog-5c924145.js";import"./dialog-transition-7fd252b6.js";import"./component-ac08781a.js";import"./VField-5f020633.js";import"./VRadioGroup-471fac21.js";import"./createSimpleFunctional-4f87dcb7.js";const Ae=1705602791660,Pe=[{id:"fijsBIcGGc",type:"header",data:{text:"Rerum voluptatem ex .",level:1}},{id:"IBLyO6wKtq",type:"math",data:{text:"\begin{CD}  A @>a>> B \\ @VbVV @AAcA \\ C @= D \\end{CD}"}},{id:"0PP_jkyckg",type:"math",data:{text:"\begin{CD} A @>a>> B \\ @VbVV @AAcA \\ C @= D end{CD}"}},{id:"-I8wWNWCxQ",type:"image",data:{file:{url:"https://skillsup.test/storage/media/11/afH9Rzci9sUc67H0CmBk_65a95c1acbcac/original.jpeg"},caption:"",withBorder:!1,stretched:!1,withBackground:!1}}],Qe="2.28.2",Se={time:Ae,blocks:Pe,version:Qe},$e={class:"d-flex flex-column align-center"},Be={class:"d-flex align-start gap-2"},Te={class:"ml-4",style:{width:"40px"}},$t=_e({__name:"create-old",setup(Oe){const T=h([]),k=h(!1),s=h({title:"",description:"",duration:5,status:"Draft",attachments:[],questions:[{id:b(),allow_custom_answer:!1,question:{},options:[{id:b(),option:"",points:0,is_correct:!1}]}]}),J=h({}),O=async()=>{const{valid:a,errors:l}=await J.value.validate();return a?Promise.resolve():Promise.reject(l)},te=()=>{O().then(()=>{s.value.questions.push({id:b(),allow_custom_answer:!1,question:{},options:[{id:b(),option:"",points:0,is_correct:!1}]})})},ae=a=>{O().then(()=>{s.value.questions[a].options.push({id:b(),option:"",points:0,is_correct:!1})})},oe=(a,l)=>{s.value.questions[a].options.splice(l,1)},le=a=>{s.value.questions.splice(a,1)},se=a=>{s.value.questions.push({...s.value.questions[a],id:b(),options:s.value.questions[a].options.map(l=>({...l,id:b()}))})},ie=a=>{s.value.attachments.push(...a),k.value=!1},f=h("publish"),g=h("Private"),re=[{title:"Private",desc:"Only you see can this quiz",value:"Private",icon:{icon:"carbon:virtual-private-cloud",size:"28"}},{title:"Publish",desc:"All your users can see this quiz",value:"Published",icon:{icon:"mdi-public",size:"28"}}],z=h(new Date().toISOString()),ne=a=>{s.value.attachments.splice(a,1)},M=ve(),E=he(),H=()=>new Promise(async(a,l)=>{try{await O();for(let m=0;m<T.value.length;m++){const{editor:V,id:_}=T.value[m],N=await V.save(),o=s.value.questions.findIndex(n=>n.id===_);s.value.questions[o].question=N}const y={};s.value.attachments.forEach(({type:m,id:V,name:_})=>y[V]={type:m,name:_});const D=await E.createQuiz({...s.value,questions:s.value.questions.map(({id:m,question:V,..._})=>({..._,question:JSON.stringify(V)})),attachments:y});f.value==="schedule"&&await E.scheduleQuiz(Number(D.data.id),z.value),f.value==="publish"&&await E.publishQuiz(Number(D.data.id),g.value),a("ok")}catch(y){l(y)}}),ue=()=>{H().then(()=>{M.push({name:"quizzes-create"})})},de=()=>{H().then(()=>{M.push({name:"quizzes"})})};return(a,l)=>{const y=be("Media"),D=Ve,m=fe,V=pe,_=me,N=ce;return c(),U(A,null,[e(ye,null,{default:t(()=>[d("Create a New Quiz")]),_:1}),e(ge,{ref_key:"formEl",ref:J,class:"mt-5"},{default:t(()=>[e($,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(L,{"prepend-icon":"fluent:quiz-new-24-regular",title:"Quiz Details"},{default:t(()=>[e(j,null,{default:t(()=>[e($,{class:"pt-2"},{default:t(()=>[e(u,{cols:"12",sm:"8"},{default:t(()=>[e(B,{modelValue:i(s).title,"onUpdate:modelValue":l[0]||(l[0]=o=>i(s).title=o),rules:["requiredValidator"in a?a.requiredValidator:i(C)],label:"Title"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12",sm:"4"},{default:t(()=>[e(B,{modelValue:i(s).duration,"onUpdate:modelValue":l[1]||(l[1]=o=>i(s).duration=o),type:"number",rules:["requiredValidator"in a?a.requiredValidator:i(C)],label:"Duration (minutes)","prepend-inner-icon":"tabler-clock"},null,8,["modelValue","rules"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(we,{rows:"2","auto-grow":"",modelValue:i(s).description,"onUpdate:modelValue":l[2]||(l[2]=o=>i(s).description=o),rules:["requiredValidator"in a?a.requiredValidator:i(C)],label:"Description"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(L,{"prepend-icon":"teenyicons:attachment-outline",title:"Quiz Attachments"},{default:t(()=>[e(j,null,{default:t(()=>[e($,{align:"center"},{default:t(()=>[i(s).attachments.length?(c(!0),U(A,{key:0},R(i(s).attachments,(o,n)=>(c(),q(u,{cols:"12",sm:"6",md:"4",class:"h-100",key:o.id},{default:t(()=>[e(y,{media:o,deletable:"","aspect-ratio":"2/1","is-preview":"",onOnDelete:r=>ne(n)},null,8,["media","onOnDelete"])]),_:2},1024))),128)):x("",!0),e(u,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(D,{text:a.$t("media.upload.description")},{default:t(({props:o})=>[e(p,P({...o,...i(W),style:"min-height: 150px;aspect-ratio:2/1"},{onClick:l[3]||(l[3]=n=>k.value=!0)}),{default:t(()=>[F("div",$e,[e(Q,{icon:"flat-color-icons:add-image",size:"28"}),e(K,{class:"mt-2"},{default:t(()=>[d(I(a.$t("media.attachment")),1)]),_:1})])]),_:2},1040)]),_:1},8,["text"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(c(!0),U(A,null,R(i(s).questions,(o,n)=>(c(),q(u,{cols:"12",key:n},{default:t(()=>[e(L,{"prepend-icon":"mdi-account-question-outline",title:`${"Question "+(n+1)} - (${o.options.reduce((r,v)=>r+Number(v.points),0)} Points)`},{append:t(()=>[e(p,P({onClick:r=>se(n)},{variant:"text",density:"compact",color:"default"},{icon:"tabler-copy"}),null,16,["onClick"]),e(p,P({onClick:r=>le(n)},{variant:"text",density:"compact",color:"error"},{icon:"tabler-trash"}),null,16,["onClick"])]),default:t(()=>[e(j,null,{default:t(()=>[e($,null,{default:t(()=>[e(u,{cols:"12"},{default:t(()=>[e(m,{class:"border rounded",placeholder:"Type here your question "+(n+1),ref_for:!0,ref_key:"editorJs",ref:T,data:i(Se),holder:o.id},null,8,["placeholder","data","holder"])]),_:2},1024),(c(!0),U(A,null,R(o.options,(r,v)=>(c(),q(u,{key:v,cols:"12"},{default:t(()=>[F("div",Be,[e(B,{id:"option-"+(n+1)+"-"+(v+1),modelValue:r.option,"onUpdate:modelValue":w=>r.option=w,label:"Option "+(v+1),rules:["requiredValidator"in a?a.requiredValidator:i(C)],"base-color":r.is_correct?"success":"default",class:"w-100"},null,8,["id","modelValue","onUpdate:modelValue","label","rules","base-color"]),r.is_correct?(c(),q(B,{key:0,id:"option-points-"+(n+1)+"-"+(v+1),type:"number",modelValue:r.points,"onUpdate:modelValue":w=>r.points=w,label:"Points",rules:["requiredValidator"in a?a.requiredValidator:i(C)],"base-color":r.is_correct?"success":"default"},null,8,["id","modelValue","onUpdate:modelValue","rules","base-color"])):x("",!0),F("div",Te,[e(ze,{color:"success",modelValue:r.is_correct,"onUpdate:modelValue":w=>r.is_correct=w},{default:t(()=>[e(ee,{activator:"parent",location:"top"},{default:t(()=>[d(" Correct Answer ")]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),o.options.length>1?(c(),q(p,{key:1,onClick:w=>oe(n,v),icon:"",density:"compact",color:"error",variant:"text"},{default:t(()=>[e(Q,{icon:"tabler-trash"}),e(ee,{activator:"parent",location:"top"},{default:t(()=>[d(" Delete Option ")]),_:1})]),_:2},1032,["onClick"])):x("",!0)])]),_:2},1024))),128)),e(u,{cols:"12"},{default:t(()=>[e(De,{"model-value":o.allow_custom_answer,"onUpdate:modelValue":r=>o.allow_custom_answer=r,label:"Accept custom answers"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Ue,{class:"ma-3"},{default:t(()=>[e(p,{onClick:r=>ae(n),variant:"tonal"},{default:t(()=>[d(" Add Option ")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128)),e(u,null,{default:t(()=>[e(p,P(i(W),{onClick:te}),{default:t(()=>[e(K,{class:"mt-2"},{default:t(()=>[d(" Add Question ")]),_:1})]),_:1},16)]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(ke,{modelValue:i(f),"onUpdate:modelValue":l[6]||(l[6]=o=>S(f)?f.value=o:null),mandatory:"force",variant:"accordion"},{default:t(()=>[e(Z,{value:"publish"},{default:t(()=>[e(X,null,{default:t(()=>[e(Q,{icon:"tabler:send",class:"mr-3"}),d(" Publish Quiz ")]),_:1}),e(G,{class:"mb-2"},{default:t(()=>[d(" Make your Quiz public or private ")]),_:1}),e(Y,{class:"mt-5"},{default:t(()=>[e(V,{"selected-radio":i(g),"onUpdate:selectedRadio":l[4]||(l[4]=o=>S(g)?g.value=o:null),"radio-content":re,"grid-column":{md:"6"}},null,8,["selected-radio"])]),_:1})]),_:1}),e(Z,{value:"schedule"},{default:t(()=>[e(X,null,{default:t(()=>[e(Q,{icon:"tabler:calendar",class:"mr-3"}),d(" Schedule Quiz ")]),_:1}),e(G,{class:"mb-2"},{default:t(()=>[d(" Select a date to make your Quiz public. ")]),_:1}),e(Y,null,{default:t(()=>[e(_,{modelValue:i(z),"onUpdate:modelValue":l[5]||(l[5]=o=>S(z)?z.value=o:null),style:{width:"min-content"},config:{inline:!0,enableTime:!0,dateFormat:"Z"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{cols:"12"},{default:t(()=>[e(Ce,{class:"d-flex flex-wrap gap-2"},{default:t(()=>[e(p,{onClick:ue,variant:"outlined",color:"success"},{default:t(()=>[d(I(a.$t(i(f)))+" & Start New Quiz ",1)]),_:1}),e(qe),e(p,{onClick:de,color:"success"},{default:t(()=>[d(I(a.$t(i(f))),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),e(N,{"is-dialog-visible":i(k),"onUpdate:isDialogVisible":l[7]||(l[7]=o=>S(k)?k.value=o:null),"allowed-file-types":["image/*",".pdf","video/*"],onDone:ie},null,8,["is-dialog-visible","allowed-file-types"])],64)}}});export{$t as default};
