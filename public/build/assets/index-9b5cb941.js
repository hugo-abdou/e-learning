import{_ as M}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-715f5196.js";import{_ as R}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-7165c29f.js";import{_ as A}from"./AppTextField.vue_vue_type_script_setup_true_lang-7e68b421.js";import{_ as F}from"./AppSelect.vue_vue_type_script_setup_true_lang-b3c9fd04.js";import{f as q}from"./formatters-386d1040.js";import{u as O}from"./useCourseStore-c17730ae.js";import{d as G,r as f,w as H,a as J,o as n,h as u,f as s,b as a,bb as K,bh as Q,q as t,e as r,am as S,y as P,z as d,b_ as W,aU as w,b$ as D,c0 as p,a4 as v,c as X,k as _,c1 as z,c2 as Y,bF as Z}from"./main-83f81ad7.js";import{l as ee}from"./lodash-c2667fb2.js";import{V as B,a as $}from"./VRow-4a6d7b26.js";import{V as T}from"./VDivider-1b4c54ac.js";import{V as te}from"./VDataTableServer-27e4f63c.js";import{V as ae}from"./VMenu-2063156d.js";import{V as se,a as c,b as le}from"./VList-26f98dda.js";import"./DateTimePicker.vue_vue_type_style_index_0_lang-f35c6110.js";import"./component-769f8347.js";import"./VField-d76a4324.js";import"./VInput-c65df7da.js";import"./VTooltip-29248371.js";import"./VTextField-d890cb14.js";import"./VSelect-241a8653.js";import"./VCheckboxBtn-29b3e515.js";import"./VSelectionControl-a9b789af.js";import"./VTable-5fc5d78e.js";import"./ssrBoot-7be77cee.js";const oe={class:"d-flex justify-end flex-wrap gap-4"},ie={class:"d-flex align-center gap-2 py-2 text-capitalize"},ne={class:"d-flex flex-column"},re={class:"text-base"},ue={class:"text-capitalize ml-1"},de={key:0,class:"text-capitalize ml-1"},pe={class:"text-capitalize"},ce={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},me={class:"text-sm text-disabled mb-0"},Me=G({__name:"index",setup(fe){const b=f(null),m=f(0),y=f([]),C=f(!1),i=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),V=O(),U=l=>V.deleteCourse(l).then(g),k=(l,o="Published")=>V.publishCourse(l,o).then(g),g=ee.debounce(()=>{y.value.length||(C.value=!0),V.getCourses(i.value).then(({data:l,meta:o})=>{y.value=l,m.value=o.total}).finally(()=>C.value=!1)},500),L=[{title:"Title",key:"title"},{title:"Status",key:"status",width:70},{title:"Difficulty",key:"difficulty",width:70},{title:"",key:"actions",sortable:!1,width:70}];return H(Object.keys(i.value).map(l=>()=>i.value[l]),([l,o,x])=>{g()}),(l,o)=>{const x=F,I=A,N=J("RouterLink"),j=R,E=M;return n(),u(B,null,{default:s(()=>[a($,{cols:"12"},{default:s(()=>[a(K,{title:l.$t("Cours")},{default:s(()=>[a(Q,null,{default:s(()=>[a(B,{align:"end"},{default:s(()=>[a($,{cols:"12",sm:"2"},{default:s(()=>[a(x,{modelValue:t(i).itemsPerPage,"onUpdate:modelValue":o[0]||(o[0]=e=>t(i).itemsPerPage=e),label:l.$t("Items Per Page"),items:[10,20,50,100]},null,8,["modelValue","label"])]),_:1}),a($,{class:"d-flex gap-5"},{default:s(()=>[a(I,{modelValue:t(i).search,"onUpdate:modelValue":o[1]||(o[1]=e=>t(i).search=e),placeholder:l.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),r("div",oe,[a(S,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:s(()=>[P(d(l.$t("New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(T),a(t(te),{"items-per-page":t(i).itemsPerPage,"onUpdate:itemsPerPage":o[3]||(o[3]=e=>t(i).itemsPerPage=e),page:t(i).page,"onUpdate:page":o[4]||(o[4]=e=>t(i).page=e),items:t(y),"items-length":t(m),headers:L.map(e=>({...e,title:l.$t(e.title)})),class:"text-no-wrap",loading:t(C),"onUpdate:options":o[5]||(o[5]=e=>i.value=e)},{loading:s(()=>[a(t(W),{class:"pt-2",type:["table-tbody"]})]),"item.title":s(({item:e})=>[r("div",ie,[r("div",ne,[r("h6",re,[a(N,{to:{name:"course-id",params:{id:e.id}},class:"font-weight-medium user-list-name"},{default:s(()=>[P(d(e.title),1)]),_:2},1032,["to"])])])])]),"item.status":s(({item:e})=>[a(w,{color:t(D)(e.status).color},{prepend:s(()=>[e.status===t(p).Scheduled?(n(),u(j,{key:0,icon:"mdi-clock-time-five-outline",text:t(q)(e.schedule_at)},null,8,["text"])):(n(),u(v,{key:1,icon:t(D)(e.status).icon},null,8,["icon"]))]),default:s(()=>[r("span",ue,d(e.status),1),e.status===t(p).Error?(n(),X("span",de,d(`#${e.id}`),1)):_("",!0)]),_:2},1032,["color"])]),"item.difficulty":s(({item:e})=>[a(w,{color:t(z)(e.difficulty).color},{default:s(()=>[a(v,{icon:t(z)(e.difficulty).icon,class:"ma-1"},null,8,["icon"]),r("span",pe,d(e.difficulty),1)]),_:2},1032,["color"])]),"item.actions":s(({item:e})=>[a(S,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:s(()=>[a(v,{size:"24",icon:"tabler-dots-vertical"}),a(ae,{activator:"parent"},{default:s(()=>[a(se,null,{default:s(()=>[a(c,{to:{name:"course-id-edit",params:{id:e.id}}},{prepend:s(()=>[a(v,{icon:"tabler-edit"})]),default:s(()=>[a(le,null,{default:s(()=>[P(d(l.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.status===t(p).Published?(n(),u(c,{key:0,onClick:h=>k(e.id,"Closed"),"prepend-icon":"material-symbols:close-rounded",title:l.$t("Close")},null,8,["onClick","title"])):_("",!0),e.status===t(p).Published?(n(),u(c,{key:1,onClick:h=>k(e.id,"Private"),"prepend-icon":"material-symbols:private-connectivity-outline",title:l.$t("Private")},null,8,["onClick","title"])):_("",!0),e.status!==t(p).Published?(n(),u(c,{key:2,onClick:h=>k(e.id),"prepend-icon":"material-symbols:publish-rounded",title:l.$t("Publish")},null,8,["onClick","title"])):_("",!0),e.status===t(p).Draft||e.status===t(p).Scheduled?(n(),u(c,{key:3,onClick:h=>b.value=e.id,"prepend-icon":"solar:calendar-broken",title:l.$t("Schedule publish")},null,8,["onClick","title"])):_("",!0),a(c,{"prepend-icon":"tabler-trash",title:l.$t("Delete"),onClick:h=>U(e.id)},null,8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[a(T),r("div",ce,[r("p",me,d(t(Y)(t(i),t(m))),1),a(Z,{"model-value":t(i).page,length:Math.ceil(t(m)/t(i).itemsPerPage),"total-visible":l.$vuetify.display.xs?1:Math.ceil(t(m)/t(i).itemsPerPage),"onUpdate:modelValue":o[2]||(o[2]=e=>i.value={...t(i),page:e})},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),a(E,{"course-id":t(b),onDone:o[6]||(o[6]=e=>(b.value=null,t(g)()))},null,8,["course-id"])]),_:1})]),_:1})}}});export{Me as default};
