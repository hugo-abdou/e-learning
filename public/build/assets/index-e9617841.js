import{f as O}from"./formatters-386d1040.js";import{_ as R}from"./DateTimePicker.vue_vue_type_style_index_0_lang-12f1c32b.js";import{d as I,r as f,o as n,h as d,f as s,b as l,be as F,al as w,y as k,q as t,b2 as N,c7 as G,c8 as H,w as J,b9 as K,bf as W,e as h,z as u,c0 as X,eS as m,a3 as B,c as Y,k as y}from"./main-2d2efdef.js";import{V as Z}from"./VSpacer-f886726f.js";import{_ as ee}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-1bc17a1b.js";import{_ as te}from"./AppTextField.vue_vue_type_script_setup_true_lang-235432c3.js";import{_ as le}from"./AppSelect.vue_vue_type_script_setup_true_lang-5c14f55a.js";import{u as U}from"./useQuizzesStore-578a44e3.js";import{r as T,p as ae}from"./utils-cf604421.js";import{l as se}from"./lodash-af665324.js";import{V as q,a as D}from"./VRow-b362c44e.js";import{V as j}from"./VDivider-56b2b415.js";import{V as ie}from"./VDataTableServer-ff091fcc.js";import{V as oe}from"./VTooltip-dfa1b725.js";import{V as ne}from"./VChip-5110b4ca.js";import{V as re}from"./VMenu-1ed28082.js";import{V as ue,a as V}from"./VList-3e9a4151.js";import{V as de}from"./VPagination-1f9c92d0.js";import"./component-32c86fd4.js";import"./VField-92f9d8a9.js";import"./VInput-84038333.js";import"./VTextField-a58b9262.js";import"./VSelect-4c5979a9.js";import"./VCheckboxBtn-c66b2d93.js";import"./VSelectionControl-23864fe7.js";import"./VTable-97ddfd2c.js";const pe=I({__name:"ScheduleDialog",props:{isDialogVisible:{type:Boolean}},emits:["select","update:isDialogVisible"],setup(x,{emit:g}){const p=x,v=g,r=f(new Date().toISOString()),i=()=>{v("select",r.value)},z=()=>v("update:isDialogVisible",!1);return(_,P)=>{const b=H,$=R;return n(),d(G,{"model-value":p.isDialogVisible,"onUpdate:modelValue":z,width:"266"},{default:s(()=>[l(b,{onClick:z}),l($,{modelValue:t(r),"onUpdate:modelValue":P[0]||(P[0]=c=>N(r)?r.value=c:null),class:"w-100",config:{inline:!0}},{default:s(()=>[l(F,{class:"d-flex justify-space-between pt-2 border-t"},{default:s(()=>[l(Z),l(w,{size:"small",variant:"flat",onClick:i},{default:s(()=>[k(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model-value"])}}}),ce={class:"d-flex justify-end flex-wrap gap-4"},me={class:"truncate",style:{"max-width":"30vw"}},fe={class:"text-capitalize ml-1"},ge={key:0,class:"text-capitalize ml-1"},ve={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Ve={class:"text-sm text-disabled mb-0"},Re=I({__name:"index",setup(x){const g=f(null),p=f(0),v=f([]),r=f(!1),i=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),z=U(),_=se.debounce(()=>{v.value.length||(r.value=!0),z.getQuizzes({query:i.value}).then(({data:a,meta:o})=>{v.value=a,p.value=o.total}).finally(()=>r.value=!1)},500),P=[{title:"Title",key:"title"},{title:"Description",key:"description"},{title:"Status",key:"status"},{title:"Created at",key:"created_at"},{title:"",key:"actions",sortable:!1,width:70}];J(Object.keys(i.value).map(a=>()=>i.value[a]),([a,o,Q])=>{_()});const b=U(),$=a=>b.deleteQuiz(a).then(_),c=f(!1),E=a=>{g.value&&b.scheduleQuiz(g.value,a).finally(()=>{c.value=!1,g.value=null,_()})},S=(a,o="Published")=>b.publishQuiz(a,o).then(_);return(a,o)=>{const Q=le,M=te,A=ee,L=pe;return n(),d(q,null,{default:s(()=>[l(D,{cols:"12"},{default:s(()=>[l(K,{title:a.$t("Quizzes")},{default:s(()=>[l(W,null,{default:s(()=>[l(q,{align:"end"},{default:s(()=>[l(D,{cols:"12",sm:"2"},{default:s(()=>[l(Q,{modelValue:t(i).itemsPerPage,"onUpdate:modelValue":o[0]||(o[0]=e=>t(i).itemsPerPage=e),label:a.$t("Items Per Page"),items:[10,20,50,100]},null,8,["modelValue","label"])]),_:1}),l(D,{class:"d-flex gap-5"},{default:s(()=>[l(M,{modelValue:t(i).search,"onUpdate:modelValue":o[1]||(o[1]=e=>t(i).search=e),placeholder:a.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),h("div",ce,[l(w,{"prepend-icon":"tabler-plus",to:{name:"quizzes-create"}},{default:s(()=>[k(u(a.$t("New Quiz")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),l(j),l(t(ie),{"items-per-page":t(i).itemsPerPage,"onUpdate:itemsPerPage":o[3]||(o[3]=e=>t(i).itemsPerPage=e),page:t(i).page,"onUpdate:page":o[4]||(o[4]=e=>t(i).page=e),items:t(v),"items-length":t(p),headers:P.map(e=>({...e,title:a.$t(e.title)})),class:"text-no-wrap",loading:t(r),"onUpdate:options":o[5]||(o[5]=e=>i.value=e)},{loading:s(()=>[l(t(X),{class:"pt-2",type:["table-tbody"]})]),"item.title":s(({item:e})=>[k(u(e.title)+" - ("+u(e.duration)+" min) ",1)]),"item.description":s(({item:e})=>[h("div",me,[l(oe,{"max-width":"600",activator:"parent"},{default:s(()=>[k(u(e.description),1)]),_:2},1024),k(" "+u(e.description),1)])]),"item.status":s(({item:e})=>[l(ne,{color:t(T)(e.status).color},{prepend:s(()=>[e.status===t(m).Scheduled?(n(),d(A,{key:0,icon:"mdi-clock-time-five-outline",text:("formatDate"in a?a.formatDate:t(O))(e.schedule_at)},null,8,["text"])):(n(),d(B,{key:1,icon:t(T)(e.status).icon},null,8,["icon"]))]),default:s(()=>[h("span",fe,u(e.status),1),e.status===t(m).Error?(n(),Y("span",ge,u(`#${e.id}`),1)):y("",!0)]),_:2},1032,["color"])]),"item.actions":s(({item:e})=>[l(w,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:s(()=>[l(B,{size:"24",icon:"tabler-dots-vertical"}),l(re,{activator:"parent"},{default:s(()=>[l(ue,null,{default:s(()=>[l(V,{"prepend-icon":"tabler-edit",title:a.$t("Edit")},null,8,["title"]),e.status===t(m).Published?(n(),d(V,{key:0,onClick:C=>S(e.id,"Closed"),"prepend-icon":"material-symbols:close-rounded",title:a.$t("Close")},null,8,["onClick","title"])):y("",!0),e.status===t(m).Published?(n(),d(V,{key:1,onClick:C=>S(e.id,"Private"),"prepend-icon":"material-symbols:private-connectivity-outline",title:a.$t("Private")},null,8,["onClick","title"])):y("",!0),e.status!==t(m).Published?(n(),d(V,{key:2,onClick:C=>S(e.id),"prepend-icon":"material-symbols:publish-rounded",title:a.$t("Publish")},null,8,["onClick","title"])):y("",!0),e.status===t(m).Draft||e.status===t(m).Scheduled?(n(),d(V,{key:3,onClick:C=>(c.value=!0,g.value=e.id),"prepend-icon":"solar:calendar-broken",title:a.$t("Schedule publish")},null,8,["onClick","title"])):y("",!0),l(V,{"prepend-icon":"tabler-trash",title:a.$t("Delete"),onClick:C=>$(e.id)},null,8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[l(j),h("div",ve,[h("p",Ve,u(t(ae)(t(i),t(p))),1),l(de,{"model-value":t(i).page,length:Math.ceil(t(p)/t(i).itemsPerPage),"total-visible":a.$vuetify.display.xs?1:Math.ceil(t(p)/t(i).itemsPerPage),"onUpdate:modelValue":o[2]||(o[2]=e=>i.value={...t(i),page:e})},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),l(L,{onSelect:E,"is-dialog-visible":t(c),"onUpdate:isDialogVisible":o[6]||(o[6]=e=>N(c)?c.value=e:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1})}}});export{Re as default};
