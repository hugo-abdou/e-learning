import{_ as P}from"./CourseChaptersForm.vue_vue_type_script_setup_true_lang-69c9e806.js";import{_ as R}from"./CourseDetailsForm.vue_vue_type_script_setup_true_lang-c75b528d.js";import{V as T}from"./VSlideGroupItem-6541df2e.js";import{d as F,t as S,G as C,aT as U,o,f as _,B as c,i as m,F as E,j as W,w as l,z as L,e as s,y as i,ah as f,D as y,E as k,ak as I,s as H,at as O,au as N,ai as w,as as x,a_ as $}from"./main-d3200a92.js";import{V as q}from"./VSlideGroup-ce305fc4.js";import{u as J}from"./useCourseStore-3c100176.js";import{V as K,a as D}from"./VWindowItem-81ea1840.js";import{V as M}from"./VContainer-73328178.js";import"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-98dad605.js";import"./GalleryView.vue_vue_type_script_setup_true_lang-f9c262fc.js";import"./utils-c92527c4.js";import"./VChip-a6de0ffd.js";import"./VSpacer-92b60b12.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-ea0dc63c.js";import"./VInput-a4774bed.js";import"./VTextField-ff3454b2.js";import"./VCheckbox-ac3ca1e2.js";import"./VCheckboxBtn-1b353d8a.js";import"./lodash-470102d3.js";import"./validators-f52bbb1d.js";import"./VExpansionPanel-9d02d201.js";import"./VForm-a28d883b.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-6b856003.js";import"./VList-66bd46f3.js";import"./ssrBoot-4f9d510a.js";import"./VDivider-4e3adaff.js";import"./VMenu-fe26a8c9.js";import"./VSwitch-d926ecbf.js";const Q=["onClick"],X={key:0,class:"stepper-icon-step text-high-emphasis d-flex align-center gap-2"},Y={class:"stepper-icon"},Z={class:"stepper-title font-weight-medium mb-0"},ee={key:0,class:"stepper-subtitle"},te={class:"text-sm"},se={key:1,class:"d-flex align-center gap-x-2"},oe={class:"d-flex align-center gap-2"},ae={class:"d-flex align-center justify-center",style:{"block-size":"24px","inline-size":"24px"}},ie={key:0,class:"stepper-step-indicator"},re={class:"text-h4 step-number"},ne={style:{"line-height":"0"}},le={class:"text-sm font-weight-medium step-title"},ce={key:0,class:"text-xs step-subtitle"},pe={key:0,class:"stepper-step-line"},ue=F({__name:"AppStepper",props:{items:null,currentStep:{default:0},direction:{default:"horizontal"},iconSize:{default:52},isActiveStepValid:{type:Boolean,default:void 0}},emits:["update:currentStep"],setup(z,{emit:r}){const e=z,n=S(e.currentStep||0),V=C(()=>p=>p<n.value?"stepper-steps-completed":p===n.value?"stepper-steps-active":""),b=C(()=>p=>e.direction==="horizontal"&&e.items.length-1!==p),h=C(()=>e.isActiveStepValid!==void 0);return U(()=>{e.currentStep!==void 0&&e.currentStep<e.items.length&&e.currentStep>=0&&(n.value=e.currentStep),r("update:currentStep",n.value)}),(p,u)=>(o(),_(q,{modelValue:s(n),"onUpdate:modelValue":u[0]||(u[0]=t=>I(n)?n.value=t:null),class:"app-stepper","show-arrows":"",direction:e.direction},{default:c(()=>[(o(!0),m(E,null,W(e.items,(t,a)=>(o(),_(T,{key:t.title,value:a},{default:c(()=>[l("div",{class:L(["cursor-pointer mx-1",[!e.isActiveStepValid&&s(h)&&"stepper-steps-invalid",s(V)(a)]]),onClick:g=>!s(h)&&r("update:currentStep",a)},[t.icon?(o(),m("div",X,[l("div",{class:L(["d-flex align-center gap-4 step-wrapper",[e.direction==="horizontal"&&"flex-column"]])},[l("div",Y,[i(f,{icon:t.icon,size:t.size||e.iconSize},null,8,["icon","size"])]),l("div",null,[l("p",Z,y(t.title),1),t.subtitle?(o(),m("span",ee,[l("span",te,y(t.subtitle),1)])):k("",!0)])],2),s(b)(a)?(o(),_(f,{key:0,class:"flip-in-rtl stepper-chevron-indicator mx-6",size:"24",icon:"tabler-chevron-right"})):k("",!0)])):(o(),m("div",se,[l("div",oe,[l("div",ae,[a>=s(n)?(o(),m(E,{key:0},[!s(h)||e.isActiveStepValid||a!==s(n)?(o(),m("div",ie)):(o(),_(f,{key:1,icon:"tabler-alert-circle",size:"24",color:"error"}))],64)):(o(),_(f,{key:1,icon:"custom-check-circle",class:"stepper-step-icon",size:"24"}))]),l("h4",re,y((a+1).toString().padStart(2,"0")),1)]),l("div",ne,[l("h6",le,y(t.title),1),t.subtitle?(o(),m("span",ce,y(t.subtitle),1)):k("",!0)]),s(b)(a)?(o(),m("div",pe)):k("",!0)]))],10,Q)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","direction"]))}});const de={class:"d-flex justify-space-between mt-8"},me=F({__name:"create",setup(z){const r=S(0);S({});const e=S([{icon:"tabler-clipboard",title:"Details",subtitle:"Enter Coure Details",discription:"Provide data with this form to create your Coure",component:null},{icon:"grommet-icons:chapter-add",title:"Chapters",subtitle:"Add Chapters",discription:"Add Chapters",component:null}]),n=S(),V=async()=>{var u,t;const p=e.value[r.value];try{if(p.title.toLocaleLowerCase()==="details"){const a=await((u=p.component)==null?void 0:u.validate());n.value=await h.createCourse(a)}if(p.title.toLocaleLowerCase()==="chapters"&&n.value){const g=(await((t=p.component)==null?void 0:t.validate())).map((v,j)=>{var B;const A={};return v.attachments.forEach(({id:G})=>{A[G]={type:"media"}}),{...v,video:((B=v.video)==null?void 0:B.id)||null,attachments:A,order:j}}),d=n.value.id;await Promise.all(g.map(v=>h.createChapter(d,v))),b.push({name:"course"})}e.value.length-1>r.value&&r.value++}catch{}},b=H(),h=J();return(p,u)=>{const t=ue,a=R,g=P;return o(),_(M,null,{default:c(()=>[i(O,{align:"center"},{default:c(()=>[i(N,{cols:"12"},{default:c(()=>[i(t,{"current-step":s(r),direction:"horizontal",items:s(e),"icon-size":"22",class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),i(N,{cols:"12"},{default:c(()=>[i(K,{modelValue:s(r),"onUpdate:modelValue":u[0]||(u[0]=d=>I(r)?r.value=d:null),class:"disable-tab-transition stepper-content mt-5"},{default:c(()=>[i(D,null,{default:c(()=>[i(a,{ref:d=>s(e)[0].component=d},null,512)]),_:1}),i(D,null,{default:c(()=>[i(g,{ref:d=>s(e)[1].component=d},null,512)]),_:1})]),_:1},8,["modelValue"]),l("div",de,[i(w,{variant:"plain",color:"secondary",disabled:s(r)===0,onClick:u[1]||(u[1]=d=>r.value--)},{default:c(()=>[i(f,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),x(" Previous ")]),_:1},8,["disabled"]),s(e).length-1===s(r)?(o(),_(w,{key:0,color:"success",onClick:V},{default:c(()=>[x(" submit "),i(f,{icon:"tabler-check",end:"",class:"flip-in-rtl"})]),_:1})):(o(),_(w,{key:1,variant:"plain",onClick:V},{default:c(()=>[x(" Next "),i(f,{icon:"tabler-arrow-right",end:"",class:"flip-in-rtl"})]),_:1}))])]),_:1})]),_:1})]),_:1})}}});typeof $=="function"&&$(me);export{me as default};
