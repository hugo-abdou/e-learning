var Vn=Object.defineProperty;var qn=(t,e,s)=>e in t?Vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ce=(t,e,s)=>(qn(t,typeof e!="symbol"?e+"":e,s),s);import{a as Gs,V as Ar}from"./VRow-712fdf8b.js";import{d as $t,r as Se,dk as Hn,dj as kr,aw as Wn,o as he,c as rt,L as Gn,h as ht,f as W,F as li,j as xr,v as Ur,B as ui,q as se,y as rs,z as di,e as Br,b as z,a4 as Rr,k as Ks,A as Di,eZ as Kn,w as Xs,I as Nr,K as Xn,bb as Js,c5 as Jn,b4 as Qt,bm as Yn,c9 as Qn,bt as Zn,bG as ea,eV as Pe,d$ as Dr,g as ci,bP as Ys,bn as vs,aW as ta,bh as sa,bg as ia,am as ra,cf as na,cg as aa}from"./main-de81c04a.js";import{V as oa}from"./VCheckboxBtn-a8607aa9.js";import{b as la}from"./VInput-b77c619e.js";import{_ as ua}from"./AppTextField.vue_vue_type_script_setup_true_lang-d0874295.js";import{l as _i}from"./lodash-5f4e712f.js";import{p as da}from"./preact.module-7f17e2b0.js";import{V as ca,a as ha,b as Ii,c as pa}from"./VWindowItem-74310388.js";const fa={key:0,class:"pa-5"},ma=$t({__name:"Masonry",props:{items:Array,isLoading:Boolean,grid:Object},emits:["load"],setup(t,{emit:e}){const s=Se(),i=Se(),n=t,r=e,a=async c=>{c[0].isIntersecting&&r("load")},u=c=>{s.value=new IntersectionObserver(a,{rootMargin:"10px"}),r("load"),s.value.observe(c)},h=Se(null);return Hn(()=>{typeof(h==null?void 0:h.value)=="function"&&h.value()}),kr(()=>s.value&&s.value.disconnect()),(c,y)=>{var P;const v=Wn("masonry");return(P=n.items)!=null&&P.length?(he(),rt("div",{key:0,ref_key:"container",ref:i},[Gn((he(),ht(Ar,{class:"me-0 mx-auto","transition-duration":"0.3s","item-selector":".item",ref:O=>h.value=c.$redrawVueMasonry},{default:W(()=>[(he(!0),rt(li,null,xr(n.items,(O,d)=>(he(),ht(Gs,Ur({key:O.id+"_"+d,class:"item pa-2"},t.grid||{cols:12,md:4,sm:6,xl:3}),{default:W(()=>[ui(c.$slots,"default",{item:O,redrawVueMasonry:se(h),index:d},()=>[rs(di(O),1)])]),_:2},1040))),128))]),_:3})),[[v]]),Br("div",{ref:u,class:"d-flex justify-center pa-5"},[t.isLoading?(he(),rt("span",fa,[z(Rr,{icon:"svg-spinners:tadpole"})])):Ks("",!0)])],512)):Ks("",!0)}}}),ga=$t({inheritAttrs:!1,__name:"CustomCheckboxe",props:{selected:{type:Boolean}},setup(t){return(e,s)=>(he(),ht(la,{class:Di(["custom-input custom-checkbox rounded-lg cursor-pointer w-100 h-100 overflow-hidden pa-0",e.selected?"active":""])},{default:W(()=>[Br("div",{class:Di(e.selected?"custom-checkbox-image bg-primary":"custom-checkbox-image")},[ui(e.$slots,"default")],2),z(oa,Ur({"true-icon":"tabler-photo-check"},e.$attrs),null,16)]),_:3},8,["class"]))}});const ya={key:1,class:"w-100",style:{aspectRatio:1}},ba=$t({__name:"GalleryView",props:{selectable:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},variant:{default:"preview"},options:{},grid:{},modelValue:{default:()=>[]},searchPosisions:{},maxNumberSelectableFiles:{default:5},allowedFileTypes:{}},emits:["onDelete","onChange","update:model-value"],setup(t,{expose:e,emit:s}){const i=t,n=s,r=Kn(),a=Se([]),u=Se(!1),h=Se(i.modelValue.map(({id:m})=>m));Xs(h,m=>{n("update:model-value",a.value.filter(({id:w})=>m.includes(w)))});const c=Se(0),y=Se({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0,...i.options}),v=async()=>{var m,w;try{const g=await r.get({...y.value,types:i.allowedFileTypes});return y.value.page=((m=g.meta)==null?void 0:m.current_page)||1,c.value=((w=g.meta)==null?void 0:w.total)||0,Promise.resolve(g.data)}catch{}},P=_i.debounce(async()=>{u.value=!0,a.value.length<c.value&&(y.value.page++,a.value.push(...await v()||[])),u.value=!1},500);Xs(()=>y.value.search,_i.debounce(async()=>{y.value.page=1,a.value=await v()||[]},500));const O=async m=>{confirm("are you sure you want to delete this media")&&(await r.delete(m),a.value=a.value.filter(({id:w})=>w!==m),n("onDelete",m))},d=async()=>{u.value=!0,y.value.page=1;const m=await v()||[];a.value=m,u.value=!1};return Nr(d),kr(()=>{r.$reset()}),e({init:d,loadMore:P}),(m,w)=>{const g=ua,p=ga,B=ma;return he(),rt(li,null,[z(Js,{class:"position-sticky mb-5 pa-2",style:Xn({top:m.searchPosisions||"0px","z-index":10})},{default:W(()=>[z(Ar,null,{default:W(()=>[z(Gs,{style:{"flex-grow":"13"}},{default:W(()=>[z(g,{modelValue:se(y).search,"onUpdate:modelValue":w[0]||(w[0]=E=>se(y).search=E),placeholder:m.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"])]),_:1}),m.$slots.actions?(he(),ht(Gs,{key:0},{default:W(()=>[ui(m.$slots,"actions")]),_:3})):Ks("",!0)]),_:3})]),_:3},8,["style"]),z(B,{grid:m.grid,"is-loading":se(u),items:se(a),onLoad:se(P)},{default:W(({item:E})=>[m.variant==="preview"?(he(),ht(Js,{key:0},{default:W(()=>[z(se(Jn),{onDelete:A=>O(E.id),deletable:"",media:E,preview:""},null,8,["onDelete","media"])]),_:2},1024)):(he(),rt("div",ya,[z(p,{modelValue:se(h),"onUpdate:modelValue":w[1]||(w[1]=A=>Qt(h)?h.value=A:null),disabled:se(h).length>=m.maxNumberSelectableFiles&&!se(h).includes(E.id),selected:se(h).includes(E.id),value:E.id},{default:W(()=>[z(Yn,{src:se(Qn)(E),class:"w-100 h-100 media-card",cover:""},{default:W(()=>[z(Zn,{absolute:"",density:"compact",class:"toolbar-actions"},{default:W(()=>[z(ea,{style:{"inline-size":"95%"},class:"text-white",title:E.name},{default:W(()=>[rs(di(E.name),1)]),_:2},1032,["title"])]),_:2},1024)]),_:2},1032,["src"])]),_:2},1032,["modelValue","disabled","selected","value"])]))]),_:1},8,["grid","is-loading","items","onLoad"])],64)}}});var Qs={exports:{}},nt={};function ws(t){return t<10?`0${t}`:t.toString()}function va(){const t=new Date,e=ws(t.getHours()),s=ws(t.getMinutes()),i=ws(t.getSeconds());return`${e}:${s}:${i}`}var wa=va;Object.defineProperty(nt,"__esModule",{value:!0});nt.justErrorsLogger=nt.debugLogger=void 0;const Zt=wa,Fa={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return console.error(`[Uppy] [${Zt()}]`,...e)}};nt.justErrorsLogger=Fa;const Sa={debug:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return console.debug(`[Uppy] [${Zt()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return console.warn(`[Uppy] [${Zt()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return console.error(`[Uppy] [${Zt()}]`,...e)}};nt.debugLogger=Sa;let Pa="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Oa=(t,e=21)=>(s=e)=>{let i="",n=s;for(;n--;)i+=t[Math.random()*t.length|0];return i},Ea=(t=21)=>{let e="",s=t;for(;s--;)e+=Pa[Math.random()*64|0];return e};var hi={nanoid:Ea,customAlphabet:Oa},Ge={},Ta=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var s=e<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s&&(e=-e),e<1)return(s?"-":"")+e+" B";var n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),i.length-1);e=Number(e/Math.pow(1024,n));var r=i[n];return e>=10||e%1===0?(s?"-":"")+e.toFixed(0)+" "+r:(s?"-":"")+e.toFixed(1)+" "+r};function _r(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}_r.prototype.match=function(t){var e=!0,s=this.parts,i,n=s.length,r;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(r=(t||"").split(this.separator),i=0;e&&i<n;i++)s[i]!=="*"&&(i<r.length?e=s[i]===r[i]:e=!1);e=e&&r}else if(typeof t.splice=="function")for(e=[],i=t.length;i--;)this.match(t[i])&&(e[e.length]=t[i]);else if(typeof t=="object"){e={};for(var a in t)this.match(a)&&(e[a]=t[a])}return e};var Ca=function(t,e,s){var i=new _r(t,s||/[\/\.]/);return typeof e<"u"?i.match(e):i},Aa=Ca,ka=/[\/\+\.]/,xa=function(t,e){function s(i){var n=Aa(i,t,ka);return n&&n.length>=2}return e?s(e.split(";")[0]):s};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.defaultOptions=Ge.RestrictionError=Ge.Restricter=void 0;const Fs=Ta,Ua=xa,Ba={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};Ge.defaultOptions=Ba;class qe extends Error{constructor(){super(...arguments),this.isRestriction=!0}}Ge.RestrictionError=qe;typeof AggregateError>"u"&&(globalThis.AggregateError=class extends Error{constructor(e,s){super(s),this.errors=e}});class Ra{constructor(e,s){this.i18n=s,this.getOpts=()=>{const i=e();if(i.restrictions.allowedFileTypes!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validate(e,s){const{maxFileSize:i,minFileSize:n,maxTotalFileSize:r,maxNumberOfFiles:a,allowedFileTypes:u}=this.getOpts().restrictions;if(a&&s.filter(c=>!c.isGhost).length+1>a)throw new qe(`${this.i18n("youCanOnlyUploadX",{smart_count:a})}`);if(u&&!u.some(c=>c.includes("/")?e.type?Ua(e.type.replace(/;.*?$/,""),c):!1:c[0]==="."&&e.extension?e.extension.toLowerCase()===c.slice(1).toLowerCase():!1)){const c=u.join(", ");throw new qe(this.i18n("youCanOnlyUploadFileTypes",{types:c}))}if(r&&e.size!=null&&s.reduce((c,y)=>c+y.size,e.size)>r)throw new qe(this.i18n("exceedsSize",{size:Fs(r),file:e.name}));if(i&&e.size!=null&&e.size>i)throw new qe(this.i18n("exceedsSize",{size:Fs(i),file:e.name}));if(n&&e.size!=null&&e.size<n)throw new qe(this.i18n("inferiorSize",{size:Fs(n)}))}validateMinNumberOfFiles(e){const{minNumberOfFiles:s}=this.getOpts().restrictions;if(Object.keys(e).length<s)throw new qe(this.i18n("youHaveToAtLeastSelectX",{smart_count:s}))}getMissingRequiredMetaFields(e){const s=new qe(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),{requiredMetaFields:i}=this.getOpts().restrictions,n=Object.prototype.hasOwnProperty,r=[];for(const a of i)(!n.call(e.meta,a)||e.meta[a]==="")&&r.push(a);return{missingFields:r,error:s}}}Ge.Restricter=Ra;function Na(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Da=Na;function Mi(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var _a=0;function Ia(t){return"__private_"+_a+++"_"+t}const Ma=Da;function $a(t,e,s){const i=[];return t.forEach(n=>typeof n!="string"?i.push(n):e[Symbol.split](n).forEach((r,a,u)=>{r!==""&&i.push(r),a<u.length-1&&i.push(s)})),i}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param {string} phrase that needs interpolation, with placeholders
 * @param {object} options with values that will be used to replace placeholders
 * @returns {any[]} interpolated
 */function $i(t,e){const s=/\$/g,i="$$$$";let n=[t];if(e==null)return n;for(const r of Object.keys(e))if(r!=="_"){let a=e[r];typeof a=="string"&&(a=s[Symbol.replace](a,i)),n=$a(n,new RegExp(`%\\{${r}\\}`,"g"),a)}return n}var Pt=Ia("apply");let La=class{constructor(e){Object.defineProperty(this,Pt,{value:za}),this.locale={strings:{},pluralize(s){return s===1?0:1}},Array.isArray(e)?e.forEach(Mi(this,Pt)[Pt],this):Mi(this,Pt)[Pt](e)}translate(e,s){return this.translateArray(e,s).join("")}translateArray(e,s){if(!Ma(this.locale.strings,e))throw new Error(`missing string: ${e}`);const i=this.locale.strings[e];if(typeof i=="object"){if(s&&typeof s.smart_count<"u"){const r=this.locale.pluralize(s.smart_count);return $i(i[r],s)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return $i(i,s)}};function za(t){if(!(t!=null&&t.strings))return;const e=this.locale;this.locale={...e,strings:{...e.strings,...t.strings}},this.locale.pluralize=t.pluralize||e.pluralize}var Ir=La,ja=function(){var e={},s=e._fns={};e.emit=function(a,u,h,c,y,v,P){var O=i(a);O.length&&n(a,O,[u,h,c,y,v,P])},e.on=function(a,u){s[a]||(s[a]=[]),s[a].push(u)},e.once=function(a,u){function h(){u.apply(this,arguments),e.off(a,h)}this.on(a,h)},e.off=function(a,u){var h=[];if(a&&u){var c=this._fns[a],y=0,v=c?c.length:0;for(y;y<v;y++)c[y]!==u&&h.push(c[y])}h.length?this._fns[a]=h:delete this._fns[a]};function i(r){var a=s[r]?s[r]:[],u=r.indexOf(":"),h=u===-1?[r]:[r.substring(0,u),r.substring(u+1)],c=Object.keys(s),y=0,v=c.length;for(y;y<v;y++){var P=c[y];if(P==="*"&&(a=a.concat(s[P])),h.length===2&&h[0]===P){a=a.concat(s[P]);break}}return a}function n(r,a,u){var h=0,c=a.length;for(h;h<c&&a[h];h++)a[h].event=r,a[h].apply(a[h],u)}return e},Mr="Expected a function",Li=0/0,Va="[object Symbol]",qa=/^\s+|\s+$/g,Ha=/^[-+]0x[0-9a-f]+$/i,Wa=/^0b[01]+$/i,Ga=/^0o[0-7]+$/i,Ka=parseInt,Xa=typeof Pe=="object"&&Pe&&Pe.Object===Object&&Pe,Ja=typeof self=="object"&&self&&self.Object===Object&&self,Ya=Xa||Ja||Function("return this")(),Qa=Object.prototype,Za=Qa.toString,eo=Math.max,to=Math.min,Ss=function(){return Ya.Date.now()};function so(t,e,s){var i,n,r,a,u,h,c=0,y=!1,v=!1,P=!0;if(typeof t!="function")throw new TypeError(Mr);e=zi(e)||0,ns(s)&&(y=!!s.leading,v="maxWait"in s,r=v?eo(zi(s.maxWait)||0,e):r,P="trailing"in s?!!s.trailing:P);function O(C){var U=i,D=n;return i=n=void 0,c=C,a=t.apply(D,U),a}function d(C){return c=C,u=setTimeout(g,e),y?O(C):a}function m(C){var U=C-h,D=C-c,M=e-U;return v?to(M,r-D):M}function w(C){var U=C-h,D=C-c;return h===void 0||U>=e||U<0||v&&D>=r}function g(){var C=Ss();if(w(C))return p(C);u=setTimeout(g,m(C))}function p(C){return u=void 0,P&&i?O(C):(i=n=void 0,a)}function B(){u!==void 0&&clearTimeout(u),c=0,i=h=n=u=void 0}function E(){return u===void 0?a:p(Ss())}function A(){var C=Ss(),U=w(C);if(i=arguments,n=this,h=C,U){if(u===void 0)return d(h);if(v)return u=setTimeout(g,e),O(h)}return u===void 0&&(u=setTimeout(g,e)),a}return A.cancel=B,A.flush=E,A}function io(t,e,s){var i=!0,n=!0;if(typeof t!="function")throw new TypeError(Mr);return ns(s)&&(i="leading"in s?!!s.leading:i,n="trailing"in s?!!s.trailing:n),so(t,e,{leading:i,maxWait:e,trailing:n})}function ns(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ro(t){return!!t&&typeof t=="object"}function no(t){return typeof t=="symbol"||ro(t)&&Za.call(t)==Va}function zi(t){if(typeof t=="number")return t;if(no(t))return Li;if(ns(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ns(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(qa,"");var s=Wa.test(t);return s||Ga.test(t)?Ka(t.slice(2),s?2:8):Ha.test(t)?Li:+t}var $r=io;function ao(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var oo=0;function lo(t){return"__private_"+oo+++"_"+t}const uo={version:"2.1.1"};var Ps=lo("publish");let Lr=class{constructor(){Object.defineProperty(this,Ps,{value:co}),this.state={},this.callbacks=[]}getState(){return this.state}setState(e){const s={...this.state},i={...this.state,...e};this.state=i,ao(this,Ps)[Ps](s,i,e)}subscribe(e){return this.callbacks.push(e),()=>{this.callbacks.splice(this.callbacks.indexOf(e),1)}}};function co(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.callbacks.forEach(i=>{i(...e)})}Lr.VERSION=uo.version;function ho(){return new Lr}var po=ho;function fo(t){const e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}var zr=fo,mo={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};const go=zr,ji=mo;function yo(t){var e;if(t.type)return t.type;const s=t.name?(e=go(t.name).extension)==null?void 0:e.toLowerCase():null;return s&&s in ji?ji[s]:"application/octet-stream"}var bo=yo;function vo(t){return t.charCodeAt(0).toString(32)}function Vi(t){let e="";return t.replace(/[^A-Z0-9]/ig,s=>(e+=`-${vo(s)}`,"/"))+e}function wo(t){let e="uppy";return typeof t.name=="string"&&(e+=`-${Vi(t.name.toLowerCase())}`),t.type!==void 0&&(e+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(e+=`-${Vi(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(e+=`-${t.data.size}`),t.data.lastModified!==void 0&&(e+=`-${t.data.lastModified}`),e}var Fo=wo;function So(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;const e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;const s=e[1];let[i,n]=s.split(".");return i=parseInt(i,10),n=parseInt(n,10),i<15||i===15&&n<15063||i>18||i===18&&n>=18218}var Po=So;function Oo(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}var Eo=Oo,To={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}},Co=hi,qi=nt,ct=Ge;let jr,Vr;function x(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Ao=0;function ee(t){return"__private_"+Ao+++"_"+t}const ko=Ir,xo=ja,Uo=$r,Bo=po,Ro=bo,No=zr,Do=Fo,_o=Po,Io=Eo,Mo={version:"2.3.4"},$o=To;var re=ee("plugins"),we=ee("restricter"),Ot=ee("storeUnsubscribe"),Re=ee("emitter"),tt=ee("preProcessors"),st=ee("uploaders"),$e=ee("postProcessors"),pe=ee("informAndEmit"),It=ee("checkRequiredMetaFieldsOnFile"),Os=ee("checkRequiredMetaFields"),Et=ee("assertNewUploadAllowed"),Tt=ee("checkAndCreateFileStateObject"),Ct=ee("startIfAutoProceed"),Es=ee("addListeners"),Fe=ee("updateOnlineStatus"),Ne=ee("createUpload"),Ts=ee("getUpload"),it=ee("removeUpload"),De=ee("runUpload");jr=Symbol.for("uppy test: getPlugins");Vr=Symbol.for("uppy test: createUpload");let qr=class{constructor(e){Object.defineProperty(this,De,{value:Jo}),Object.defineProperty(this,it,{value:Xo}),Object.defineProperty(this,Ts,{value:Ko}),Object.defineProperty(this,Ne,{value:Go}),Object.defineProperty(this,Es,{value:Wo}),Object.defineProperty(this,Ct,{value:Ho}),Object.defineProperty(this,Tt,{value:qo}),Object.defineProperty(this,Et,{value:Vo}),Object.defineProperty(this,Os,{value:jo}),Object.defineProperty(this,It,{value:zo}),Object.defineProperty(this,pe,{value:Lo}),Object.defineProperty(this,re,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,we,{writable:!0,value:void 0}),Object.defineProperty(this,Ot,{writable:!0,value:void 0}),Object.defineProperty(this,Re,{writable:!0,value:xo()}),Object.defineProperty(this,tt,{writable:!0,value:new Set}),Object.defineProperty(this,st,{writable:!0,value:new Set}),Object.defineProperty(this,$e,{writable:!0,value:new Set}),Object.defineProperty(this,Fe,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=$o;const s={id:"uppy",autoProceed:!1,allowMultipleUploads:!0,allowMultipleUploadBatches:!0,debug:!1,restrictions:ct.defaultOptions,meta:{},onBeforeFileAdded:i=>i,onBeforeUpload:i=>i,store:Bo(),logger:qi.justErrorsLogger,infoTimeout:5e3};this.opts={...s,...e,restrictions:{...s.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=qi.debugLogger),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.calculateProgress=Uo(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:_o(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),x(this,we)[we]=new ct.Restricter(()=>this.opts,this.i18n),x(this,Ot)[Ot]=this.store.subscribe((i,n,r)=>{this.emit("state-update",i,n,r),this.updateAll(n)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),x(this,Es)[Es]()}emit(e){for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];x(this,Re)[Re].emit(e,...i)}on(e,s){return x(this,Re)[Re].on(e,s),this}once(e,s){return x(this,Re)[Re].once(e,s),this}off(e,s){return x(this,Re)[Re].off(e,s),this}updateAll(e){this.iteratePlugins(s=>{s.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}get state(){return this.getState()}setFileState(e,s){if(!this.getState().files[e])throw new Error(`Canâ€™t set state for ${e} (the file could have been removed)`);this.setState({files:{...this.getState().files,[e]:{...this.getState().files[e],...s}}})}i18nInit(){const e=new ko([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e&&e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(s=>{s.setOptions()}),this.setState()}resetProgress(){const e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},s={...this.getState().files},i={};Object.keys(s).forEach(n=>{const r={...s[n]};r.progress={...r.progress,...e},i[n]=r}),this.setState({files:i,totalProgress:0}),this.emit("reset-progress")}addPreProcessor(e){x(this,tt)[tt].add(e)}removePreProcessor(e){return x(this,tt)[tt].delete(e)}addPostProcessor(e){x(this,$e)[$e].add(e)}removePostProcessor(e){return x(this,$e)[$e].delete(e)}addUploader(e){x(this,st)[st].add(e)}removeUploader(e){return x(this,st)[st].delete(e)}setMeta(e){const s={...this.getState().meta,...e},i={...this.getState().files};Object.keys(i).forEach(n=>{i[n]={...i[n],meta:{...i[n].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:s,files:i})}setFileMeta(e,s){const i={...this.getState().files};if(!i[e]){this.log("Was trying to set metadata for a file that has been removed: ",e);return}const n={...i[e].meta,...s};i[e]={...i[e],meta:n},this.setState({files:i})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getObjectOfFilesPerState(){const{files:e,totalProgress:s,error:i}=this.getState(),n=Object.values(e),r=n.filter(d=>{let{progress:m}=d;return!m.uploadComplete&&m.uploadStarted}),a=n.filter(d=>!d.progress.uploadStarted),u=n.filter(d=>d.progress.uploadStarted||d.progress.preprocess||d.progress.postprocess),h=n.filter(d=>d.progress.uploadStarted),c=n.filter(d=>d.isPaused),y=n.filter(d=>d.progress.uploadComplete),v=n.filter(d=>d.error),P=r.filter(d=>!d.isPaused),O=n.filter(d=>d.progress.preprocess||d.progress.postprocess);return{newFiles:a,startedFiles:u,uploadStartedFiles:h,pausedFiles:c,completeFiles:y,erroredFiles:v,inProgressFiles:r,inProgressNotPausedFiles:P,processingFiles:O,isUploadStarted:h.length>0,isAllComplete:s===100&&y.length===n.length&&O.length===0,isAllErrored:!!i&&v.length===n.length,isAllPaused:r.length!==0&&c.length===r.length,isUploadInProgress:r.length>0,isSomeGhost:n.some(d=>d.isGhost)}}validateRestrictions(e,s){s===void 0&&(s=this.getFiles());try{return x(this,we)[we].validate(e,s),{result:!0}}catch(i){return{result:!1,reason:i.message}}}checkIfFileAlreadyExists(e){const{files:s}=this.getState();return!!(s[e]&&!s[e].isGhost)}addFile(e){x(this,Et)[Et](e);const{files:s}=this.getState();let i=x(this,Tt)[Tt](s,e);return s[i.id]&&s[i.id].isGhost&&(i={...s[i.id],data:e.data,isGhost:!1},this.log(`Replaced the blob in the restored ghost file: ${i.name}, ${i.id}`)),this.setState({files:{...s,[i.id]:i}}),this.emit("file-added",i),this.emit("files-added",[i]),this.log(`Added file: ${i.name}, ${i.id}, mime type: ${i.type}`),x(this,Ct)[Ct](),i.id}addFiles(e){x(this,Et)[Et]();const s={...this.getState().files},i=[],n=[];for(let r=0;r<e.length;r++)try{let a=x(this,Tt)[Tt](s,e[r]);s[a.id]&&s[a.id].isGhost&&(a={...s[a.id],data:e[r].data,isGhost:!1},this.log(`Replaced blob in a ghost file: ${a.name}, ${a.id}`)),s[a.id]=a,i.push(a)}catch(a){a.isRestriction||n.push(a)}if(this.setState({files:s}),i.forEach(r=>{this.emit("file-added",r)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.keys(i).forEach(r=>{this.log(`Added file: ${i[r].name}
 id: ${i[r].id}
 type: ${i[r].type}`)}),i.length>0&&x(this,Ct)[Ct](),n.length>0){let r=`Multiple errors occurred while adding files:
`;if(n.forEach(a=>{r+=`
 * ${a.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:n.length}),details:r},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(n,r);{const a=new Error(r);throw a.errors=n,a}}}removeFiles(e,s){const{files:i,currentUploads:n}=this.getState(),r={...i},a={...n},u=Object.create(null);e.forEach(v=>{i[v]&&(u[v]=i[v],delete r[v])});function h(v){return u[v]===void 0}Object.keys(a).forEach(v=>{const P=n[v].fileIDs.filter(h);if(P.length===0){delete a[v];return}const{capabilities:O}=this.getState();if(P.length!==n[v].fileIDs.length&&!O.individualCancellation)throw new Error("individualCancellation is disabled");a[v]={...n[v],fileIDs:P}});const c={currentUploads:a,files:r};Object.keys(r).length===0&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),this.calculateTotalProgress();const y=Object.keys(u);y.forEach(v=>{this.emit("file-removed",u[v],s)}),y.length>5?this.log(`Removed ${y.length} files`):this.log(`Removed files: ${y.join(", ")}`)}removeFile(e,s){s===void 0&&(s=null),this.removeFiles([e],s)}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).uploadComplete)return;const i=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:i}),this.emit("upload-pause",e,i),i}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const n={...e[i],isPaused:!0};e[i]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(i=>!e[i].progress.uploadComplete&&e[i].progress.uploadStarted).forEach(i=>{const n={...e[i],isPaused:!1,error:null};e[i]=n}),this.setState({files:e}),this.emit("resume-all")}retryAll(){const e={...this.getState().files},s=Object.keys(e).filter(n=>e[n].error);if(s.forEach(n=>{const r={...e[n],isPaused:!1,error:null};e[n]=r}),this.setState({files:e,error:null}),this.emit("retry-all",s),s.length===0)return Promise.resolve({successful:[],failed:[]});const i=x(this,Ne)[Ne](s,{forceAllowNewUpload:!0});return x(this,De)[De](i)}cancelAll(e){let{reason:s="user"}=e===void 0?{}:e;if(this.emit("cancel-all",{reason:s}),s==="user"){const{files:i}=this.getState(),n=Object.keys(i);n.length&&this.removeFiles(n,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);const s=x(this,Ne)[Ne]([e],{forceAllowNewUpload:!0});return x(this,De)[De](s)}reset(){this.cancelAll(...arguments)}logout(){this.iteratePlugins(e=>{e.provider&&e.provider.logout&&e.provider.logout()})}calculateProgress(e,s){if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}const i=Number.isFinite(s.bytesTotal)&&s.bytesTotal>0;this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,bytesUploaded:s.bytesUploaded,bytesTotal:s.bytesTotal,percentage:i?Math.round(s.bytesUploaded/s.bytesTotal*100):0}}),this.calculateTotalProgress()}calculateTotalProgress(){const s=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(s.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const i=s.filter(c=>c.progress.bytesTotal!=null),n=s.filter(c=>c.progress.bytesTotal==null);if(i.length===0){const c=s.length*100,y=n.reduce((P,O)=>P+O.progress.percentage,0),v=Math.round(y/c*100);this.setState({totalProgress:v});return}let r=i.reduce((c,y)=>c+y.progress.bytesTotal,0);const a=r/i.length;r+=a*n.length;let u=0;i.forEach(c=>{u+=c.progress.bytesUploaded}),n.forEach(c=>{u+=a*(c.progress.percentage||0)/100});let h=r===0?0:Math.round(u/r*100);h>100&&(h=100),this.setState({totalProgress:h}),this.emit("progress",h)}updateOnlineStatus(){(typeof window.navigator.onLine<"u"?window.navigator.onLine:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e,s){if(typeof e!="function"){const a=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(a)}const i=new e(this,s),n=i.id;if(!n)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");const r=this.getPlugin(n);if(r){const a=`Already found a plugin named '${r.id}'. Tried to use: '${n}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(a)}return e.VERSION&&this.log(`Using ${n} v${e.VERSION}`),i.type in x(this,re)[re]?x(this,re)[re][i.type].push(i):x(this,re)[re][i.type]=[i],i.install(),this}getPlugin(e){for(const s of Object.values(x(this,re)[re])){const i=s.find(n=>n.id===e);if(i!=null)return i}}[jr](e){return x(this,re)[re][e]}iteratePlugins(e){Object.values(x(this,re)[re]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const s=x(this,re)[re][e.type],i=s.findIndex(a=>a.id===e.id);i!==-1&&s.splice(i,1);const r={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(r)}close(e){let{reason:s}=e===void 0?{}:e;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:s}),x(this,Ot)[Ot](),this.iteratePlugins(i=>{this.removePlugin(i)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",x(this,Fe)[Fe]),window.removeEventListener("offline",x(this,Fe)[Fe]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,s,i){s===void 0&&(s="info"),i===void 0&&(i=3e3);const n=typeof e=="object";this.setState({info:[...this.getState().info,{type:s,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(e,s){const{logger:i}=this.opts;switch(s){case"error":i.error(e);break;case"warning":i.warn(e);break;default:i.debug(e);break}}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?x(this,De)[De](e):(x(this,it)[it](e),Promise.reject(new Error("Nonexistent upload")))}[Vr](){return x(this,Ne)[Ne](...arguments)}addResultData(e,s){if(!x(this,Ts)[Ts](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:i}=this.getState(),n={...i[e],result:{...i[e].result,...s}};this.setState({currentUploads:{...i,[e]:n}})}upload(){var e;(e=x(this,re)[re].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:s}=this.getState();const i=this.opts.onBeforeUpload(s);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(s=i,this.setState({files:s})),Promise.resolve().then(()=>x(this,we)[we].validateMinNumberOfFiles(s)).catch(n=>{throw x(this,pe)[pe](n),n}).then(()=>{if(!x(this,Os)[Os](s))throw new ct.RestrictionError(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(()=>{const{currentUploads:n}=this.getState(),r=Object.values(n).flatMap(h=>h.fileIDs),a=[];Object.keys(s).forEach(h=>{const c=this.getFile(h);!c.progress.uploadStarted&&r.indexOf(h)===-1&&a.push(c.id)});const u=x(this,Ne)[Ne](a);return x(this,De)[De](u)}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}};function Lo(t,e){const{message:s,details:i=""}=t;t.isRestriction?this.emit("restriction-failed",e,t):this.emit("error",t),this.info({message:s,details:i},"error",this.opts.infoTimeout),this.log(`${s} ${i}`.trim(),"error")}function zo(t){const{missingFields:e,error:s}=x(this,we)[we].getMissingRequiredMetaFields(t);return e.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:e}),this.log(s.message),this.emit("restriction-failed",t,s),!1):!0}function jo(t){let e=!0;for(const s of Object.values(t))x(this,It)[It](s)||(e=!1);return e}function Vo(t){const{allowNewUpload:e}=this.getState();if(e===!1){const s=new ct.RestrictionError(this.i18n("noMoreFilesAllowed"));throw x(this,pe)[pe](s,t),s}}function qo(t,e){const s=Ro(e),i=Io(s,e),n=No(i).extension,r=!!e.isRemote,a=Do({...e,type:s});if(this.checkIfFileAlreadyExists(a)){const v=new ct.RestrictionError(this.i18n("noDuplicates",{fileName:i}));throw x(this,pe)[pe](v,e),v}const u=e.meta||{};u.name=i,u.type=s;const h=Number.isFinite(e.data.size)?e.data.size:null;let c={source:e.source||"",id:a,name:i,extension:n||"",meta:{...this.getState().meta,...u},type:s,data:e.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:h,uploadComplete:!1,uploadStarted:null},size:h,isRemote:r,remote:e.remote||"",preview:e.preview};const y=this.opts.onBeforeFileAdded(c,t);if(y===!1){const v=new ct.RestrictionError("Cannot add the file because onBeforeFileAdded returned false.");throw this.emit("restriction-failed",e,v),v}else typeof y=="object"&&y!==null&&(c=y);try{const v=Object.keys(t).map(P=>t[P]);x(this,we)[we].validate(c,v)}catch(v){throw x(this,pe)[pe](v,c),v}return c}function Ho(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))}function Wo(){const t=(e,s,i)=>{let n=e.message||"Unknown error";e.details&&(n+=` ${e.details}`),this.setState({error:n}),s!=null&&s.id in this.getState().files&&this.setFileState(s.id,{error:n,response:i})};this.on("error",t),this.on("upload-error",(e,s,i)=>{if(t(s,e,i),typeof s=="object"&&s.message){const n=new Error(s.message);n.details=s.message,s.details&&(n.details+=` ${s.details}`),n.message=this.i18n("failedToUpload",{file:e==null?void 0:e.name}),x(this,pe)[pe](n)}else x(this,pe)[pe](s)}),this.on("upload",()=>{this.setState({error:null})}),this.on("upload-started",e=>{if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}this.setFileState(e.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:e.size}})}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(e,s)=>{if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}const i=this.getFile(e.id).progress;this.setFileState(e.id,{progress:{...i,postprocess:x(this,$e)[$e].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:i.bytesTotal},response:s,uploadURL:s.uploadURL,isPaused:!1}),e.size==null&&this.setFileState(e.id,{size:s.bytesUploaded||i.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(e,s)=>{if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}this.setFileState(e.id,{progress:{...this.getFile(e.id).progress,preprocess:s}})}),this.on("preprocess-complete",e=>{if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}const s={...this.getState().files};s[e.id]={...s[e.id],progress:{...s[e.id].progress}},delete s[e.id].progress.preprocess,this.setState({files:s})}),this.on("postprocess-progress",(e,s)=>{if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}this.setFileState(e.id,{progress:{...this.getState().files[e.id].progress,postprocess:s}})}),this.on("postprocess-complete",e=>{if(e==null||!this.getFile(e.id)){this.log(`Not setting progress for a file that has been removed: ${e==null?void 0:e.id}`);return}const s={...this.getState().files};s[e.id]={...s[e.id],progress:{...s[e.id].progress}},delete s[e.id].progress.postprocess,this.setState({files:s})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",e=>{e&&x(this,It)[It](e)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",x(this,Fe)[Fe]),window.addEventListener("offline",x(this,Fe)[Fe]),setTimeout(x(this,Fe)[Fe],3e3))}function Go(t,e){e===void 0&&(e={});const{forceAllowNewUpload:s=!1}=e,{allowNewUpload:i,currentUploads:n}=this.getState();if(!i&&!s)throw new Error("Cannot create a new upload: already uploading.");const r=(0,Co.nanoid)();return this.emit("upload",{id:r,fileIDs:t}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[r]:{fileIDs:t,step:0,result:{}}}}),r}function Ko(t){const{currentUploads:e}=this.getState();return e[t]}function Xo(t){const e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function Jo(t){let{currentUploads:e}=this.getState(),s=e[t];const i=s.step||0,n=[...x(this,tt)[tt],...x(this,st)[st],...x(this,$e)[$e]];try{for(let a=i;a<n.length&&s;a++){const u=n[a],h={...s,step:a};this.setState({currentUploads:{...e,[t]:h}}),await u(h.fileIDs,t),e=this.getState().currentUploads,s=e[t]}}catch(a){throw x(this,it)[it](t),a}if(s){s.fileIDs.forEach(c=>{const y=this.getFile(c);y&&y.progress.postprocess&&this.emit("postprocess-complete",y)});const a=s.fileIDs.map(c=>this.getFile(c)),u=a.filter(c=>!c.error),h=a.filter(c=>c.error);await this.addResultData(t,{successful:u,failed:h,uploadID:t}),e=this.getState().currentUploads,s=e[t]}let r;return s&&(r=s.result,this.emit("complete",r),x(this,it)[it](t)),r==null&&this.log(`Not setting result for an upload that has been removed: ${t}`),r}qr.VERSION=Mo.version;var Hi=qr;const j=Dr(da);function Yo(t){return(t==null?void 0:t.nodeType)===Node.ELEMENT_NODE}var Hr=Yo;const Qo=Hr;function Zo(t,e){return e===void 0&&(e=document),typeof t=="string"?e.querySelector(t):Qo(t)?t:null}var el=Zo;function tl(t){for(var e;t&&!t.dir;)t=t.parentNode;return(e=t)==null?void 0:e.dir}var Wr=tl;const sl=Ir;let il=class{constructor(e,s){s===void 0&&(s={}),this.uppy=e,this.opts=s}getPluginState(){const{plugins:e}=this.uppy.getState();return e[this.id]||{}}setPluginState(e){const{plugins:s}=this.uppy.getState();this.uppy.setState({plugins:{...s,[this.id]:{...s[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(),this.i18nInit()}i18nInit(){const e=new sl([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}};var Zs=il,Wi=j;function Gi(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var rl=0;function nl(t){return"__private_"+rl+++"_"+t}const al=el,ol=Wr,ll=Zs;function ul(t){let e=null,s=null;return function(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return s=n,e||(e=Promise.resolve().then(()=>(e=null,t(...s)))),e}}var At=nl("updateUI");class pi extends ll{constructor(){super(...arguments),Object.defineProperty(this,At,{writable:!0,value:void 0})}mount(e,s){const i=s.id,n=al(e);if(n){this.isTargetDOMEl=!0;const u=document.createElement("div");return u.classList.add("uppy-Root"),Gi(this,At)[At]=ul(h=>{this.uppy.getPlugin(this.id)&&((0,Wi.render)(this.render(h),u),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),(0,Wi.render)(this.render(this.uppy.getState()),u),this.el=u,n.appendChild(u),u.dir=this.opts.direction||ol(u)||"ltr",this.onMount(),this.el}let r;if(typeof e=="object"&&e instanceof pi)r=e;else if(typeof e=="function"){const u=e;this.uppy.iteratePlugins(h=>{h instanceof u&&(r=h)})}if(r)return this.uppy.log(`Installing ${i} to ${r.id}`),this.parent=r,this.el=r.addTarget(s),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let a=`Invalid target option given to ${i}.`;throw typeof e=="function"?a+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":a+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(a)}update(e){if(this.el!=null){var s,i;(s=(i=Gi(this,At))[At])==null||s.call(i,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}var Ki=pi;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Uppy=e.UIPlugin=e.BasePlugin=void 0,Object.defineProperty(e,"debugLogger",{enumerable:!0,get:function(){return s.debugLogger}});var s=nt;t.exports=Hi;const i=Ki;e.UIPlugin=i;const n=Zs;e.BasePlugin=n;const r=Hi;e.Uppy=r;const a=Ki,u=Zs;r.Uppy=r,r.UIPlugin=a,r.BasePlugin=u,r.debugLogger=s.debugLogger})(Qs,Qs.exports);var ft=Qs.exports;const dl=ci(ft);var Gr={exports:{}};(function(t){(function(){var e=function(s){if(!(this instanceof e))return new e(s);if(this.version=1,this.support=typeof File<"u"&&typeof Blob<"u"&&typeof FileList<"u"&&(!!Blob.prototype.webkitSlice||!!Blob.prototype.mozSlice||!!Blob.prototype.slice||!1),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",chunkNumberParameterName:"resumableChunkNumber",chunkSizeParameterName:"resumableChunkSize",currentChunkSizeParameterName:"resumableCurrentChunkSize",totalSizeParameterName:"resumableTotalSize",typeParameterName:"resumableType",identifierParameterName:"resumableIdentifier",fileNameParameterName:"resumableFilename",relativePathParameterName:"resumableRelativePath",totalChunksParameterName:"resumableTotalChunks",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",testTarget:null,parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:100,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,clearInput:!0,chunkFormat:"blob",setChunkTypeFromFile:!1,maxFilesErrorCallback:function(d,m){var w=i.getOpt("maxFiles");alert("Please upload no more than "+w+" file"+(w===1?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(d,m){alert(d.fileName||d.name+" is too small, please upload files larger than "+n.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(d,m){alert(d.fileName||d.name+" is too large, please upload files less than "+n.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(d,m){alert(d.fileName||d.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=s||{},i.getOpt=function(d){var m=this;if(d instanceof Array){var w={};return n.each(d,function(g){w[g]=m.getOpt(g)}),w}if(m instanceof O){if(typeof m.opts[d]<"u")return m.opts[d];m=m.fileObj}if(m instanceof P){if(typeof m.opts[d]<"u")return m.opts[d];m=m.resumableObj}if(m instanceof e)return typeof m.opts[d]<"u"?m.opts[d]:m.defaults[d]},i.events=[],i.on=function(d,m){i.events.push(d.toLowerCase(),m)},i.fire=function(){for(var d=[],m=0;m<arguments.length;m++)d.push(arguments[m]);for(var w=d[0].toLowerCase(),m=0;m<=i.events.length;m+=2)i.events[m]==w&&i.events[m+1].apply(i,d.slice(1)),i.events[m]=="catchall"&&i.events[m+1].apply(null,d);w=="fileerror"&&i.fire("error",d[2],d[1]),w=="fileprogress"&&i.fire("progress")};var n={stopEvent:function(d){d.stopPropagation(),d.preventDefault()},each:function(d,m){if(typeof d.length<"u"){for(var w=0;w<d.length;w++)if(m(d[w])===!1)return}else for(w in d)if(m(w,d[w])===!1)return},generateUniqueIdentifier:function(d,m){var w=i.getOpt("generateUniqueIdentifier");if(typeof w=="function")return w(d,m);var g=d.webkitRelativePath||d.fileName||d.name,p=d.size;return p+"-"+g.replace(/[^0-9a-zA-Z_-]/img,"")},contains:function(d,m){var w=!1;return n.each(d,function(g){return g==m?(w=!0,!1):!0}),w},formatSize:function(d){return d<1024?d+" bytes":d<1024*1024?(d/1024).toFixed(0)+" KB":d<1024*1024*1024?(d/1024/1024).toFixed(1)+" MB":(d/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(d,m){var w=i.getOpt("target");if(d==="test"&&i.getOpt("testTarget")&&(w=i.getOpt("testTarget")==="/"?i.getOpt("target"):i.getOpt("testTarget")),typeof w=="function")return w(m);var g=w.indexOf("?")<0?"?":"&",p=m.join("&");return w+g+p}},r=function(d){n.stopEvent(d),d.dataTransfer&&d.dataTransfer.items?y(d.dataTransfer.items,d):d.dataTransfer&&d.dataTransfer.files&&y(d.dataTransfer.files,d)},a=function(d){d.preventDefault()};function u(d,m,w,g){var p;if(d.isFile)return d.file(function(B){B.relativePath=m+B.name,w.push(B),g()});if(d.isDirectory?p=d:d instanceof File&&w.push(d),typeof d.webkitGetAsEntry=="function"&&(p=d.webkitGetAsEntry()),p&&p.isDirectory)return c(p,m+p.name+"/",w,g);typeof d.getAsFile=="function"&&(d=d.getAsFile(),d instanceof File&&(d.relativePath=m+d.name,w.push(d))),g()}function h(d,m){if(!d||d.length===0)return m();d[0](function(){h(d.slice(1),m)})}function c(d,m,w,g){var p=d.createReader();p.readEntries(function(B){if(!B.length)return g();h(B.map(function(E){return u.bind(null,E,m,w)}),g)})}function y(d,m){if(d.length){i.fire("beforeAdd");var w=[];h(Array.prototype.map.call(d,function(g){return u.bind(null,g,"",w)}),function(){w.length&&v(w,m)})}}var v=function(d,m){var w=0,g=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(typeof g.maxFiles<"u"&&g.maxFiles<d.length+i.files.length)if(g.maxFiles===1&&i.files.length===1&&d.length===1)i.removeFile(i.files[0]);else return g.maxFilesErrorCallback(d,w++),!1;var p=[],B=[],E=d.length,A=function(){if(!--E){if(!p.length&&!B.length)return;window.setTimeout(function(){i.fire("filesAdded",p,B)},0)}};n.each(d,function(C){var U=C.name;if(g.fileType.length>0){var D=!1;for(var M in g.fileType){var V="."+g.fileType[M];if(U.toLowerCase().indexOf(V.toLowerCase(),U.length-V.length)!==-1){D=!0;break}}if(!D)return g.fileTypeErrorCallback(C,w++),!1}if(typeof g.minFileSize<"u"&&C.size<g.minFileSize)return g.minFileSizeErrorCallback(C,w++),!1;if(typeof g.maxFileSize<"u"&&C.size>g.maxFileSize)return g.maxFileSizeErrorCallback(C,w++),!1;function oe(ue){i.getFromUniqueIdentifier(ue)?B.push(C):function(){C.uniqueIdentifier=ue;var me=new P(i,C,ue);i.files.push(me),p.push(me),me.container=typeof m<"u"?m.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",me,m)},0)}(),A()}var X=n.generateUniqueIdentifier(C,m);X&&typeof X.then=="function"?X.then(function(ue){oe(ue)},function(){A()}):oe(X)})};function P(d,m,w){var g=this;g.opts={},g.getOpt=d.getOpt,g._prevProgress=0,g.resumableObj=d,g.file=m,g.fileName=m.fileName||m.name,g.size=m.size,g.relativePath=m.relativePath||m.webkitRelativePath||g.fileName,g.uniqueIdentifier=w,g._pause=!1,g.container="";var p=w!==void 0,B=function(E,A){switch(E){case"progress":g.resumableObj.fire("fileProgress",g,A);break;case"error":g.abort(),p=!0,g.chunks=[],g.resumableObj.fire("fileError",g,A);break;case"success":if(p)return;g.resumableObj.fire("fileProgress",g),g.isComplete()&&g.resumableObj.fire("fileSuccess",g,A);break;case"retry":g.resumableObj.fire("fileRetry",g);break}};return g.chunks=[],g.abort=function(){var E=0;n.each(g.chunks,function(A){A.status()=="uploading"&&(A.abort(),E++)}),E>0&&g.resumableObj.fire("fileProgress",g)},g.cancel=function(){var E=g.chunks;g.chunks=[],n.each(E,function(A){A.status()=="uploading"&&(A.abort(),g.resumableObj.uploadNextChunk())}),g.resumableObj.removeFile(g),g.resumableObj.fire("fileProgress",g)},g.retry=function(){g.bootstrap();var E=!1;g.resumableObj.on("chunkingComplete",function(){E||g.resumableObj.upload(),E=!0})},g.bootstrap=function(){g.abort(),p=!1,g.chunks=[],g._prevProgress=0;for(var E=g.getOpt("forceChunkSize")?Math.ceil:Math.floor,A=Math.max(E(g.file.size/g.getOpt("chunkSize")),1),C=0;C<A;C++)(function(U){window.setTimeout(function(){g.chunks.push(new O(g.resumableObj,g,U,B)),g.resumableObj.fire("chunkingProgress",g,U/A)},0)})(C);window.setTimeout(function(){g.resumableObj.fire("chunkingComplete",g)},0)},g.progress=function(){if(p)return 1;var E=0,A=!1;return n.each(g.chunks,function(C){C.status()=="error"&&(A=!0),E+=C.progress(!0)}),E=A||E>.99999?1:E,E=Math.max(g._prevProgress,E),g._prevProgress=E,E},g.isUploading=function(){var E=!1;return n.each(g.chunks,function(A){if(A.status()=="uploading")return E=!0,!1}),E},g.isComplete=function(){var E=!1;return n.each(g.chunks,function(A){var C=A.status();if(C=="pending"||C=="uploading"||A.preprocessState===1)return E=!0,!1}),!E},g.pause=function(E){typeof E>"u"?g._pause=!g._pause:g._pause=E},g.isPaused=function(){return g._pause},g.resumableObj.fire("chunkingStart",g),g.bootstrap(),this}function O(d,m,w,g){var p=this;p.opts={},p.getOpt=d.getOpt,p.resumableObj=d,p.fileObj=m,p.fileObjSize=m.size,p.fileObjType=m.file.type,p.offset=w,p.callback=g,p.lastProgressCallback=new Date,p.tested=!1,p.retries=0,p.pendingRetry=!1,p.preprocessState=0;var B=p.getOpt("chunkSize");return p.loaded=0,p.startByte=p.offset*B,p.endByte=Math.min(p.fileObjSize,(p.offset+1)*B),p.fileObjSize-p.endByte<B&&!p.getOpt("forceChunkSize")&&(p.endByte=p.fileObjSize),p.xhr=null,p.test=function(){p.xhr=new XMLHttpRequest;var E=function(M){p.tested=!0;var V=p.status();V=="success"?(p.callback(V,p.message()),p.resumableObj.uploadNextChunk()):p.send()};p.xhr.addEventListener("load",E,!1),p.xhr.addEventListener("error",E,!1),p.xhr.addEventListener("timeout",E,!1);var A=[],C=p.getOpt("parameterNamespace"),U=p.getOpt("query");typeof U=="function"&&(U=U(p.fileObj,p)),n.each(U,function(M,V){A.push([encodeURIComponent(C+M),encodeURIComponent(V)].join("="))}),A=A.concat([["chunkNumberParameterName",p.offset+1],["chunkSizeParameterName",p.getOpt("chunkSize")],["currentChunkSizeParameterName",p.endByte-p.startByte],["totalSizeParameterName",p.fileObjSize],["typeParameterName",p.fileObjType],["identifierParameterName",p.fileObj.uniqueIdentifier],["fileNameParameterName",p.fileObj.fileName],["relativePathParameterName",p.fileObj.relativePath],["totalChunksParameterName",p.fileObj.chunks.length]].filter(function(M){return p.getOpt(M[0])}).map(function(M){return[C+p.getOpt(M[0]),encodeURIComponent(M[1])].join("=")})),p.xhr.open(p.getOpt("testMethod"),n.getTarget("test",A)),p.xhr.timeout=p.getOpt("xhrTimeout"),p.xhr.withCredentials=p.getOpt("withCredentials");var D=p.getOpt("headers");typeof D=="function"&&(D=D(p.fileObj,p)),n.each(D,function(M,V){p.xhr.setRequestHeader(M,V)}),p.xhr.send(null)},p.preprocessFinished=function(){p.preprocessState=2,p.send()},p.send=function(){var E=p.getOpt("preprocess");if(typeof E=="function")switch(p.preprocessState){case 0:p.preprocessState=1,E(p);return;case 1:return}if(p.getOpt("testChunks")&&!p.tested){p.test();return}p.xhr=new XMLHttpRequest,p.xhr.upload.addEventListener("progress",function(L){new Date-p.lastProgressCallback>p.getOpt("throttleProgressCallbacks")*1e3&&(p.callback("progress"),p.lastProgressCallback=new Date),p.loaded=L.loaded||0},!1),p.loaded=0,p.pendingRetry=!1,p.callback("progress");var A=function(L){var G=p.status();if(G=="success"||G=="error")p.callback(G,p.message()),p.resumableObj.uploadNextChunk();else{p.callback("retry",p.message()),p.abort(),p.retries++;var ve=p.getOpt("chunkRetryInterval");ve!==void 0?(p.pendingRetry=!0,setTimeout(p.send,ve)):p.send()}};p.xhr.addEventListener("load",A,!1),p.xhr.addEventListener("error",A,!1),p.xhr.addEventListener("timeout",A,!1);var C=[["chunkNumberParameterName",p.offset+1],["chunkSizeParameterName",p.getOpt("chunkSize")],["currentChunkSizeParameterName",p.endByte-p.startByte],["totalSizeParameterName",p.fileObjSize],["typeParameterName",p.fileObjType],["identifierParameterName",p.fileObj.uniqueIdentifier],["fileNameParameterName",p.fileObj.fileName],["relativePathParameterName",p.fileObj.relativePath],["totalChunksParameterName",p.fileObj.chunks.length]].filter(function(L){return p.getOpt(L[0])}).reduce(function(L,G){return L[p.getOpt(G[0])]=G[1],L},{}),U=p.getOpt("query");typeof U=="function"&&(U=U(p.fileObj,p)),n.each(U,function(L,G){C[L]=G});var D=p.fileObj.file.slice?"slice":p.fileObj.file.mozSlice?"mozSlice":p.fileObj.file.webkitSlice?"webkitSlice":"slice",M=p.fileObj.file[D](p.startByte,p.endByte,p.getOpt("setChunkTypeFromFile")?p.fileObj.file.type:""),V=null,oe=[],X=p.getOpt("parameterNamespace");if(p.getOpt("method")==="octet")V=M,n.each(C,function(L,G){oe.push([encodeURIComponent(X+L),encodeURIComponent(G)].join("="))});else if(V=new FormData,n.each(C,function(L,G){V.append(X+L,G),oe.push([encodeURIComponent(X+L),encodeURIComponent(G)].join("="))}),p.getOpt("chunkFormat")=="blob")V.append(X+p.getOpt("fileParameterName"),M,p.fileObj.fileName);else if(p.getOpt("chunkFormat")=="base64"){var ue=new FileReader;ue.onload=function(L){V.append(X+p.getOpt("fileParameterName"),ue.result),p.xhr.send(V)},ue.readAsDataURL(M)}var me=n.getTarget("upload",oe),Ke=p.getOpt("uploadMethod");p.xhr.open(Ke,me),p.getOpt("method")==="octet"&&p.xhr.setRequestHeader("Content-Type","application/octet-stream"),p.xhr.timeout=p.getOpt("xhrTimeout"),p.xhr.withCredentials=p.getOpt("withCredentials");var de=p.getOpt("headers");typeof de=="function"&&(de=de(p.fileObj,p)),n.each(de,function(L,G){p.xhr.setRequestHeader(L,G)}),p.getOpt("chunkFormat")=="blob"&&p.xhr.send(V)},p.abort=function(){p.xhr&&p.xhr.abort(),p.xhr=null},p.status=function(){return p.pendingRetry?"uploading":p.xhr?p.xhr.readyState<4?"uploading":p.xhr.status==200||p.xhr.status==201?"success":n.contains(p.getOpt("permanentErrors"),p.xhr.status)||p.retries>=p.getOpt("maxChunkRetries")?"error":(p.abort(),"pending"):"pending"},p.message=function(){return p.xhr?p.xhr.responseText:""},p.progress=function(E){typeof E>"u"&&(E=!1);var A=E?(p.endByte-p.startByte)/p.fileObjSize:1;if(p.pendingRetry)return 0;(!p.xhr||!p.xhr.status)&&(A*=.95);var C=p.status();switch(C){case"success":case"error":return 1*A;case"pending":return 0*A;default:return p.loaded/(p.endByte-p.startByte)*A}},this}return i.uploadNextChunk=function(){var d=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(n.each(i.files,function(w){if(w.chunks.length&&w.chunks[0].status()=="pending"&&w.chunks[0].preprocessState===0)return w.chunks[0].send(),d=!0,!1;if(w.chunks.length>1&&w.chunks[w.chunks.length-1].status()=="pending"&&w.chunks[w.chunks.length-1].preprocessState===0)return w.chunks[w.chunks.length-1].send(),d=!0,!1}),d)||(n.each(i.files,function(w){if(w.isPaused()===!1&&n.each(w.chunks,function(g){if(g.status()=="pending"&&g.preprocessState===0)return g.send(),d=!0,!1}),d)return!1}),d))return!0;var m=!1;return n.each(i.files,function(w){if(!w.isComplete())return m=!0,!1}),m||i.fire("complete"),!1},i.assignBrowse=function(d,m){typeof d.length>"u"&&(d=[d]),n.each(d,function(w){var g;w.tagName==="INPUT"&&w.type==="file"?g=w:(g=document.createElement("input"),g.setAttribute("type","file"),g.style.display="none",w.addEventListener("click",function(){g.style.opacity=0,g.style.display="block",g.focus(),g.click(),g.style.display="none"},!1),w.appendChild(g));var p=i.getOpt("maxFiles");typeof p>"u"||p!=1?g.setAttribute("multiple","multiple"):g.removeAttribute("multiple"),m?g.setAttribute("webkitdirectory","webkitdirectory"):g.removeAttribute("webkitdirectory");var B=i.getOpt("fileType");typeof B<"u"&&B.length>=1?g.setAttribute("accept",B.map(function(E){return"."+E}).join(",")):g.removeAttribute("accept"),g.addEventListener("change",function(E){v(E.target.files,E);var A=i.getOpt("clearInput");A&&(E.target.value="")},!1)})},i.assignDrop=function(d){typeof d.length>"u"&&(d=[d]),n.each(d,function(m){m.addEventListener("dragover",a,!1),m.addEventListener("dragenter",a,!1),m.addEventListener("drop",r,!1)})},i.unAssignDrop=function(d){typeof d.length>"u"&&(d=[d]),n.each(d,function(m){m.removeEventListener("dragover",a),m.removeEventListener("dragenter",a),m.removeEventListener("drop",r)})},i.isUploading=function(){var d=!1;return n.each(i.files,function(m){if(m.isUploading())return d=!0,!1}),d},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var d=1;d<=i.getOpt("simultaneousUploads");d++)i.uploadNextChunk()}},i.pause=function(){n.each(i.files,function(d){d.abort()}),i.fire("pause")},i.cancel=function(){i.fire("beforeCancel");for(var d=i.files.length-1;d>=0;d--)i.files[d].cancel();i.fire("cancel")},i.progress=function(){var d=0,m=0;return n.each(i.files,function(w){d+=w.progress()*w.size,m+=w.size}),m>0?d/m:0},i.addFile=function(d,m){v([d],m)},i.addFiles=function(d,m){v(d,m)},i.removeFile=function(d){for(var m=i.files.length-1;m>=0;m--)i.files[m]===d&&i.files.splice(m,1)},i.getFromUniqueIdentifier=function(d){var m=!1;return n.each(i.files,function(w){w.uniqueIdentifier==d&&(m=w)}),m},i.getSize=function(){var d=0;return n.each(i.files,function(m){d+=m.size}),d},i.handleDropEvent=function(d){r(d)},i.handleChangeEvent=function(d){v(d.target.files,d),d.target.value=""},i.updateQuery=function(d){i.opts.query=d},this};t.exports=e})()})(Gr);var cl=Gr.exports;const hl=ci(cl);function Kr(t,e){return function(){return t.apply(e,arguments)}}const{toString:pl}=Object.prototype,{getPrototypeOf:fi}=Object,ls=(t=>e=>{const s=pl.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),ke=t=>(t=t.toLowerCase(),e=>ls(e)===t),us=t=>e=>typeof e===t,{isArray:mt}=Array,Mt=us("undefined");function fl(t){return t!==null&&!Mt(t)&&t.constructor!==null&&!Mt(t.constructor)&&be(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Xr=ke("ArrayBuffer");function ml(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Xr(t.buffer),e}const gl=us("string"),be=us("function"),Jr=us("number"),ds=t=>t!==null&&typeof t=="object",yl=t=>t===!0||t===!1,es=t=>{if(ls(t)!=="object")return!1;const e=fi(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bl=ke("Date"),vl=ke("File"),wl=ke("Blob"),Fl=ke("FileList"),Sl=t=>ds(t)&&be(t.pipe),Pl=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||be(t.append)&&((e=ls(t))==="formdata"||e==="object"&&be(t.toString)&&t.toString()==="[object FormData]"))},Ol=ke("URLSearchParams"),El=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lt(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let i,n;if(typeof t!="object"&&(t=[t]),mt(t))for(i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else{const r=s?Object.getOwnPropertyNames(t):Object.keys(t),a=r.length;let u;for(i=0;i<a;i++)u=r[i],e.call(null,t[u],u,t)}}function Yr(t,e){e=e.toLowerCase();const s=Object.keys(t);let i=s.length,n;for(;i-- >0;)if(n=s[i],e===n.toLowerCase())return n;return null}const Qr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Zr=t=>!Mt(t)&&t!==Qr;function ei(){const{caseless:t}=Zr(this)&&this||{},e={},s=(i,n)=>{const r=t&&Yr(e,n)||n;es(e[r])&&es(i)?e[r]=ei(e[r],i):es(i)?e[r]=ei({},i):mt(i)?e[r]=i.slice():e[r]=i};for(let i=0,n=arguments.length;i<n;i++)arguments[i]&&Lt(arguments[i],s);return e}const Tl=(t,e,s,{allOwnKeys:i}={})=>(Lt(e,(n,r)=>{s&&be(n)?t[r]=Kr(n,s):t[r]=n},{allOwnKeys:i}),t),Cl=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Al=(t,e,s,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},kl=(t,e,s,i)=>{let n,r,a;const u={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),r=n.length;r-- >0;)a=n[r],(!i||i(a,t,e))&&!u[a]&&(e[a]=t[a],u[a]=!0);t=s!==!1&&fi(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},xl=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const i=t.indexOf(e,s);return i!==-1&&i===s},Ul=t=>{if(!t)return null;if(mt(t))return t;let e=t.length;if(!Jr(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},Bl=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&fi(Uint8Array)),Rl=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=i.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},Nl=(t,e)=>{let s;const i=[];for(;(s=t.exec(e))!==null;)i.push(s);return i},Dl=ke("HTMLFormElement"),_l=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,i,n){return i.toUpperCase()+n}),Xi=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),Il=ke("RegExp"),en=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),i={};Lt(s,(n,r)=>{e(n,r,t)!==!1&&(i[r]=n)}),Object.defineProperties(t,i)},Ml=t=>{en(t,(e,s)=>{if(be(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const i=t[s];if(be(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},$l=(t,e)=>{const s={},i=n=>{n.forEach(r=>{s[r]=!0})};return mt(t)?i(t):i(String(t).split(e)),s},Ll=()=>{},zl=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Cs="abcdefghijklmnopqrstuvwxyz",Ji="0123456789",tn={DIGIT:Ji,ALPHA:Cs,ALPHA_DIGIT:Cs+Cs.toUpperCase()+Ji},jl=(t=16,e=tn.ALPHA_DIGIT)=>{let s="";const{length:i}=e;for(;t--;)s+=e[Math.random()*i|0];return s};function Vl(t){return!!(t&&be(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const ql=t=>{const e=new Array(10),s=(i,n)=>{if(ds(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[n]=i;const r=mt(i)?[]:{};return Lt(i,(a,u)=>{const h=s(a,n+1);!Mt(h)&&(r[u]=h)}),e[n]=void 0,r}}return i};return s(t,0)},Hl=ke("AsyncFunction"),Wl=t=>t&&(ds(t)||be(t))&&be(t.then)&&be(t.catch),F={isArray:mt,isArrayBuffer:Xr,isBuffer:fl,isFormData:Pl,isArrayBufferView:ml,isString:gl,isNumber:Jr,isBoolean:yl,isObject:ds,isPlainObject:es,isUndefined:Mt,isDate:bl,isFile:vl,isBlob:wl,isRegExp:Il,isFunction:be,isStream:Sl,isURLSearchParams:Ol,isTypedArray:Bl,isFileList:Fl,forEach:Lt,merge:ei,extend:Tl,trim:El,stripBOM:Cl,inherits:Al,toFlatObject:kl,kindOf:ls,kindOfTest:ke,endsWith:xl,toArray:Ul,forEachEntry:Rl,matchAll:Nl,isHTMLForm:Dl,hasOwnProperty:Xi,hasOwnProp:Xi,reduceDescriptors:en,freezeMethods:Ml,toObjectSet:$l,toCamelCase:_l,noop:Ll,toFiniteNumber:zl,findKey:Yr,global:Qr,isContextDefined:Zr,ALPHABET:tn,generateString:jl,isSpecCompliantForm:Vl,toJSONObject:ql,isAsyncFn:Hl,isThenable:Wl};function _(t,e,s,i,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),i&&(this.request=i),n&&(this.response=n)}F.inherits(_,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const sn=_.prototype,rn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{rn[t]={value:t}});Object.defineProperties(_,rn);Object.defineProperty(sn,"isAxiosError",{value:!0});_.from=(t,e,s,i,n,r)=>{const a=Object.create(sn);return F.toFlatObject(t,a,function(h){return h!==Error.prototype},u=>u!=="isAxiosError"),_.call(a,t.message,e,s,i,n),a.cause=t,a.name=t.name,r&&Object.assign(a,r),a};const Gl=null;function ti(t){return F.isPlainObject(t)||F.isArray(t)}function nn(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function Yi(t,e,s){return t?t.concat(e).map(function(n,r){return n=nn(n),!s&&r?"["+n+"]":n}).join(s?".":""):e}function Kl(t){return F.isArray(t)&&!t.some(ti)}const Xl=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function cs(t,e,s){if(!F.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=F.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!F.isUndefined(w[m])});const i=s.metaTokens,n=s.visitor||y,r=s.dots,a=s.indexes,h=(s.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(n))throw new TypeError("visitor must be a function");function c(d){if(d===null)return"";if(F.isDate(d))return d.toISOString();if(!h&&F.isBlob(d))throw new _("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(d)||F.isTypedArray(d)?h&&typeof Blob=="function"?new Blob([d]):Buffer.from(d):d}function y(d,m,w){let g=d;if(d&&!w&&typeof d=="object"){if(F.endsWith(m,"{}"))m=i?m:m.slice(0,-2),d=JSON.stringify(d);else if(F.isArray(d)&&Kl(d)||(F.isFileList(d)||F.endsWith(m,"[]"))&&(g=F.toArray(d)))return m=nn(m),g.forEach(function(B,E){!(F.isUndefined(B)||B===null)&&e.append(a===!0?Yi([m],E,r):a===null?m:m+"[]",c(B))}),!1}return ti(d)?!0:(e.append(Yi(w,m,r),c(d)),!1)}const v=[],P=Object.assign(Xl,{defaultVisitor:y,convertValue:c,isVisitable:ti});function O(d,m){if(!F.isUndefined(d)){if(v.indexOf(d)!==-1)throw Error("Circular reference detected in "+m.join("."));v.push(d),F.forEach(d,function(g,p){(!(F.isUndefined(g)||g===null)&&n.call(e,g,F.isString(p)?p.trim():p,m,P))===!0&&O(g,m?m.concat(p):[p])}),v.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return O(t),e}function Qi(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function mi(t,e){this._pairs=[],t&&cs(t,this,e)}const an=mi.prototype;an.append=function(e,s){this._pairs.push([e,s])};an.toString=function(e){const s=e?function(i){return e.call(this,i,Qi)}:Qi;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function Jl(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function on(t,e,s){if(!e)return t;const i=s&&s.encode||Jl,n=s&&s.serialize;let r;if(n?r=n(e,s):r=F.isURLSearchParams(e)?e.toString():new mi(e,s).toString(i),r){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Yl{constructor(){this.handlers=[]}use(e,s,i){return this.handlers.push({fulfilled:e,rejected:s,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Zi=Yl,ln={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ql=typeof URLSearchParams<"u"?URLSearchParams:mi,Zl=typeof FormData<"u"?FormData:null,eu=typeof Blob<"u"?Blob:null,tu=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),su=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ae={isBrowser:!0,classes:{URLSearchParams:Ql,FormData:Zl,Blob:eu},isStandardBrowserEnv:tu,isStandardBrowserWebWorkerEnv:su,protocols:["http","https","file","blob","url","data"]};function iu(t,e){return cs(t,new Ae.classes.URLSearchParams,Object.assign({visitor:function(s,i,n,r){return Ae.isNode&&F.isBuffer(s)?(this.append(i,s.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function ru(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function nu(t){const e={},s=Object.keys(t);let i;const n=s.length;let r;for(i=0;i<n;i++)r=s[i],e[r]=t[r];return e}function un(t){function e(s,i,n,r){let a=s[r++];const u=Number.isFinite(+a),h=r>=s.length;return a=!a&&F.isArray(n)?n.length:a,h?(F.hasOwnProp(n,a)?n[a]=[n[a],i]:n[a]=i,!u):((!n[a]||!F.isObject(n[a]))&&(n[a]=[]),e(s,i,n[a],r)&&F.isArray(n[a])&&(n[a]=nu(n[a])),!u)}if(F.isFormData(t)&&F.isFunction(t.entries)){const s={};return F.forEachEntry(t,(i,n)=>{e(ru(i),n,s,0)}),s}return null}const au={"Content-Type":void 0};function ou(t,e,s){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(s||JSON.stringify)(t)}const hs={transitional:ln,adapter:["xhr","http"],transformRequest:[function(e,s){const i=s.getContentType()||"",n=i.indexOf("application/json")>-1,r=F.isObject(e);if(r&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return n&&n?JSON.stringify(un(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return iu(e,this.formSerializer).toString();if((u=F.isFileList(e))||i.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return cs(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return r||n?(s.setContentType("application/json",!1),ou(e)):e}],transformResponse:[function(e){const s=this.transitional||hs.transitional,i=s&&s.forcedJSONParsing,n=this.responseType==="json";if(e&&F.isString(e)&&(i&&!this.responseType||n)){const a=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?_.from(u,_.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ae.classes.FormData,Blob:Ae.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};F.forEach(["delete","get","head"],function(e){hs.headers[e]={}});F.forEach(["post","put","patch"],function(e){hs.headers[e]=F.merge(au)});const gi=hs,lu=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uu=t=>{const e={};let s,i,n;return t&&t.split(`
`).forEach(function(a){n=a.indexOf(":"),s=a.substring(0,n).trim().toLowerCase(),i=a.substring(n+1).trim(),!(!s||e[s]&&lu[s])&&(s==="set-cookie"?e[s]?e[s].push(i):e[s]=[i]:e[s]=e[s]?e[s]+", "+i:i)}),e},er=Symbol("internals");function kt(t){return t&&String(t).trim().toLowerCase()}function ts(t){return t===!1||t==null?t:F.isArray(t)?t.map(ts):String(t)}function du(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=s.exec(t);)e[i[1]]=i[2];return e}const cu=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function As(t,e,s,i,n){if(F.isFunction(i))return i.call(this,e,s);if(n&&(e=s),!!F.isString(e)){if(F.isString(i))return e.indexOf(i)!==-1;if(F.isRegExp(i))return i.test(e)}}function hu(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,i)=>s.toUpperCase()+i)}function pu(t,e){const s=F.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+s,{value:function(n,r,a){return this[i].call(this,e,n,r,a)},configurable:!0})})}class ps{constructor(e){e&&this.set(e)}set(e,s,i){const n=this;function r(u,h,c){const y=kt(h);if(!y)throw new Error("header name must be a non-empty string");const v=F.findKey(n,y);(!v||n[v]===void 0||c===!0||c===void 0&&n[v]!==!1)&&(n[v||h]=ts(u))}const a=(u,h)=>F.forEach(u,(c,y)=>r(c,y,h));return F.isPlainObject(e)||e instanceof this.constructor?a(e,s):F.isString(e)&&(e=e.trim())&&!cu(e)?a(uu(e),s):e!=null&&r(s,e,i),this}get(e,s){if(e=kt(e),e){const i=F.findKey(this,e);if(i){const n=this[i];if(!s)return n;if(s===!0)return du(n);if(F.isFunction(s))return s.call(this,n,i);if(F.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=kt(e),e){const i=F.findKey(this,e);return!!(i&&this[i]!==void 0&&(!s||As(this,this[i],i,s)))}return!1}delete(e,s){const i=this;let n=!1;function r(a){if(a=kt(a),a){const u=F.findKey(i,a);u&&(!s||As(i,i[u],u,s))&&(delete i[u],n=!0)}}return F.isArray(e)?e.forEach(r):r(e),n}clear(e){const s=Object.keys(this);let i=s.length,n=!1;for(;i--;){const r=s[i];(!e||As(this,this[r],r,e,!0))&&(delete this[r],n=!0)}return n}normalize(e){const s=this,i={};return F.forEach(this,(n,r)=>{const a=F.findKey(i,r);if(a){s[a]=ts(n),delete s[r];return}const u=e?hu(r):String(r).trim();u!==r&&delete s[r],s[u]=ts(n),i[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return F.forEach(this,(i,n)=>{i!=null&&i!==!1&&(s[n]=e&&F.isArray(i)?i.join(", "):i)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const i=new this(e);return s.forEach(n=>i.set(n)),i}static accessor(e){const i=(this[er]=this[er]={accessors:{}}).accessors,n=this.prototype;function r(a){const u=kt(a);i[u]||(pu(n,a),i[u]=!0)}return F.isArray(e)?e.forEach(r):r(e),this}}ps.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.freezeMethods(ps.prototype);F.freezeMethods(ps);const Le=ps;function ks(t,e){const s=this||gi,i=e||s,n=Le.from(i.headers);let r=i.data;return F.forEach(t,function(u){r=u.call(s,r,n.normalize(),e?e.status:void 0)}),n.normalize(),r}function dn(t){return!!(t&&t.__CANCEL__)}function zt(t,e,s){_.call(this,t??"canceled",_.ERR_CANCELED,e,s),this.name="CanceledError"}F.inherits(zt,_,{__CANCEL__:!0});function fu(t,e,s){const i=s.config.validateStatus;!s.status||!i||i(s.status)?t(s):e(new _("Request failed with status code "+s.status,[_.ERR_BAD_REQUEST,_.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}const mu=Ae.isStandardBrowserEnv?function(){return{write:function(s,i,n,r,a,u){const h=[];h.push(s+"="+encodeURIComponent(i)),F.isNumber(n)&&h.push("expires="+new Date(n).toGMTString()),F.isString(r)&&h.push("path="+r),F.isString(a)&&h.push("domain="+a),u===!0&&h.push("secure"),document.cookie=h.join("; ")},read:function(s){const i=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function gu(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yu(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function cn(t,e){return t&&!gu(e)?yu(t,e):e}const bu=Ae.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");let i;function n(r){let a=r;return e&&(s.setAttribute("href",a),a=s.href),s.setAttribute("href",a),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return i=n(window.location.href),function(a){const u=F.isString(a)?n(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}();function vu(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function wu(t,e){t=t||10;const s=new Array(t),i=new Array(t);let n=0,r=0,a;return e=e!==void 0?e:1e3,function(h){const c=Date.now(),y=i[r];a||(a=c),s[n]=h,i[n]=c;let v=r,P=0;for(;v!==n;)P+=s[v++],v=v%t;if(n=(n+1)%t,n===r&&(r=(r+1)%t),c-a<e)return;const O=y&&c-y;return O?Math.round(P*1e3/O):void 0}}function tr(t,e){let s=0;const i=wu(50,250);return n=>{const r=n.loaded,a=n.lengthComputable?n.total:void 0,u=r-s,h=i(u),c=r<=a;s=r;const y={loaded:r,total:a,progress:a?r/a:void 0,bytes:u,rate:h||void 0,estimated:h&&a&&c?(a-r)/h:void 0,event:n};y[e?"download":"upload"]=!0,t(y)}}const Fu=typeof XMLHttpRequest<"u",Su=Fu&&function(t){return new Promise(function(s,i){let n=t.data;const r=Le.from(t.headers).normalize(),a=t.responseType;let u;function h(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}F.isFormData(n)&&(Ae.isStandardBrowserEnv||Ae.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const O=t.auth.username||"",d=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";r.set("Authorization","Basic "+btoa(O+":"+d))}const y=cn(t.baseURL,t.url);c.open(t.method.toUpperCase(),on(y,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function v(){if(!c)return;const O=Le.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),m={data:!a||a==="text"||a==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:O,config:t,request:c};fu(function(g){s(g),h()},function(g){i(g),h()},m),c=null}if("onloadend"in c?c.onloadend=v:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(v)},c.onabort=function(){c&&(i(new _("Request aborted",_.ECONNABORTED,t,c)),c=null)},c.onerror=function(){i(new _("Network Error",_.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let d=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const m=t.transitional||ln;t.timeoutErrorMessage&&(d=t.timeoutErrorMessage),i(new _(d,m.clarifyTimeoutError?_.ETIMEDOUT:_.ECONNABORTED,t,c)),c=null},Ae.isStandardBrowserEnv){const O=(t.withCredentials||bu(y))&&t.xsrfCookieName&&mu.read(t.xsrfCookieName);O&&r.set(t.xsrfHeaderName,O)}n===void 0&&r.setContentType(null),"setRequestHeader"in c&&F.forEach(r.toJSON(),function(d,m){c.setRequestHeader(m,d)}),F.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),a&&a!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",tr(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",tr(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=O=>{c&&(i(!O||O.type?new zt(null,t,c):O),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const P=vu(y);if(P&&Ae.protocols.indexOf(P)===-1){i(new _("Unsupported protocol "+P+":",_.ERR_BAD_REQUEST,t));return}c.send(n||null)})},ss={http:Gl,xhr:Su};F.forEach(ss,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Pu={getAdapter:t=>{t=F.isArray(t)?t:[t];const{length:e}=t;let s,i;for(let n=0;n<e&&(s=t[n],!(i=F.isString(s)?ss[s.toLowerCase()]:s));n++);if(!i)throw i===!1?new _(`Adapter ${s} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(F.hasOwnProp(ss,s)?`Adapter '${s}' is not available in the build`:`Unknown adapter '${s}'`);if(!F.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:ss};function xs(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zt(null,t)}function sr(t){return xs(t),t.headers=Le.from(t.headers),t.data=ks.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Pu.getAdapter(t.adapter||gi.adapter)(t).then(function(i){return xs(t),i.data=ks.call(t,t.transformResponse,i),i.headers=Le.from(i.headers),i},function(i){return dn(i)||(xs(t),i&&i.response&&(i.response.data=ks.call(t,t.transformResponse,i.response),i.response.headers=Le.from(i.response.headers))),Promise.reject(i)})}const ir=t=>t instanceof Le?t.toJSON():t;function pt(t,e){e=e||{};const s={};function i(c,y,v){return F.isPlainObject(c)&&F.isPlainObject(y)?F.merge.call({caseless:v},c,y):F.isPlainObject(y)?F.merge({},y):F.isArray(y)?y.slice():y}function n(c,y,v){if(F.isUndefined(y)){if(!F.isUndefined(c))return i(void 0,c,v)}else return i(c,y,v)}function r(c,y){if(!F.isUndefined(y))return i(void 0,y)}function a(c,y){if(F.isUndefined(y)){if(!F.isUndefined(c))return i(void 0,c)}else return i(void 0,y)}function u(c,y,v){if(v in e)return i(c,y);if(v in t)return i(void 0,c)}const h={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(c,y)=>n(ir(c),ir(y),!0)};return F.forEach(Object.keys(Object.assign({},t,e)),function(y){const v=h[y]||n,P=v(t[y],e[y],y);F.isUndefined(P)&&v!==u||(s[y]=P)}),s}const hn="1.4.0",yi={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{yi[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const rr={};yi.transitional=function(e,s,i){function n(r,a){return"[Axios v"+hn+"] Transitional option '"+r+"'"+a+(i?". "+i:"")}return(r,a,u)=>{if(e===!1)throw new _(n(a," has been removed"+(s?" in "+s:"")),_.ERR_DEPRECATED);return s&&!rr[a]&&(rr[a]=!0,console.warn(n(a," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(r,a,u):!0}};function Ou(t,e,s){if(typeof t!="object")throw new _("options must be an object",_.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let n=i.length;for(;n-- >0;){const r=i[n],a=e[r];if(a){const u=t[r],h=u===void 0||a(u,r,t);if(h!==!0)throw new _("option "+r+" must be "+h,_.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new _("Unknown option "+r,_.ERR_BAD_OPTION)}}const si={assertOptions:Ou,validators:yi},je=si.validators;class as{constructor(e){this.defaults=e,this.interceptors={request:new Zi,response:new Zi}}request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=pt(this.defaults,s);const{transitional:i,paramsSerializer:n,headers:r}=s;i!==void 0&&si.assertOptions(i,{silentJSONParsing:je.transitional(je.boolean),forcedJSONParsing:je.transitional(je.boolean),clarifyTimeoutError:je.transitional(je.boolean)},!1),n!=null&&(F.isFunction(n)?s.paramsSerializer={serialize:n}:si.assertOptions(n,{encode:je.function,serialize:je.function},!0)),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a;a=r&&F.merge(r.common,r[s.method]),a&&F.forEach(["delete","get","head","post","put","patch","common"],d=>{delete r[d]}),s.headers=Le.concat(a,r);const u=[];let h=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(s)===!1||(h=h&&m.synchronous,u.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let y,v=0,P;if(!h){const d=[sr.bind(this),void 0];for(d.unshift.apply(d,u),d.push.apply(d,c),P=d.length,y=Promise.resolve(s);v<P;)y=y.then(d[v++],d[v++]);return y}P=u.length;let O=s;for(v=0;v<P;){const d=u[v++],m=u[v++];try{O=d(O)}catch(w){m.call(this,w);break}}try{y=sr.call(this,O)}catch(d){return Promise.reject(d)}for(v=0,P=c.length;v<P;)y=y.then(c[v++],c[v++]);return y}getUri(e){e=pt(this.defaults,e);const s=cn(e.baseURL,e.url);return on(s,e.params,e.paramsSerializer)}}F.forEach(["delete","get","head","options"],function(e){as.prototype[e]=function(s,i){return this.request(pt(i||{},{method:e,url:s,data:(i||{}).data}))}});F.forEach(["post","put","patch"],function(e){function s(i){return function(r,a,u){return this.request(pt(u||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}as.prototype[e]=s(),as.prototype[e+"Form"]=s(!0)});const is=as;class bi{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(r){s=r});const i=this;this.promise.then(n=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](n);i._listeners=null}),this.promise.then=n=>{let r;const a=new Promise(u=>{i.subscribe(u),r=u}).then(n);return a.cancel=function(){i.unsubscribe(r)},a},e(function(r,a,u){i.reason||(i.reason=new zt(r,a,u),s(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}static source(){let e;return{token:new bi(function(n){e=n}),cancel:e}}}const Eu=bi;function Tu(t){return function(s){return t.apply(null,s)}}function Cu(t){return F.isObject(t)&&t.isAxiosError===!0}const ii={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ii).forEach(([t,e])=>{ii[e]=t});const Au=ii;function pn(t){const e=new is(t),s=Kr(is.prototype.request,e);return F.extend(s,is.prototype,e,{allOwnKeys:!0}),F.extend(s,e,null,{allOwnKeys:!0}),s.create=function(n){return pn(pt(t,n))},s}const Z=pn(gi);Z.Axios=is;Z.CanceledError=zt;Z.CancelToken=Eu;Z.isCancel=dn;Z.VERSION=hn;Z.toFormData=cs;Z.AxiosError=_;Z.Cancel=Z.CanceledError;Z.all=function(e){return Promise.all(e)};Z.spread=Tu;Z.isAxiosError=Cu;Z.mergeConfig=pt;Z.AxiosHeaders=Le;Z.formToJSON=t=>un(F.isHTMLForm(t)?new FormData(t):t);Z.HttpStatusCode=Au;Z.default=Z;const ku=Z,We=class We{constructor(){ce(this,"Clinet");ce(this,"Events",{});ce(this,"feilds",{title:""});const e=this;this.Clinet=ku.create({baseURL:We.BASE_URL,withCredentials:!1,headers:{accept:"application/json",accessKey:We.BUNNY_KEY},onUploadProgress:s=>{e.Events.uploadProgress&&e.Events.uploadProgress.forEach(i=>i(s))}})}onProgress(e,s){this.Events[e]||(this.Events[e]=[]),this.Events[e].push(s)}setFeild(e,s){this.feilds[e]=s}presignedUpload(e){return this.Clinet.post(`library/${e.library}/videos`,{title:this.feilds.title||e.name},{headers:{"content-type":"application/*+json"}})}upload(e){return this.Clinet.put(`library/${e.library}/videos/${e.videoId}`,e.file,{headers:{"content-type":"application/*+json"}})}storeMedia(e){return Ys.post("/media/store",{name:this.feilds.title||e.file.name,uuid:e.videoId,status:1,mime_type:e.file.type,size:e.file.size,size_total:e.file.size,disk:"bunnycdn",path:"/assets/video_placeholder.gif",conversions:[{engine:"ImageResize",path:"/assets/video_placeholder.gif",disk:"remote",name:"thumb"}]})}store(e,s){const i=this;return new Promise(async(n,r)=>{try{const{data:a}=await i.presignedUpload({library:e,name:s.name}),u=await i.upload({library:e,videoId:a.guid,file:s}),h=await i.storeMedia({file:s,videoId:`${e}-${a.guid}`});return n(h)}catch(a){return r(a)}})}checkVideo(e,s){return this.Clinet.get(`library/${e}/videos/${s}`)}};ce(We,"VERSION","0.0.1"),ce(We,"BASE_URL","https://video.bunnycdn.com"),ce(We,"BUNNY_KEY","20d00f14-49ad-4848-9c3d0473f44d-a37e-4994"),ce(We,"DEFAULT_HEADERS",{});let os=We;class xu extends ft.BasePlugin{constructor(s,i){super(s,i);ce(this,"uppy");ce(this,"id");ce(this,"type");ce(this,"resumable");ce(this,"token");this.uppy=s,this.id="ResumableUppyPlugin",this.type="uploader",this.token=vs("access_token").value,this.upload=this.upload.bind(this),this.initResumable=this.initResumable.bind(this),this.initResumable(),this.registerEvents=this.registerEvents.bind(this),this.registerEvents()}initResumable(){this.resumable=new hl({target:"/api/media/upload",headers:{Accept:"application/json",common:{"X-Requested-With":"XMLHttpRequest"},Authorization:`Bearer ${this.token}`},chunkSize:1*1024*1024,simultaneousUploads:1,maxChunkRetries:3})}async upload(s){var i;s.map(n=>{const r=this.uppy.getFile(n).data;return r.uuid=n,r});for(let n=0;n<s.length;n++){const r=this.uppy.getFile(s[n]);if((i=r.type)!=null&&i.includes("video/")){const a=new os;try{this.uppy.emit("upload-started",r);const u="179002";a.onProgress("uploadProgress",y=>{this.uppy.emit("upload-progress",r,{uploader:this,bytesUploaded:y.loaded,bytesTotal:r.size})}),a.setFeild("title",r.meta.name);const c={status:200,body:await a.store(u,r.data)};this.uppy.emit("upload-success",r,c)}catch(u){this.uppy.emit("upload-error",r,u)}return}this.resumable.addFile(r.data)}}uploadVideo(s){const i=new os;return new Promise(async(n,r)=>{this.uppy.emit("upload-started",s);try{const a="179002";i.onProgress("uploadProgress",c=>{this.uppy.emit("upload-progress",s,{uploader:this,bytesUploaded:c.loaded,bytesTotal:s.size})}),i.setFeild("title",s.name);const h={status:200,body:await i.store(a,s)};return this.uppy.emit("upload-success",s,h),n()}catch(a){return this.uppy.emit("upload-error",s,a),r(a)}})}registerEvents(){const s=this;this.uppy.on("upload-retry",i=>{this.resumable.files.find(({file:r})=>r.uuid===i).retry()}),this.uppy.on("retry-all",()=>{this.resumable.files.map(i=>i.retry())}),this.resumable.on("fileAdded",i=>{this.uppy.emit("upload-started",this.uppy.getFile(i.file.uuid)),this.resumable.upload()}),this.resumable.on("fileProgress",i=>{const n=this.uppy.getFile(i.file.uuid);this.uppy.emit("upload-progress",n,{uploader:this,bytesUploaded:i.progress(!1)*n.size,bytesTotal:n.size})}),this.resumable.on("fileSuccess",(i,n)=>{if(n!=="Ok"){const r={status:200,body:JSON.parse(n)};return this.uppy.emit("upload-success",this.uppy.getFile(i.file.uuid),r),Promise.resolve()}}),this.resumable.on("fileError",async(i,n)=>{let r=n;try{r=JSON.parse(n)}catch{}if((r==null?void 0:r.message)==="Unauthenticated."){const{access_token:a}=await Ys.refreshAccessToken();s.token=a}(r==null?void 0:r.error)==="invalid_request"&&(vs("access_token").value=null,vs("refresh_token").value=null,await Ys.refreshAccessToken()),this.uppy.emit("upload-error",this.uppy.getFile(i.file.uuid),r)})}install(){this.uppy.addUploader(this.upload)}uninstall(){this.resumable=null,this.uppy.removeUploader(this.upload)}}var fs={},vi=Array.from,wi=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function Uu(t,e){if(e){const s=t.querySelector(`[data-uppy-paneltype="${e}"]`);if(s)return s}return t}var fn=Uu;Object.defineProperty(fs,"__esModule",{value:!0});fs.forInline=Iu;fs.forModal=mn;const Bu=vi,Ru=wi,Nu=fn;function nr(t,e){const s=e[0];s&&(s.focus(),t.preventDefault())}function Du(t,e){const s=e[e.length-1];s&&(s.focus(),t.preventDefault())}function _u(t){return t.contains(document.activeElement)}function mn(t,e,s){const i=Nu(s,e),n=Bu(i.querySelectorAll(Ru)),r=n.indexOf(document.activeElement);_u(i)?t.shiftKey&&r===0?Du(t,n):!t.shiftKey&&r===n.length-1&&nr(t,n):nr(t,n)}function Iu(t,e,s){e===null||mn(t,e,s)}function Mu(t){if(!t.bytesUploaded)return 0;const e=Date.now()-t.uploadStarted;return t.bytesUploaded/(e/1e3)}var $u=Mu;function Lu(t){return t.bytesTotal-t.bytesUploaded}var zu=Lu,Fi={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"},fe={},gn={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function s(){for(var i=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var a=typeof r;if(a==="string"||a==="number")i.push(r);else if(Array.isArray(r)){if(r.length){var u=s.apply(null,r);u&&i.push(u)}}else if(a==="object"){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){i.push(r.toString());continue}for(var h in r)e.call(r,h)&&r[h]&&i.push(h)}}}return i.join(" ")}t.exports?(s.default=s,t.exports=s):window.classNames=s})()})(gn);var xe=gn.exports,ju=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var s=e<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s&&(e=-e),e<1)return(s?"-":"")+e+" B";var n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),i.length-1);e=Number(e/Math.pow(1024,n));var r=i[n];return e>=10||e%1===0?(s?"-":"")+e.toFixed(0)+" "+r:(s?"-":"")+e.toFixed(1)+" "+r};function Vu(t){const e=Math.floor(t/3600)%24,s=Math.floor(t/60)%60,i=Math.floor(t%60);return{hours:e,minutes:s,seconds:i}}var qu=Vu;const Hu=qu;function Wu(t){const e=Hu(t),s=e.hours===0?"":`${e.hours}h`,i=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${s}${i}${n}`}var Gu=Wu;Object.defineProperty(fe,"__esModule",{value:!0});fe.CancelBtn=ed;fe.DoneBtn=sd;fe.LoadingSpinner=Si;fe.PauseResumeButton=td;fe.ProgressBarComplete=od;fe.ProgressBarError=ld;fe.ProgressBarProcessing=id;fe.ProgressBarUploading=ad;fe.ProgressDetails=bn;fe.RetryBtn=Zu;fe.UploadBtn=Qu;var R=j;const yn=xe,Ku=$r,ar=ju,Xu=Gu,Ju=Fi,Yu="Â·",or=()=>` ${Yu} `;function Qu(t){const{newFiles:e,isUploadStarted:s,recoveredState:i,i18n:n,uploadState:r,isSomeGhost:a,startUpload:u}=t,h=yn("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":r===Ju.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":a}),c=e&&s&&!i?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return(0,R.h)("button",{type:"button",className:h,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:u,disabled:a,"data-uppy-super-focusable":!0},c)}function Zu(t){const{i18n:e,uppy:s}=t;return(0,R.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>s.retryAll(),"data-uppy-super-focusable":!0},(0,R.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},(0,R.h)("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function ed(t){const{i18n:e,uppy:s}=t;return(0,R.h)("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>s.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},(0,R.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},(0,R.h)("g",{fill:"none",fillRule:"evenodd"},(0,R.h)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),(0,R.h)("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function td(t){const{isAllPaused:e,i18n:s,isAllComplete:i,resumableUploads:n,uppy:r}=t,a=s(e?"resume":"pause");function u(){return i?null:n?e?r.resumeAll():r.pauseAll():r.cancelAll()}return(0,R.h)("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:u,"data-uppy-super-focusable":!0},(0,R.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},(0,R.h)("g",{fill:"none",fillRule:"evenodd"},(0,R.h)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),(0,R.h)("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function sd(t){const{i18n:e,doneButtonHandler:s}=t;return(0,R.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:s,"data-uppy-super-focusable":!0},e("done"))}function Si(){return(0,R.h)("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},(0,R.h)("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function id(t){const{progress:e}=t,{value:s,mode:i,message:n}=e,r=Math.round(s*100),a="Â·";return(0,R.h)("div",{className:"uppy-StatusBar-content"},(0,R.h)(Si,null),i==="determinate"?`${r}% ${a} `:"",n)}function bn(t){const{numUploads:e,complete:s,totalUploadedSize:i,totalSize:n,totalETA:r,i18n:a}=t,u=e>1;return(0,R.h)("div",{className:"uppy-StatusBar-statusSecondary"},u&&a("filesUploadedOfTotal",{complete:s,smart_count:e}),(0,R.h)("span",{className:"uppy-StatusBar-additionalInfo"},u&&or(),a("dataUploadedOfTotal",{complete:ar(i),total:ar(n)}),or(),a("xTimeLeft",{time:Xu(r)})))}function vn(t){const{i18n:e,complete:s,numUploads:i}=t;return(0,R.h)("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:s,smart_count:i}))}function rd(t){const{i18n:e,newFiles:s,startUpload:i}=t,n=yn("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return(0,R.h)("div",{className:"uppy-StatusBar-statusSecondary"},(0,R.h)("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:s})),(0,R.h)("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:s}),onClick:i},e("upload")))}const nd=Ku(bn,500,{leading:!0,trailing:!0});function ad(t){const{i18n:e,supportsUploadProgress:s,totalProgress:i,showProgressDetails:n,isUploadStarted:r,isAllComplete:a,isAllPaused:u,newFiles:h,numUploads:c,complete:y,totalUploadedSize:v,totalSize:P,totalETA:O,startUpload:d}=t,m=h&&r;if(!r||a)return null;const w=e(u?"paused":"uploading");function g(){return!u&&!m&&n?s?(0,R.h)(nd,{numUploads:c,complete:y,totalUploadedSize:v,totalSize:P,totalETA:O,i18n:e}):(0,R.h)(vn,{i18n:e,complete:y,numUploads:c}):null}return(0,R.h)("div",{className:"uppy-StatusBar-content","aria-label":w,title:w},u?null:(0,R.h)(Si,null),(0,R.h)("div",{className:"uppy-StatusBar-status"},(0,R.h)("div",{className:"uppy-StatusBar-statusPrimary"},s?`${w}: ${i}%`:w),g(),m?(0,R.h)(rd,{i18n:e,newFiles:h,startUpload:d}):null))}function od(t){const{i18n:e}=t;return(0,R.h)("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},(0,R.h)("div",{className:"uppy-StatusBar-status"},(0,R.h)("div",{className:"uppy-StatusBar-statusPrimary"},(0,R.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},(0,R.h)("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function ld(t){const{error:e,i18n:s,complete:i,numUploads:n}=t;function r(){const a=`${s("uploadFailed")} 

 ${e}`;alert(a)}return(0,R.h)("div",{className:"uppy-StatusBar-content",title:s("uploadFailed")},(0,R.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},(0,R.h)("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),(0,R.h)("div",{className:"uppy-StatusBar-status"},(0,R.h)("div",{className:"uppy-StatusBar-statusPrimary"},s("uploadFailed"),(0,R.h)("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":s("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:r,type:"button"},"?")),(0,R.h)(vn,{i18n:s,complete:i,numUploads:n})))}function ud(t){const e=[];let s,i;for(const{progress:r}of Object.values(t)){const{preprocess:a,postprocess:u}=r;i==null&&(a||u)&&({mode:s,message:i}=a||u),(a==null?void 0:a.mode)==="determinate"&&e.push(a.value),(u==null?void 0:u.mode)==="determinate"&&e.push(u.value)}const n=e.reduce((r,a)=>r+a/e.length,0);return{mode:s,message:i,value:n}}var dd=ud,ge=j,_e=fe;const lr=xe,cd=Fi,Us=dd,{STATE_ERROR:ur,STATE_WAITING:dr,STATE_PREPROCESSING:Bs,STATE_UPLOADING:Ht,STATE_POSTPROCESSING:Rs,STATE_COMPLETE:Wt}=cd;function hd(t){const{newFiles:e,allowNewUpload:s,isUploadInProgress:i,isAllPaused:n,resumableUploads:r,error:a,hideUploadButton:u,hidePauseResumeButton:h,hideCancelButton:c,hideRetryButton:y,recoveredState:v,uploadState:P,totalProgress:O,files:d,supportsUploadProgress:m,hideAfterFinish:w,isSomeGhost:g,doneButtonHandler:p,isUploadStarted:B,i18n:E,startUpload:A,uppy:C,isAllComplete:U,showProgressDetails:D,numUploads:M,complete:V,totalSize:oe,totalETA:X,totalUploadedSize:ue}=t;function me(){switch(P){case Rs:case Bs:{const Oe=Us(d);return Oe.mode==="determinate"?Oe.value*100:O}case ur:return null;case Ht:return m?O:null;default:return O}}function Ke(){switch(P){case Rs:case Bs:{const{mode:Oe}=Us(d);return Oe==="indeterminate"}case Ht:return!m;default:return!1}}function de(){if(v)return!1;switch(P){case dr:return u||e===0;case Wt:return w;default:return!1}}const L=me(),G=de(),ve=L??100,at=!a&&e&&!i&&!n&&s&&!u,yt=!c&&P!==dr&&P!==Wt,bt=r&&!h&&P===Ht,vt=a&&!U&&!y,wt=p&&P===Wt,ze=lr("uppy-StatusBar-progress",{"is-indeterminate":Ke()}),Ue=lr("uppy-StatusBar",`is-${P}`,{"has-ghosts":g});return(0,ge.h)("div",{className:Ue,"aria-hidden":G},(0,ge.h)("div",{className:ze,style:{width:`${ve}%`},role:"progressbar","aria-label":`${ve}%`,"aria-valuetext":`${ve}%`,"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":L}),(()=>{switch(P){case Bs:case Rs:return(0,ge.h)(_e.ProgressBarProcessing,{progress:Us(d)});case Wt:return(0,ge.h)(_e.ProgressBarComplete,{i18n:E});case ur:return(0,ge.h)(_e.ProgressBarError,{error:a,i18n:E,numUploads:M,complete:V});case Ht:return(0,ge.h)(_e.ProgressBarUploading,{i18n:E,supportsUploadProgress:m,totalProgress:O,showProgressDetails:D,isUploadStarted:B,isAllComplete:U,isAllPaused:n,newFiles:e,numUploads:M,complete:V,totalUploadedSize:ue,totalSize:oe,totalETA:X,startUpload:A});default:return null}})(),(0,ge.h)("div",{className:"uppy-StatusBar-actions"},v||at?(0,ge.h)(_e.UploadBtn,{newFiles:e,isUploadStarted:B,recoveredState:v,i18n:E,isSomeGhost:g,startUpload:A,uploadState:P}):null,vt?(0,ge.h)(_e.RetryBtn,{i18n:E,uppy:C}):null,bt?(0,ge.h)(_e.PauseResumeButton,{isAllPaused:n,i18n:E,isAllComplete:U,resumableUploads:r,uppy:C}):null,yt?(0,ge.h)(_e.CancelBtn,{i18n:E,uppy:C}):null,wt?(0,ge.h)(_e.DoneBtn,{i18n:E,doneButtonHandler:p}):null))}var pd=hd,fd={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},md=ft;const gd=$u,yd=zu,bd=Wr,Ee=Fi,vd=pd,wd={version:"2.2.2"},Fd=fd;function Sd(t){let e=0;return t.forEach(s=>{e+=gd(s.progress)}),e}function Pd(t){const e=Sd(t);if(e===0)return 0;const s=t.reduce((i,n)=>i+yd(n.progress),0);return Math.round(s/e*10)/10}function Od(t,e,s,i){if(t&&!e)return Ee.STATE_ERROR;if(e)return Ee.STATE_COMPLETE;if(s)return Ee.STATE_WAITING;let n=Ee.STATE_WAITING;const r=Object.keys(i);for(let a=0;a<r.length;a++){const{progress:u}=i[r[a]];if(u.uploadStarted&&!u.uploadComplete)return Ee.STATE_UPLOADING;u.preprocess&&n!==Ee.STATE_UPLOADING&&(n=Ee.STATE_PREPROCESSING),u.postprocess&&n!==Ee.STATE_UPLOADING&&n!==Ee.STATE_PREPROCESSING&&(n=Ee.STATE_POSTPROCESSING)}return n}let wn=class extends md.UIPlugin{constructor(e,s){super(e,s),this.startUpload=()=>{const{recoveredState:n}=this.uppy.getState();if(n){this.uppy.emit("restore-confirmed");return}return this.uppy.upload().catch(()=>{})},this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=Fd;const i={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};this.opts={...i,...s},this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:s,files:i,allowNewUpload:n,totalProgress:r,error:a,recoveredState:u}=e,{newFiles:h,startedFiles:c,completeFiles:y,inProgressNotPausedFiles:v,isUploadStarted:P,isAllComplete:O,isAllErrored:d,isAllPaused:m,isUploadInProgress:w,isSomeGhost:g}=this.uppy.getObjectOfFilesPerState(),p=u?Object.values(i):h,B=Pd(v),E=!!s.resumableUploads,A=s.uploadProgress!==!1;let C=0,U=0;return c.forEach(D=>{C+=D.progress.bytesTotal||0,U+=D.progress.bytesUploaded||0}),vd({error:a,uploadState:Od(a,O,u,e.files||{}),allowNewUpload:n,totalProgress:r,totalSize:C,totalUploadedSize:U,isAllComplete:!1,isAllPaused:m,isAllErrored:d,isUploadStarted:P,isUploadInProgress:w,isSomeGhost:g,recoveredState:u,complete:y.length,newFiles:p.length,numUploads:c.length,totalETA:B,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:E,supportsUploadProgress:A,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const e=this.el;bd(e)||(e.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}};wn.VERSION=wd.version;var Ed=wn,Td=Ed,Ns=j;const cr=300;let Cd=class extends Ns.Component{constructor(){super(...arguments),this.ref=(0,Ns.createRef)()}componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,cr)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,cr)}render(){const{children:e}=this.props;return(0,Ns.h)("div",{className:"uppy-Informer-animated",ref:this.ref},e)}};var Ad=Cd,Ie=j;function kd(t,e){return Object.assign(t,e)}function xd(t,e){var s;return(s=t==null?void 0:t.key)!=null?s:e}function Ud(t,e){const s=t._ptgLinkedRefs||(t._ptgLinkedRefs={});return s[e]||(s[e]=i=>{t.refs[e]=i})}function xt(t){const e={};for(let s=0;s<t.length;s++)if(t[s]!=null){const i=xd(t[s],s.toString(36));e[i]=t[s]}return e}function Bd(t,e){t=t||{},e=e||{};const s=a=>e.hasOwnProperty(a)?e[a]:t[a],i={};let n=[];for(const a in t)e.hasOwnProperty(a)?n.length&&(i[a]=n,n=[]):n.push(a);const r={};for(const a in e){if(i.hasOwnProperty(a))for(let u=0;u<i[a].length;u++){const h=i[a][u];r[i[a][u]]=s(h)}r[a]=s(a)}for(let a=0;a<n.length;a++)r[n[a]]=s(n[a]);return r}const Rd=t=>t;let Fn=class extends Ie.Component{constructor(e,s){super(e,s),this.refs={},this.state={children:xt((0,Ie.toChildArray)((0,Ie.toChildArray)(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const e=this.state.children;for(const s in e)e[s]&&this.performAppear(s)}componentWillReceiveProps(e){const s=xt((0,Ie.toChildArray)(e.children)||[]),i=this.state.children;this.setState(r=>({children:Bd(r.children,s)}));let n;for(n in s)if(s.hasOwnProperty(n)){const r=i&&i.hasOwnProperty(n);s[n]&&r&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):s[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in i)if(i.hasOwnProperty(n)){const r=s&&s.hasOwnProperty(n);i[n]&&!r&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);const{keysToLeave:s}=this;this.keysToLeave=[],s.forEach(this.performLeave)}_finishAbort(e){const s=this.keysToAbortLeave.indexOf(e);s!==-1&&this.keysToAbortLeave.splice(s,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s.componentWillAppear?s.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){const s=this.refs[e];s.componentDidAppear&&s.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const i=xt((0,Ie.toChildArray)(this.props.children)||[]);(!i||!i.hasOwnProperty(e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;const s=this.refs[e];s.componentWillEnter?s.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){const s=this.refs[e];s.componentDidEnter&&s.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);const i=xt((0,Ie.toChildArray)(this.props.children)||[]);(!i||!i.hasOwnProperty(e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;const i=this.refs[e];i.componentWillLeave?i.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;const i=this.refs[e];i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[e];const n=xt((0,Ie.toChildArray)(this.props.children)||[]);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{const r=kd({},this.state.children);delete r[e],this.setState({children:r})}}render(e,s){let{childFactory:i,transitionLeave:n,transitionName:r,transitionAppear:a,transitionEnter:u,transitionLeaveTimeout:h,transitionEnterTimeout:c,transitionAppearTimeout:y,component:v,...P}=e,{children:O}=s;const d=[];for(const m in O)if(O.hasOwnProperty(m)){const w=O[m];if(w){const g=Ud(this,m),p=(0,Ie.cloneElement)(i(w),{ref:g,key:m});d.push(p)}}return(0,Ie.h)(v,P,d)}};Fn.defaultProps={component:"span",childFactory:Rd};var Nd=Fn,Ut=j,Dd=ft;const _d=Ad,Id=Nd,Md={version:"2.1.1"};let Sn=class extends Dd.UIPlugin{constructor(e,s){super(e,s),this.render=n=>(0,Ut.h)("div",{className:"uppy uppy-Informer"},(0,Ut.h)(Id,null,n.info.map(r=>(0,Ut.h)(_d,{key:r.message},(0,Ut.h)("p",{role:"alert"},r.message," ",r.details&&(0,Ut.h)("span",{"aria-label":r.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${r.message} 

 ${r.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer";const i={};this.opts={...i,...s}}install(){const{target:e}=this.opts;e&&this.mount(e,this)}};Sn.VERSION=Md.version;var $d=Sn,Ld=$d,ri={exports:{}};(function(t,e){(function(s,i){i(e)})(Pe,function(s){function i(S,o,l){return o in S?Object.defineProperty(S,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):S[o]=l,S}var n=typeof self<"u"?self:Pe;const r=typeof navigator<"u",a=r&&typeof HTMLImageElement>"u",u=!(typeof Pe>"u"||typeof process>"u"||!process.versions||!process.versions.node),h=n.Buffer,c=!!h,y=S=>S!==void 0;function v(S){return S===void 0||(S instanceof Map?S.size===0:Object.values(S).filter(y).length===0)}function P(S){let o=new Error(S);throw delete o.stack,o}function O(S){let o=function(l){let f=0;return l.ifd0.enabled&&(f+=1024),l.exif.enabled&&(f+=2048),l.makerNote&&(f+=2048),l.userComment&&(f+=1024),l.gps.enabled&&(f+=512),l.interop.enabled&&(f+=100),l.ifd1.enabled&&(f+=1024),f+2048}(S);return S.jfif.enabled&&(o+=50),S.xmp.enabled&&(o+=2e4),S.iptc.enabled&&(o+=14e3),S.icc.enabled&&(o+=6e3),o}const d=S=>String.fromCharCode.apply(null,S),m=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class w{static from(o,l){return o instanceof this&&o.le===l?o:new w(o,void 0,void 0,l)}constructor(o,l=0,f,b){if(typeof b=="boolean"&&(this.le=b),Array.isArray(o)&&(o=new Uint8Array(o)),o===0)this.byteOffset=0,this.byteLength=0;else if(o instanceof ArrayBuffer){f===void 0&&(f=o.byteLength-l);let T=new DataView(o,l,f);this._swapDataView(T)}else if(o instanceof Uint8Array||o instanceof DataView||o instanceof w){f===void 0&&(f=o.byteLength-l),(l+=o.byteOffset)+f>o.byteOffset+o.byteLength&&P("Creating view outside of available memory in ArrayBuffer");let T=new DataView(o.buffer,l,f);this._swapDataView(T)}else if(typeof o=="number"){let T=new DataView(new ArrayBuffer(o));this._swapDataView(T)}else P("Invalid input argument for BufferView: "+o)}_swapArrayBuffer(o){this._swapDataView(new DataView(o))}_swapBuffer(o){this._swapDataView(new DataView(o.buffer,o.byteOffset,o.byteLength))}_swapDataView(o){this.dataView=o,this.buffer=o.buffer,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength}_lengthToEnd(o){return this.byteLength-o}set(o,l,f=w){return o instanceof DataView||o instanceof w?o=new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer&&(o=new Uint8Array(o)),o instanceof Uint8Array||P("BufferView.set(): Invalid data argument."),this.toUint8().set(o,l),new f(this,l,o.byteLength)}subarray(o,l){return l=l||this._lengthToEnd(o),new w(this,o,l)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(o,l){return new Uint8Array(this.buffer,this.byteOffset+o,l)}getString(o=0,l=this.byteLength){return b=this.getUint8Array(o,l),m?m.decode(b):c?Buffer.from(b).toString("utf8"):decodeURIComponent(escape(d(b)));var b}getLatin1String(o=0,l=this.byteLength){let f=this.getUint8Array(o,l);return d(f)}getUnicodeString(o=0,l=this.byteLength){const f=[];for(let b=0;b<l&&o+b<this.byteLength;b+=2)f.push(this.getUint16(o+b));return d(f)}getInt8(o){return this.dataView.getInt8(o)}getUint8(o){return this.dataView.getUint8(o)}getInt16(o,l=this.le){return this.dataView.getInt16(o,l)}getInt32(o,l=this.le){return this.dataView.getInt32(o,l)}getUint16(o,l=this.le){return this.dataView.getUint16(o,l)}getUint32(o,l=this.le){return this.dataView.getUint32(o,l)}getFloat32(o,l=this.le){return this.dataView.getFloat32(o,l)}getFloat64(o,l=this.le){return this.dataView.getFloat64(o,l)}getFloat(o,l=this.le){return this.dataView.getFloat32(o,l)}getDouble(o,l=this.le){return this.dataView.getFloat64(o,l)}getUintBytes(o,l,f){switch(l){case 1:return this.getUint8(o,f);case 2:return this.getUint16(o,f);case 4:return this.getUint32(o,f);case 8:return this.getUint64&&this.getUint64(o,f)}}getUint(o,l,f){switch(l){case 8:return this.getUint8(o,f);case 16:return this.getUint16(o,f);case 32:return this.getUint32(o,f);case 64:return this.getUint64&&this.getUint64(o,f)}}toString(o){return this.dataView.toString(o,this.constructor.name)}ensureChunk(){}}function g(S,o){P(`${S} '${o}' was not loaded, try using full build of exifr.`)}class p extends Map{constructor(o){super(),this.kind=o}get(o,l){return this.has(o)||g(this.kind,o),l&&(o in l||function(f,b){P(`Unknown ${f} '${b}'.`)}(this.kind,o),l[o].enabled||g(this.kind,o)),super.get(o)}keyList(){return Array.from(this.keys())}}var B=new p("file parser"),E=new p("segment parser"),A=new p("file reader");let C=n.fetch;const U="Invalid input argument";function D(S,o){return(l=S).startsWith("data:")||l.length>1e4?V(S,o,"base64"):u&&S.includes("://")?M(S,o,"url",oe):u?V(S,o,"fs"):r?M(S,o,"url",oe):void P(U);var l}async function M(S,o,l,f){return A.has(l)?V(S,o,l):f?async function(b,T){let k=await T(b);return new w(k)}(S,f):void P(`Parser ${l} is not loaded`)}async function V(S,o,l){let f=new(A.get(l))(S,o);return await f.read(),f}const oe=S=>C(S).then(o=>o.arrayBuffer()),X=S=>new Promise((o,l)=>{let f=new FileReader;f.onloadend=()=>o(f.result||new ArrayBuffer),f.onerror=l,f.readAsArrayBuffer(S)});class ue extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function me(S,o,l){let f=new ue;for(let[b,T]of l)f.set(b,T);if(Array.isArray(o))for(let b of o)S.set(b,f);else S.set(o,f);return f}function Ke(S,o,l){let f,b=S.get(o);for(f of l)b.set(f[0],f[1])}const de=new Map,L=new Map,G=new Map,ve=37500,at=37510,yt=33723,bt=34675,vt=34665,wt=34853,ze=40965,Ue=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Oe=["jfif","xmp","icc","iptc","ihdr"],ot=["tiff",...Oe],K=["ifd0","ifd1","exif","gps","interop"],Xe=[...ot,...K],Je=["makerNote","userComment"],Ft=["translateKeys","translateValues","reviveValues","multiSegment"],Ye=[...Ft,"sanitize","mergeOutput","silentErrors"];class Oi{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class St extends Oi{get needed(){return this.enabled||this.deps.size>0}constructor(o,l,f,b){if(super(),i(this,"enabled",!1),i(this,"skip",new Set),i(this,"pick",new Set),i(this,"deps",new Set),i(this,"translateKeys",!1),i(this,"translateValues",!1),i(this,"reviveValues",!1),this.key=o,this.enabled=l,this.parse=this.enabled,this.applyInheritables(b),this.canBeFiltered=K.includes(o),this.canBeFiltered&&(this.dict=de.get(o)),f!==void 0)if(Array.isArray(f))this.parse=this.enabled=!0,this.canBeFiltered&&f.length>0&&this.translateTagSet(f,this.pick);else if(typeof f=="object"){if(this.enabled=!0,this.parse=f.parse!==!1,this.canBeFiltered){let{pick:T,skip:k}=f;T&&T.length>0&&this.translateTagSet(T,this.pick),k&&k.length>0&&this.translateTagSet(k,this.skip)}this.applyInheritables(f)}else f===!0||f===!1?this.parse=this.enabled=f:P(`Invalid options argument: ${f}`)}applyInheritables(o){let l,f;for(l of Ft)f=o[l],f!==void 0&&(this[l]=f)}translateTagSet(o,l){if(this.dict){let f,b,{tagKeys:T,tagValues:k}=this.dict;for(f of o)typeof f=="string"?(b=k.indexOf(f),b===-1&&(b=T.indexOf(Number(f))),b!==-1&&l.add(Number(T[b]))):l.add(f)}else for(let f of o)l.add(f)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Vt(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Vt(this.pick,this.deps)}}var ae={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Ei=new Map;class lt extends Oi{static useCached(o){let l=Ei.get(o);return l!==void 0||(l=new this(o),Ei.set(o,l)),l}constructor(o){super(),o===!0?this.setupFromTrue():o===void 0?this.setupFromUndefined():Array.isArray(o)?this.setupFromArray(o):typeof o=="object"?this.setupFromObject(o):P(`Invalid options argument ${o}`),this.firstChunkSize===void 0&&(this.firstChunkSize=r?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let o;for(o of Ue)this[o]=ae[o];for(o of Ye)this[o]=ae[o];for(o of Je)this[o]=ae[o];for(o of Xe)this[o]=new St(o,ae[o],void 0,this)}setupFromTrue(){let o;for(o of Ue)this[o]=ae[o];for(o of Ye)this[o]=ae[o];for(o of Je)this[o]=!0;for(o of Xe)this[o]=new St(o,!0,void 0,this)}setupFromArray(o){let l;for(l of Ue)this[l]=ae[l];for(l of Ye)this[l]=ae[l];for(l of Je)this[l]=ae[l];for(l of Xe)this[l]=new St(l,!1,void 0,this);this.setupGlobalFilters(o,void 0,K)}setupFromObject(o){let l;for(l of(K.ifd0=K.ifd0||K.image,K.ifd1=K.ifd1||K.thumbnail,Object.assign(this,o),Ue))this[l]=ms(o[l],ae[l]);for(l of Ye)this[l]=ms(o[l],ae[l]);for(l of Je)this[l]=ms(o[l],ae[l]);for(l of ot)this[l]=new St(l,ae[l],o[l],this);for(l of K)this[l]=new St(l,ae[l],o[l],this.tiff);this.setupGlobalFilters(o.pick,o.skip,K,Xe),o.tiff===!0?this.batchEnableWithBool(K,!0):o.tiff===!1?this.batchEnableWithUserValue(K,o):Array.isArray(o.tiff)?this.setupGlobalFilters(o.tiff,void 0,K):typeof o.tiff=="object"&&this.setupGlobalFilters(o.tiff.pick,o.tiff.skip,K)}batchEnableWithBool(o,l){for(let f of o)this[f].enabled=l}batchEnableWithUserValue(o,l){for(let f of o){let b=l[f];this[f].enabled=b!==!1&&b!==void 0}}setupGlobalFilters(o,l,f,b=f){if(o&&o.length){for(let k of b)this[k].enabled=!1;let T=Ti(o,f);for(let[k,N]of T)Vt(this[k].pick,N),this[k].enabled=!0}else if(l&&l.length){let T=Ti(l,f);for(let[k,N]of T)Vt(this[k].skip,N)}}filterNestedSegmentTags(){let{ifd0:o,exif:l,xmp:f,iptc:b,icc:T}=this;this.makerNote?l.deps.add(ve):l.skip.add(ve),this.userComment?l.deps.add(at):l.skip.add(at),f.enabled||o.skip.add(700),b.enabled||o.skip.add(yt),T.enabled||o.skip.add(bt)}traverseTiffDependencyTree(){let{ifd0:o,exif:l,gps:f,interop:b}=this;b.needed&&(l.deps.add(ze),o.deps.add(ze)),l.needed&&o.deps.add(vt),f.needed&&o.deps.add(wt),this.tiff.enabled=K.some(T=>this[T].enabled===!0)||this.makerNote||this.userComment;for(let T of K)this[T].finalizeFilters()}get onlyTiff(){return!Oe.map(o=>this[o].enabled).some(o=>o===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let o of ot)this[o].enabled&&!E.has(o)&&g("segment parser",o)}}function Ti(S,o){let l,f,b,T,k=[];for(b of o){for(T of(l=de.get(b),f=[],l))(S.includes(T[0])||S.includes(T[1]))&&f.push(T[0]);f.length&&k.push([b,f])}return k}function ms(S,o){return S!==void 0?S:o!==void 0?o:void 0}function Vt(S,o){for(let l of o)S.add(l)}i(lt,"default",ae);class Qe{constructor(o){i(this,"parsers",{}),i(this,"output",{}),i(this,"errors",[]),i(this,"pushToErrors",l=>this.errors.push(l)),this.options=lt.useCached(o)}async read(o){this.file=await function(l,f){return typeof l=="string"?D(l,f):r&&!a&&l instanceof HTMLImageElement?D(l.src,f):l instanceof Uint8Array||l instanceof ArrayBuffer||l instanceof DataView?new w(l):r&&l instanceof Blob?M(l,f,"blob",X):void P(U)}(o,this.options)}setup(){if(this.fileParser)return;let{file:o}=this,l=o.getUint16(0);for(let[f,b]of B)if(b.canHandle(o,l))return this.fileParser=new b(this.options,this.file,this.parsers),o[f]=!0;this.file.close&&this.file.close(),P("Unknown file format")}async parse(){let{output:o,errors:l}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),l.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&l.length>0&&(o.errors=l),v(f=o)?void 0:f;var f}async executeParsers(){let{output:o}=this;await this.fileParser.parse();let l=Object.values(this.parsers).map(async f=>{let b=await f.parse();f.assignToOutput(o,b)});this.options.silentErrors&&(l=l.map(f=>f.catch(this.pushToErrors))),await Promise.all(l)}async extractThumbnail(){this.setup();let{options:o,file:l}=this,f=E.get("tiff",o);var b;if(l.tiff?b={start:0,type:"tiff"}:l.jpeg&&(b=await this.fileParser.getOrFindSegment("tiff")),b===void 0)return;let T=await this.fileParser.ensureSegmentChunk(b),k=this.parsers.tiff=new f(T,o,l),N=await k.extractThumbnail();return l.close&&l.close(),N}}async function gs(S,o){let l=new Qe(o);return await l.read(S),l.parse()}var Rn=Object.freeze({__proto__:null,parse:gs,Exifr:Qe,fileParsers:B,segmentParsers:E,fileReaders:A,tagKeys:de,tagValues:L,tagRevivers:G,createDictionary:me,extendDictionary:Ke,fetchUrlAsArrayBuffer:oe,readBlobAsArrayBuffer:X,chunkedProps:Ue,otherSegments:Oe,segments:ot,tiffBlocks:K,segmentsAndBlocks:Xe,tiffExtractables:Je,inheritables:Ft,allFormatters:Ye,Options:lt});class ut{static findPosition(o,l){let f=o.getUint16(l+2)+2,b=typeof this.headerLength=="function"?this.headerLength(o,l,f):this.headerLength,T=l+b,k=f-b;return{offset:l,length:f,headerLength:b,start:T,size:k,end:T+k}}static parse(o,l={}){return new this(o,new lt({[this.type]:l}),o).parse()}normalizeInput(o){return o instanceof w?o:new w(o)}constructor(o,l={},f){i(this,"errors",[]),i(this,"raw",new Map),i(this,"handleError",b=>{if(!this.options.silentErrors)throw b;this.errors.push(b.message)}),this.chunk=this.normalizeInput(o),this.file=f,this.type=this.constructor.type,this.globalOptions=this.options=l,this.localOptions=l[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(o,l){let f=G.get(l),b=L.get(l),T=de.get(l),k=this.options[l],N=k.reviveValues&&!!f,J=k.translateValues&&!!b,q=k.translateKeys&&!!T,Y={};for(let[ie,Be]of o)N&&f.has(ie)?Be=f.get(ie)(Be):J&&b.has(ie)&&(Be=this.translateValue(Be,b.get(ie))),q&&T.has(ie)&&(ie=T.get(ie)||ie),Y[ie]=Be;return Y}translateValue(o,l){return l[o]||l.DEFAULT||o}assignToOutput(o,l){this.assignObjectToOutput(o,this.constructor.type,l)}assignObjectToOutput(o,l,f){if(this.globalOptions.mergeOutput)return Object.assign(o,f);o[l]?Object.assign(o[l],f):o[l]=f}}i(ut,"headerLength",4),i(ut,"type",void 0),i(ut,"multiSegment",!1),i(ut,"canHandle",()=>!1);function Nn(S){return S===192||S===194||S===196||S===219||S===221||S===218||S===254}function Dn(S){return S>=224&&S<=239}function _n(S,o,l){for(let[f,b]of E)if(b.canHandle(S,o,l))return f}class Ci extends class{constructor(o,l,f){i(this,"errors",[]),i(this,"ensureSegmentChunk",async b=>{let T=b.start,k=b.size||65536;if(this.file.chunked)if(this.file.available(T,k))b.chunk=this.file.subarray(T,k);else try{b.chunk=await this.file.readChunk(T,k)}catch(N){P(`Couldn't read segment: ${JSON.stringify(b)}. ${N.message}`)}else this.file.byteLength>T+k?b.chunk=this.file.subarray(T,k):b.size===void 0?b.chunk=this.file.subarray(T):P("Segment unreachable: "+JSON.stringify(b));return b.chunk}),this.extendOptions&&this.extendOptions(o),this.options=o,this.file=l,this.parsers=f}injectSegment(o,l){this.options[o].enabled&&this.createParser(o,l)}createParser(o,l){let f=new(E.get(o))(l,this.options,this.file);return this.parsers[o]=f}createParsers(o){for(let l of o){let{type:f,chunk:b}=l,T=this.options[f];if(T&&T.enabled){let k=this.parsers[f];k&&k.append||k||this.createParser(f,b)}}}async readSegments(o){let l=o.map(this.ensureSegmentChunk);await Promise.all(l)}}{constructor(...o){super(...o),i(this,"appSegments",[]),i(this,"jpegSegments",[]),i(this,"unknownSegments",[])}static canHandle(o,l){return l===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(o){o===!0?(this.findAll=!0,this.wanted=new Set(E.keyList())):(o=o===void 0?E.keyList().filter(l=>this.options[l].enabled):o.filter(l=>this.options[l].enabled&&E.has(l)),this.findAll=!1,this.remaining=new Set(o),this.wanted=new Set(o)),this.unfinishedMultiSegment=!1}async findAppSegments(o=0,l){this.setupSegmentFinderArgs(l);let{file:f,findAll:b,wanted:T,remaining:k}=this;if(!b&&this.file.chunked&&(b=Array.from(T).some(N=>{let J=E.get(N),q=this.options[N];return J.multiSegment&&q.multiSegment}),b&&await this.file.readWhole()),o=this.findAppSegmentsInRange(o,f.byteLength),!this.options.onlyTiff&&f.chunked){let N=!1;for(;k.size>0&&!N&&(f.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:J}=f,q=this.appSegments.some(Y=>!this.file.available(Y.offset||Y.start,Y.length||Y.size));if(N=o>J&&!q?!await f.readNextChunk(o):!await f.readNextChunk(J),(o=this.findAppSegmentsInRange(o,f.byteLength))===void 0)return}}}findAppSegmentsInRange(o,l){l-=2;let f,b,T,k,N,J,{file:q,findAll:Y,wanted:ie,remaining:Be,options:qt}=this;for(;o<l;o++)if(q.getUint8(o)===255){if(f=q.getUint8(o+1),Dn(f)){if(b=q.getUint16(o+2),T=_n(q,o,b),T&&ie.has(T)&&(k=E.get(T),N=k.findPosition(q,o),J=qt[T],N.type=T,this.appSegments.push(N),!Y&&(k.multiSegment&&J.multiSegment?(this.unfinishedMultiSegment=N.chunkNumber<N.chunkCount,this.unfinishedMultiSegment||Be.delete(T)):Be.delete(T),Be.size===0)))break;qt.recordUnknownSegments&&(N=ut.findPosition(q,o),N.marker=f,this.unknownSegments.push(N)),o+=b+1}else if(Nn(f)){if(b=q.getUint16(o+2),f===218&&qt.stopAfterSos!==!1)return;qt.recordJpegSegments&&this.jpegSegments.push({offset:o,length:b,marker:f}),o+=b+1}}return o}mergeMultiSegments(){if(!this.appSegments.some(l=>l.multiSegment))return;let o=function(l,f){let b,T,k,N=new Map;for(let J=0;J<l.length;J++)b=l[J],T=b[f],N.has(T)?k=N.get(T):N.set(T,k=[]),k.push(b);return Array.from(N)}(this.appSegments,"type");this.mergedAppSegments=o.map(([l,f])=>{let b=E.get(l,this.options);return b.handleMultiSegments?{type:l,chunk:b.handleMultiSegments(f)}:f[0]})}getSegment(o){return this.appSegments.find(l=>l.type===o)}async getOrFindSegment(o){let l=this.getSegment(o);return l===void 0&&(await this.findAppSegments(0,[o]),l=this.getSegment(o)),l}}i(Ci,"type","jpeg"),B.set("jpeg",Ci);const In=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Mn extends ut{parseHeader(){var o=this.chunk.getUint16();o===18761?this.le=!0:o===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(o,l,f=new Map){let{pick:b,skip:T}=this.options[l];b=new Set(b);let k=b.size>0,N=T.size===0,J=this.chunk.getUint16(o);o+=2;for(let q=0;q<J;q++){let Y=this.chunk.getUint16(o);if(k){if(b.has(Y)&&(f.set(Y,this.parseTag(o,Y,l)),b.delete(Y),b.size===0))break}else!N&&T.has(Y)||f.set(Y,this.parseTag(o,Y,l));o+=12}return f}parseTag(o,l,f){let{chunk:b}=this,T=b.getUint16(o+2),k=b.getUint32(o+4),N=In[T];if(N*k<=4?o+=8:o=b.getUint32(o+8),(T<1||T>13)&&P(`Invalid TIFF value type. block: ${f.toUpperCase()}, tag: ${l.toString(16)}, type: ${T}, offset ${o}`),o>b.byteLength&&P(`Invalid TIFF value offset. block: ${f.toUpperCase()}, tag: ${l.toString(16)}, type: ${T}, offset ${o} is outside of chunk size ${b.byteLength}`),T===1)return b.getUint8Array(o,k);if(T===2)return(J=function(q){for(;q.endsWith("\0");)q=q.slice(0,-1);return q}(J=b.getString(o,k)).trim())===""?void 0:J;var J;if(T===7)return b.getUint8Array(o,k);if(k===1)return this.parseTagValue(T,o);{let q=new(function(ie){switch(ie){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(T))(k),Y=N;for(let ie=0;ie<k;ie++)q[ie]=this.parseTagValue(T,o),o+=Y;return q}}parseTagValue(o,l){let{chunk:f}=this;switch(o){case 1:return f.getUint8(l);case 3:return f.getUint16(l);case 4:return f.getUint32(l);case 5:return f.getUint32(l)/f.getUint32(l+4);case 6:return f.getInt8(l);case 8:return f.getInt16(l);case 9:return f.getInt32(l);case 10:return f.getInt32(l)/f.getInt32(l+4);case 11:return f.getFloat(l);case 12:return f.getDouble(l);case 13:return f.getUint32(l);default:P(`Invalid tiff type ${o}`)}}}class ys extends Mn{static canHandle(o,l){return o.getUint8(l+1)===225&&o.getUint32(l+4)===1165519206&&o.getUint16(l+8)===0}async parse(){this.parseHeader();let{options:o}=this;return o.ifd0.enabled&&await this.parseIfd0Block(),o.exif.enabled&&await this.safeParse("parseExifBlock"),o.gps.enabled&&await this.safeParse("parseGpsBlock"),o.interop.enabled&&await this.safeParse("parseInteropBlock"),o.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(o){let l=this[o]();return l.catch!==void 0&&(l=l.catch(this.handleError)),l}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let o=this.chunk.getUint16(this.ifd0Offset),l=this.ifd0Offset+2+12*o;this.ifd1Offset=this.chunk.getUint32(l)}}parseBlock(o,l){let f=new Map;return this[l]=f,this.parseTags(o,l,f),f}async parseIfd0Block(){if(this.ifd0)return;let{file:o}=this;this.findIfd0Offset(),this.ifd0Offset<8&&P("Malformed EXIF data"),!o.chunked&&this.ifd0Offset>o.byteLength&&P(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${o.byteLength}`),o.tiff&&await o.ensureChunk(this.ifd0Offset,O(this.options));let l=this.parseBlock(this.ifd0Offset,"ifd0");return l.size!==0?(this.exifOffset=l.get(vt),this.interopOffset=l.get(ze),this.gpsOffset=l.get(wt),this.xmp=l.get(700),this.iptc=l.get(yt),this.icc=l.get(bt),this.options.sanitize&&(l.delete(vt),l.delete(ze),l.delete(wt),l.delete(700),l.delete(yt),l.delete(bt)),l):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,O(this.options));let o=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=o.get(ze)),this.makerNote=o.get(ve),this.userComment=o.get(at),this.options.sanitize&&(o.delete(ze),o.delete(ve),o.delete(at)),this.unpack(o,41728),this.unpack(o,41729),o}unpack(o,l){let f=o.get(l);f&&f.length===1&&o.set(l,f[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let o=this.parseBlock(this.gpsOffset,"gps");return o&&o.has(2)&&o.has(4)&&(o.set("latitude",Ai(...o.get(2),o.get(1))),o.set("longitude",Ai(...o.get(4),o.get(3)))),o}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(o=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||o))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let o=this.ifd1.get(513),l=this.ifd1.get(514);return this.chunk.getUint8Array(o,l)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let o,l,f,b={};for(l of K)if(o=this[l],!v(o))if(f=this.canTranslate?this.translateBlock(o,l):Object.fromEntries(o),this.options.mergeOutput){if(l==="ifd1")continue;Object.assign(b,f)}else b[l]=f;return this.makerNote&&(b.makerNote=this.makerNote),this.userComment&&(b.userComment=this.userComment),b}assignToOutput(o,l){if(this.globalOptions.mergeOutput)Object.assign(o,l);else for(let[f,b]of Object.entries(l))this.assignObjectToOutput(o,f,b)}}function Ai(S,o,l,f){var b=S+o/60+l/3600;return f!=="S"&&f!=="W"||(b*=-1),b}i(ys,"type","tiff"),i(ys,"headerLength",10),E.set("tiff",ys);var $n=Object.freeze({__proto__:null,default:Rn,Exifr:Qe,fileParsers:B,segmentParsers:E,fileReaders:A,tagKeys:de,tagValues:L,tagRevivers:G,createDictionary:me,extendDictionary:Ke,fetchUrlAsArrayBuffer:oe,readBlobAsArrayBuffer:X,chunkedProps:Ue,otherSegments:Oe,segments:ot,tiffBlocks:K,segmentsAndBlocks:Xe,tiffExtractables:Je,inheritables:Ft,allFormatters:Ye,Options:lt,parse:gs});const bs={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},ki=Object.assign({},bs,{firstChunkSize:4e4,gps:[1,2,3,4]}),xi=Object.assign({},bs,{tiff:!1,ifd1:!0,mergeOutput:!1}),Ui=Object.assign({},bs,{firstChunkSize:4e4,ifd0:[274]});async function Bi(S){let o=new Qe(Ui);await o.read(S);let l=await o.parse();if(l&&l.ifd0)return l.ifd0[274]}const Ri=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});if(s.rotateCanvas=!0,s.rotateCss=!0,typeof navigator=="object"){let S=navigator.userAgent;if(S.includes("iPad")||S.includes("iPhone")){let o=S.match(/OS (\d+)_(\d+)/);if(o){let[,l,f]=o,b=Number(l)+.1*Number(f);s.rotateCanvas=b<13.4,s.rotateCss=!1}}else if(S.includes("OS X 10")){let[,o]=S.match(/OS X 10[_.](\d+)/);s.rotateCanvas=s.rotateCss=Number(o)<15}if(S.includes("Chrome/")){let[,o]=S.match(/Chrome\/(\d+)/);s.rotateCanvas=s.rotateCss=Number(o)<81}else if(S.includes("Firefox/")){let[,o]=S.match(/Firefox\/(\d+)/);s.rotateCanvas=s.rotateCss=Number(o)<77}}class Ln extends w{constructor(...o){super(...o),i(this,"ranges",new zn),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(o,l,f){if(o===0&&this.byteLength===0&&f){let b=new DataView(f.buffer||f,f.byteOffset,f.byteLength);this._swapDataView(b)}else{let b=o+l;if(b>this.byteLength){let{dataView:T}=this._extend(b);this._swapDataView(T)}}}_extend(o){let l;l=c?h.allocUnsafe(o):new Uint8Array(o);let f=new DataView(l.buffer,l.byteOffset,l.byteLength);return l.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:l,dataView:f}}subarray(o,l,f=!1){return l=l||this._lengthToEnd(o),f&&this._tryExtend(o,l),this.ranges.add(o,l),super.subarray(o,l)}set(o,l,f=!1){f&&this._tryExtend(l,o.byteLength,o);let b=super.set(o,l);return this.ranges.add(l,b.byteLength),b}async ensureChunk(o,l){this.chunked&&(this.ranges.available(o,l)||await this.readChunk(o,l))}available(o,l){return this.ranges.available(o,l)}}class zn{constructor(){i(this,"list",[])}get length(){return this.list.length}add(o,l,f=0){let b=o+l,T=this.list.filter(k=>Ni(o,k.offset,b)||Ni(o,k.end,b));if(T.length>0){o=Math.min(o,...T.map(N=>N.offset)),b=Math.max(b,...T.map(N=>N.end)),l=b-o;let k=T.shift();k.offset=o,k.length=l,k.end=b,this.list=this.list.filter(N=>!T.includes(N))}else this.list.push({offset:o,length:l,end:b})}available(o,l){let f=o+l;return this.list.some(b=>b.offset<=o&&f<=b.end)}}function Ni(S,o,l){return S<=o&&o<=l}class jn extends Ln{constructor(o,l){super(0),i(this,"chunksRead",0),this.input=o,this.options=l}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(o=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let l=this.options.chunkSize,f=await this.readChunk(o,l);return!!f&&f.byteLength===l}async readChunk(o,l){if(this.chunksRead++,(l=this.safeWrapAddress(o,l))!==0)return this._readChunk(o,l)}safeWrapAddress(o,l){return this.size!==void 0&&o+l>this.size?Math.max(0,this.size-o):l}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}A.set("blob",class extends jn{async readWhole(){this.chunked=!1;let S=await X(this.input);this._swapArrayBuffer(S)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(S,o){let l=o?S+o:void 0,f=this.input.slice(S,l),b=await X(f);return this.set(b,S,!0)}}),s.Exifr=Qe,s.Options=lt,s.allFormatters=Ye,s.chunkedProps=Ue,s.createDictionary=me,s.default=$n,s.extendDictionary=Ke,s.fetchUrlAsArrayBuffer=oe,s.fileParsers=B,s.fileReaders=A,s.gps=async function(S){let o=new Qe(ki);await o.read(S);let l=await o.parse();if(l&&l.gps){let{latitude:f,longitude:b}=l.gps;return{latitude:f,longitude:b}}},s.gpsOnlyOptions=ki,s.inheritables=Ft,s.orientation=Bi,s.orientationOnlyOptions=Ui,s.otherSegments=Oe,s.parse=gs,s.readBlobAsArrayBuffer=X,s.rotation=async function(S){let o=await Bi(S);return Object.assign({canvas:s.rotateCanvas,css:s.rotateCss},Ri[o])},s.rotations=Ri,s.segmentParsers=E,s.segments=ot,s.segmentsAndBlocks=Xe,s.tagKeys=de,s.tagRevivers=G,s.tagValues=L,s.thumbnail=async function(S){let o=new Qe(xi);await o.read(S);let l=await o.extractThumbnail();return l&&c?h.from(l):l},s.thumbnailOnlyOptions=xi,s.thumbnailUrl=async function(S){let o=await this.thumbnail(S);if(o!==void 0){let l=new Blob([o]);return URL.createObjectURL(l)}},s.tiffBlocks=K,s.tiffExtractables=Je,Object.defineProperty(s,"__esModule",{value:!0})})})(ri,ri.exports);var zd=ri.exports;const jd=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function Vd(t,e,s){var i,n;const r=jd.exec(t),a=(i=(n=e.mimeType)!=null?n:r==null?void 0:r[1])!=null?i:"plain/text";let u;if(r[2]!=null){const h=atob(decodeURIComponent(r[3])),c=new Uint8Array(h.length);for(let y=0;y<h.length;y++)c[y]=h.charCodeAt(y);u=[c]}else u=[decodeURIComponent(r[3])];return s?new File(u,e.name||"",{type:a}):new Blob(u,{type:a})}var qd=Vd;function Hd(t){return t.startsWith("blob:")}var Wd=Hd;function Gd(t){return t?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(t):!1}var Kd=Gd,Xd={strings:{generatingThumbnails:"Generating thumbnails..."}},Jd=ft,Yd=zd;const Qd=qd,hr=Wd,pr=Kd,Zd=Xd,ec={version:"2.2.2"};function tc(t,e,s){try{t.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return t.toBlob?new Promise(i=>{t.toBlob(i,e,s)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>Qd(t.toDataURL(e,s),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function sc(t,e){let s=t.width,i=t.height;(e.deg===90||e.deg===270)&&(s=t.height,i=t.width);const n=document.createElement("canvas");n.width=s,n.height=i;const r=n.getContext("2d");return r.translate(s/2,i/2),e.canvas&&(r.rotate(e.rad),r.scale(e.scaleX,e.scaleY)),r.drawImage(t,-t.width/2,-t.height/2,t.width,t.height),n}function ic(t){const e=t.width/t.height,s=5e6,i=4096;let n=Math.floor(Math.sqrt(s*e)),r=Math.floor(s/Math.sqrt(s*e));if(n>i&&(n=i,r=Math.round(n/e)),r>i&&(r=i,n=Math.round(e*r)),t.width>n){const a=document.createElement("canvas");return a.width=n,a.height=r,a.getContext("2d").drawImage(t,0,0,n,r),a}return t}let jt=class extends Jd.UIPlugin{constructor(e,s){super(e,s),this.onFileAdded=n=>{!n.preview&&n.data&&pr(n.type)&&!n.isRemote&&this.addToQueue(n.id)},this.onCancelRequest=n=>{const r=this.queue.indexOf(n.id);r!==-1&&this.queue.splice(r,1)},this.onFileRemoved=n=>{const r=this.queue.indexOf(n.id);r!==-1&&this.queue.splice(r,1),n.preview&&hr(n.preview)&&URL.revokeObjectURL(n.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(r=>r.isRestored).forEach(r=>{(!r.preview||hr(r.preview))&&this.addToQueue(r.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=n=>{n.forEach(a=>{const u=this.uppy.getFile(a);this.uppy.emit("preprocess-progress",u,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const r=()=>{n.forEach(a=>{const u=this.uppy.getFile(a);this.uppy.emit("preprocess-complete",u)})};return new Promise(a=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{r(),a()}):(r(),a())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType||"image/jpeg",this.defaultLocale=Zd;const i={thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1};if(this.opts={...i,...s},this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,s,i){const n=URL.createObjectURL(e.data),r=new Promise((u,h)=>{const c=new Image;c.src=n,c.addEventListener("load",()=>{URL.revokeObjectURL(n),u(c)}),c.addEventListener("error",y=>{URL.revokeObjectURL(n),h(y.error||new Error("Could not create thumbnail"))})}),a=(0,Yd.rotation)(e.data).catch(()=>1);return Promise.all([r,a]).then(u=>{let[h,c]=u;const y=this.getProportionalDimensions(h,s,i,c.deg),v=this.rotateImage(h,c),P=this.resizeImage(v,y.width,y.height);return this.canvasToBlob(P,this.thumbnailType,80)}).then(u=>URL.createObjectURL(u))}getProportionalDimensions(e,s,i,n){let r=e.width/e.height;return(n===90||n===270)&&(r=e.height/e.width),s!=null?{width:s,height:Math.round(s/r)}:i!=null?{width:Math.round(i*r),height:i}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}}resizeImage(e,s,i){let n=this.protect(e),r=Math.ceil(Math.log2(n.width/s));r<1&&(r=1);let a=s*2**(r-1),u=i*2**(r-1);const h=2;for(;r--;){const c=document.createElement("canvas");c.width=a,c.height=u,c.getContext("2d").drawImage(n,0,0,a,u),n=c,a=Math.round(a/h),u=Math.round(u/h)}return n}setPreviewURL(e,s){this.uppy.setFileState(e,{preview:s})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return pr(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(s=>{this.setPreviewURL(e.id,s),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),s)}).catch(s=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(s,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),s)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};jt.VERSION=ec.version;var rc=jt;jt.prototype.canvasToBlob=tc;jt.prototype.protect=ic;jt.prototype.rotateImage=sc;const nc=Hr;function ac(t){if(typeof t=="string"){const e=document.querySelectorAll(t);return e.length===0?null:Array.from(e)}return typeof t=="object"&&nc(t)?[t]:null}var oc=ac;function Pn(t,e,s,i){let{onSuccess:n}=i;t.readEntries(r=>{const a=[...e,...r];r.length?queueMicrotask(()=>{Pn(t,a,s,{onSuccess:n})}):n(a)},r=>{s(r),n(e)})}var lc=Pn;const uc=lc;function On(t,e){return t==null?t:{kind:t.isFile?"file":t.isDirectory?"directory":void 0,name:t.name,getFile(){return new Promise((s,i)=>t.file(s,i))},async*values(){const s=t.createReader();yield*await new Promise(n=>{uc(s,[],e,{onSuccess:r=>n(r.map(a=>On(a,e)))})})}}}async function*En(t,e){if(t.kind==="file"){const s=await t.getFile();s!==null&&(s.relativePath=e?`${e}/${t.name}`:null,yield s)}else if(t.kind==="directory")for await(const s of t.values())yield*En(s,`${e}/${t.name}`)}async function*dc(t,e){const s=await Promise.all(Array.from(t.items,async i=>{var n;const r=i.getAsFile(),a=(n=await(i.getAsFileSystemHandle==null?void 0:i.getAsFileSystemHandle()))!=null?n:On(i.webkitGetAsEntry(),e);return{lastResortFile:r,entry:a}}));for(const{lastResortFile:i,entry:n}of s)if(n!=null)try{yield*En(n,"")}catch(r){i?yield i:e(r)}}var cc=dc;const hc=vi;function pc(t){const e=hc(t.files);return Promise.resolve(e)}var fc=pc;const mc=cc,gc=fc;async function yc(t,e){let{logDropError:s=()=>{}}=e===void 0?{}:e;try{const i=[];for await(const n of mc(t,s))i.push(n);return i}catch{return gc(t)}}var bc=yc,fr=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function vc(t,e){return!!(t===e||fr(t)&&fr(e))}function wc(t,e){if(t.length!==e.length)return!1;for(var s=0;s<t.length;s++)if(!vc(t[s],e[s]))return!1;return!0}function Fc(t,e){e===void 0&&(e=wc);var s,i=[],n,r=!1;function a(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return r&&s===this&&e(u,i)||(n=t.apply(this,u),r=!0,s=this,i=u),n}return a}const Sc=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),Pc=Dr(Sc);var Oc="Expected a function",mr=0/0,Ec="[object Symbol]",Tc=/^\s+|\s+$/g,Cc=/^[-+]0x[0-9a-f]+$/i,Ac=/^0b[01]+$/i,kc=/^0o[0-7]+$/i,xc=parseInt,Uc=typeof Pe=="object"&&Pe&&Pe.Object===Object&&Pe,Bc=typeof self=="object"&&self&&self.Object===Object&&self,Rc=Uc||Bc||Function("return this")(),Nc=Object.prototype,Dc=Nc.toString,_c=Math.max,Ic=Math.min,Ds=function(){return Rc.Date.now()};function Mc(t,e,s){var i,n,r,a,u,h,c=0,y=!1,v=!1,P=!0;if(typeof t!="function")throw new TypeError(Oc);e=gr(e)||0,ni(s)&&(y=!!s.leading,v="maxWait"in s,r=v?_c(gr(s.maxWait)||0,e):r,P="trailing"in s?!!s.trailing:P);function O(C){var U=i,D=n;return i=n=void 0,c=C,a=t.apply(D,U),a}function d(C){return c=C,u=setTimeout(g,e),y?O(C):a}function m(C){var U=C-h,D=C-c,M=e-U;return v?Ic(M,r-D):M}function w(C){var U=C-h,D=C-c;return h===void 0||U>=e||U<0||v&&D>=r}function g(){var C=Ds();if(w(C))return p(C);u=setTimeout(g,m(C))}function p(C){return u=void 0,P&&i?O(C):(i=n=void 0,a)}function B(){u!==void 0&&clearTimeout(u),c=0,i=h=n=u=void 0}function E(){return u===void 0?a:p(Ds())}function A(){var C=Ds(),U=w(C);if(i=arguments,n=this,h=C,U){if(u===void 0)return d(h);if(v)return u=setTimeout(g,e),O(h)}return u===void 0&&(u=setTimeout(g,e)),a}return A.cancel=B,A.flush=E,A}function ni(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function $c(t){return!!t&&typeof t=="object"}function Lc(t){return typeof t=="symbol"||$c(t)&&Dc.call(t)==Ec}function gr(t){if(typeof t=="number")return t;if(Lc(t))return mr;if(ni(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ni(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Tc,"");var s=Ac.test(t);return s||kc.test(t)?xc(t.slice(2),s?2:8):Cc.test(t)?mr:+t}var zc=Mc;const jc=zc,Vc=wi,qc=fn;function Hc(){let t=!1;return jc((s,i)=>{const n=qc(s,i),r=n.contains(document.activeElement);if(r&&t)return;const a=n.querySelector("[data-uppy-super-focusable]");if(!(r&&!a))if(a)a.focus({preventScroll:!0}),t=!0;else{const u=n.querySelector(Vc);u==null||u.focus({preventScroll:!0}),t=!1}},260)}var Wc=Hc;function Gc(){const t=document.body;return!(!("draggable"in t)||!("ondragstart"in t&&"ondrop"in t)||!("FormData"in window)||!("FileReader"in window))}var Kc=Gc,Xc=function(e,s){if(e===s)return!0;for(var i in e)if(!(i in s))return!1;for(var i in s)if(e[i]!==s[i])return!1;return!0},Q=j;function Jc(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("g",{fill:"#686DE0",fillRule:"evenodd"},(0,Q.h)("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),(0,Q.h)("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),(0,Q.h)("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function Yc(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function Qc(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function Zc(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function eh(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function th(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("g",{fill:"#A7AFB7",fillRule:"nonzero"},(0,Q.h)("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),(0,Q.h)("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function sh(){return(0,Q.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,Q.h)("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function ih(t){const e={color:"#838999",icon:th()};if(!t)return e;const s=t.split("/")[0],i=t.split("/")[1];return s==="text"?{color:"#5a5e69",icon:sh()}:s==="image"?{color:"#686de0",icon:Jc()}:s==="audio"?{color:"#068dbb",icon:Yc()}:s==="video"?{color:"#19af67",icon:Qc()}:s==="application"&&i==="pdf"?{color:"#e25149",icon:Zc()}:s==="application"&&["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:eh()}:e}var Pi=ih,Bt=j;const rh=Pi;function nh(t){const{file:e}=t;if(e.preview)return(0,Bt.h)("img",{className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});const{color:s,icon:i}=rh(e.type);return(0,Bt.h)("div",{className:"uppy-Dashboard-Item-previewIconWrap"},(0,Bt.h)("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:s}},i),(0,Bt.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},(0,Bt.h)("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}var Tn=nh,yr=j;const ah=(t,e)=>e.filter(i=>i.id===t)[0].name;function oh(t){const{file:e,toggleFileCard:s,i18n:i,metaFields:n}=t,{missingRequiredMetaFields:r}=e;if(!(r!=null&&r.length))return null;const a=r.map(u=>ah(u,n)).join(", ");return(0,yr.h)("div",{className:"uppy-Dashboard-Item-errorMessage"},i("missingRequiredMetaFields",{smart_count:r.length,fields:a})," ",(0,yr.h)("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>s(!0,e.id)},i("editFile")))}var Cn=oh,Rt=j;const lh=Tn,uh=Cn,dh=Pi;function ch(t){return(0,Rt.h)("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:dh(t.file.type).color}},t.showLinkToFileUploadResult&&t.file.uploadURL&&(0,Rt.h)("a",{className:"uppy-Dashboard-Item-previewLink",href:t.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.file.meta.name},(0,Rt.h)("span",{hidden:!0},t.file.meta.name)),(0,Rt.h)(lh,{file:t.file}),(0,Rt.h)(uh,{file:t.file,i18n:t.i18n,toggleFileCard:t.toggleFileCard,metaFields:t.metaFields}))}var hh=ch,I=j;function ph(t){if(!t.isUploaded){if(t.error&&!t.hideRetryButton){t.uppy.retryUpload(t.file.id);return}t.resumableUploads&&!t.hidePauseResumeButton?t.uppy.pauseResume(t.file.id):t.individualCancellation&&!t.hideCancelButton&&t.uppy.removeFile(t.file.id)}}function br(t){return t.isUploaded?t.i18n("uploadComplete"):t.error?t.i18n("retryUpload"):t.resumableUploads?t.file.isPaused?t.i18n("resumeUpload"):t.i18n("pauseUpload"):t.individualCancellation?t.i18n("cancelUpload"):""}function _s(t){return(0,I.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,I.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":br(t),title:br(t),onClick:()=>ph(t)},t.children))}function Gt(t){let{children:e}=t;return(0,I.h)("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},e)}function Is(t){let{progress:e}=t;const s=2*Math.PI*15;return(0,I.h)("g",null,(0,I.h)("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),(0,I.h)("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":s,"stroke-dashoffset":s-s/100*e}))}function fh(t){if(!t.file.progress.uploadStarted)return null;if(t.isUploaded)return(0,I.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,I.h)("div",{className:"uppy-Dashboard-Item-progressIndicator"},(0,I.h)(Gt,null,(0,I.h)("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),(0,I.h)("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!t.recoveredState)return t.error&&!t.hideRetryButton?(0,I.h)(_s,t,(0,I.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},(0,I.h)("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),(0,I.h)("path",{d:"M7.9 3H10v2H7.9z"}),(0,I.h)("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),(0,I.h)("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):t.resumableUploads&&!t.hidePauseResumeButton?(0,I.h)(_s,t,(0,I.h)(Gt,null,(0,I.h)(Is,{progress:t.file.progress.percentage}),t.file.isPaused?(0,I.h)("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):(0,I.h)("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},(0,I.h)("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),(0,I.h)("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!t.resumableUploads&&t.individualCancellation&&!t.hideCancelButton?(0,I.h)(_s,t,(0,I.h)(Gt,null,(0,I.h)(Is,{progress:t.file.progress.percentage}),(0,I.h)("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):(0,I.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,I.h)("div",{className:"uppy-Dashboard-Item-progressIndicator"},(0,I.h)(Gt,null,(0,I.h)(Is,{progress:t.file.progress.percentage}))))}var mh=fh,gh=function(e){if(typeof e!="number"||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var s=e<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(s&&(e=-e),e<1)return(s?"-":"")+e+" B";var n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),i.length-1);e=Number(e/Math.pow(1024,n));var r=i[n];return e>=10||e%1===0?(s?"-":"")+e.toFixed(0)+" "+r:(s?"-":"")+e.toFixed(1)+" "+r};const Ms="...";function yh(t,e){if(e===0)return"";if(t.length<=e)return t;if(e<=Ms.length+1)return`${t.slice(0,e-1)}â€¦`;const s=e-Ms.length,i=Math.ceil(s/2),n=Math.floor(s/2);return t.slice(0,i)+Ms+t.slice(-n)}var bh=yh,le=j;const vh=gh,An=bh,wh=Cn,Fh=t=>{const{author:e,name:s}=t.file.meta;function i(){return t.containerWidth<=352?35:t.containerWidth<=576?60:e?20:30}return(0,le.h)("div",{className:"uppy-Dashboard-Item-name",title:s},An(s,i()))},Sh=t=>{const{author:e}=t.file.meta,{providerName:s}=t.file.remote,i="Â·";return e?(0,le.h)("div",{className:"uppy-Dashboard-Item-author"},(0,le.h)("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},An(e.name,13)),s?(0,le.h)(le.Fragment,null,` ${i} `,s,` ${i} `):null):null},Ph=t=>t.file.size&&(0,le.h)("div",{className:"uppy-Dashboard-Item-statusSize"},vh(t.file.size)),Oh=t=>t.file.isGhost&&(0,le.h)("span",null," â€¢ ",(0,le.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:t.toggleAddFilesPanel},t.i18n("reSelect"))),Eh=t=>{let{file:e,onClick:s}=t;return e.error?(0,le.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:s,type:"button"},"?"):null};function Th(t){const{file:e}=t;return(0,le.h)("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source},(0,le.h)("div",{className:"uppy-Dashboard-Item-fileName"},Fh(t),(0,le.h)(Eh,{file:t.file,onClick:()=>alert(t.file.error)})),(0,le.h)("div",{className:"uppy-Dashboard-Item-status"},Sh(t),Ph(t),Oh(t)),(0,le.h)(wh,{file:t.file,i18n:t.i18n,toggleFileCard:t.toggleFileCard,metaFields:t.metaFields}))}var Ch=Th;function Ah(t,e){return e||(e="Copy the URL below"),new Promise(s=>{const i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=t,document.body.appendChild(i),i.select();const n=()=>{document.body.removeChild(i),window.prompt(e,t),s()};try{return document.execCommand("copy")?(document.body.removeChild(i),s()):n("copy command unavailable")}catch{return document.body.removeChild(i),n()}})}var kh=Ah,ne=j;const xh=kh;function Uh(t){let{file:e,uploadInProgressOrComplete:s,metaFields:i,canEditFile:n,i18n:r,onClick:a}=t;return!s&&i&&i.length>0||!s&&n(e)?(0,ne.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":r("editFileWithFilename",{file:e.meta.name}),title:r("editFileWithFilename",{file:e.meta.name}),onClick:()=>a()},(0,ne.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},(0,ne.h)("g",{fillRule:"evenodd"},(0,ne.h)("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),(0,ne.h)("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),(0,ne.h)("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function Bh(t){let{i18n:e,onClick:s,file:i}=t;return(0,ne.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:i.meta.name}),title:e("removeFile",{file:i.meta.name}),onClick:()=>s()},(0,ne.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},(0,ne.h)("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),(0,ne.h)("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const Rh=(t,e)=>{xh(e.file.uploadURL,e.i18n("copyLinkToClipboardFallback")).then(()=>{e.uppy.log("Link copied to clipboard."),e.uppy.info(e.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.uppy.log).then(()=>t.target.focus({preventScroll:!0}))};function Nh(t){const{i18n:e}=t;return(0,ne.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":e("copyLink"),title:e("copyLink"),onClick:s=>Rh(s,t)},(0,ne.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},(0,ne.h)("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Dh(t){const{uppy:e,file:s,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,showLinkToFileUploadResult:a,showRemoveButton:u,i18n:h,toggleFileCard:c,openFileEditor:y}=t,v=()=>{r&&r.length>0?c(!0,s.id):y(s)};return(0,ne.h)("div",{className:"uppy-Dashboard-Item-actionWrapper"},(0,ne.h)(Uh,{i18n:h,file:s,uploadInProgressOrComplete:i,canEditFile:n,metaFields:r,onClick:v}),a&&s.uploadURL?(0,ne.h)(Nh,{file:s,uppy:e,i18n:h}):null,u?(0,ne.h)(Bh,{i18n:h,file:s,uppy:e,onClick:()=>t.uppy.removeFile(s.id,"removed-by-user")}):null)}var _h=Dh,Ve=j;const Ih=xe,Mh=Xc,$h=hh,Lh=mh,zh=Ch,jh=_h;let Vh=class extends Ve.Component{componentDidMount(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!Mh(this.props,e)}componentDidUpdate(){const{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){const{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){const{file:e}=this.props,s=e.progress.preprocess||e.progress.postprocess,i=e.progress.uploadComplete&&!s&&!e.error,n=e.progress.uploadStarted||s,r=e.progress.uploadStarted&&!e.progress.uploadComplete||s,a=e.error||!1,{isGhost:u}=e;let h=(this.props.individualCancellation||!r)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(h=!0);const c=Ih({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":s,"is-complete":i,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":u});return(0,Ve.h)("div",{className:c,id:`uppy_${e.id}`,role:this.props.role},(0,Ve.h)("div",{className:"uppy-Dashboard-Item-preview"},(0,Ve.h)($h,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),(0,Ve.h)(Lh,{uppy:this.props.uppy,file:e,error:a,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),(0,Ve.h)("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},(0,Ve.h)(zh,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),(0,Ve.h)(jh,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:h,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}};var qh=Vh,Kt=j;function ai(){return ai=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},ai.apply(this,arguments)}const Hh={position:"relative",width:"100%",minHeight:"100%"},Wh={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};let Gh=class extends Kt.Component{constructor(e){super(e),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(e){let{data:s,rowHeight:i,renderRow:n,overscanCount:r=10,...a}=e;const{offset:u,height:h}=this.state;let c=Math.floor(u/i),y=Math.floor(h/i);r&&(c=Math.max(0,c-c%r),y+=r);const v=c+y+4,P=s.slice(c,v),O={...Hh,height:s.length*i},d={...Wh,top:c*i};return(0,Kt.h)("div",ai({onScroll:this.handleScroll},a),(0,Kt.h)("div",{role:"presentation",style:O},(0,Kt.h)("div",{role:"presentation",style:d},P.map(n))))}};var Kh=Gh,$s=j;function oi(){return oi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},oi.apply(this,arguments)}const Xh=xe,Jh=qh,Yh=Kh;function Qh(t,e){const s=[];let i=[];return t.forEach(n=>{i.length<e?i.push(n):(s.push(i),i=[n])}),i.length&&s.push(i),s}var Zh=t=>{const e=t.totalFileCount===0,s=Xh("uppy-Dashboard-files",{"uppy-Dashboard-files--noFiles":e}),i=t.itemsPerRow===1?71:200,n={id:t.id,error:t.error,i18n:t.i18n,uppy:t.uppy,acquirers:t.acquirers,resumableUploads:t.resumableUploads,individualCancellation:t.individualCancellation,hideRetryButton:t.hideRetryButton,hidePauseResumeButton:t.hidePauseResumeButton,hideCancelButton:t.hideCancelButton,showLinkToFileUploadResult:t.showLinkToFileUploadResult,showRemoveButtonAfterComplete:t.showRemoveButtonAfterComplete,isWide:t.isWide,metaFields:t.metaFields,recoveredState:t.recoveredState,toggleFileCard:t.toggleFileCard,handleRequestThumbnail:t.handleRequestThumbnail,handleCancelThumbnail:t.handleCancelThumbnail},r=(c,y)=>t.files[y].isGhost-t.files[c].isGhost,a=Object.keys(t.files);t.recoveredState&&a.sort(r);const u=Qh(a,t.itemsPerRow),h=c=>(0,$s.h)("div",{role:"presentation",key:c[0]},c.map(y=>(0,$s.h)(Jh,oi({key:y,uppy:t.uppy},n,{role:"listitem",openFileEditor:t.openFileEditor,canEditFile:t.canEditFile,toggleAddFilesPanel:t.toggleAddFilesPanel,file:t.files[y]}))));return(0,$s.h)(Yh,{class:s,role:"list",data:u,renderRow:h,rowHeight:i})},H=j;let kn;kn=Symbol.for("uppy test: disable unused locale key warning");let ep=class extends H.Component{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.onFileInputChange=e=>{this.props.handleInputChange(e),e.target.value=null},this.renderHiddenInput=(e,s)=>(0,H.h)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:s}),this.renderMyDeviceAcquirer=()=>(0,H.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},(0,H.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},(0,H.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,H.h)("g",{fill:"none",fillRule:"evenodd"},(0,H.h)("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),(0,H.h)("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),(0,H.h)("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderBrowseButton=(e,s)=>{const i=this.props.acquirers.length;return(0,H.h)("button",{type:"button",className:"uppy-u-reset uppy-Dashboard-browse",onClick:s,"data-uppy-super-focusable":i===0},e)},this.renderDropPasteBrowseTagline=()=>{const e=this.props.acquirers.length,s=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,r=n.charAt(0).toUpperCase()+n.slice(1);return(0,H.h)("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${r}`,{browseFiles:s,browseFolders:i,browse:s}):this.props.i18nArray(`dropPaste${r}`,{browseFiles:s,browseFolders:i,browse:s}))},this.renderAcquirer=e=>(0,H.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id},(0,H.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id)},e.icon(),(0,H.h)("div",{className:"uppy-DashboardTab-name"},e.name))),this.renderAcquirers=(e,s)=>{const i=[...e],n=i.splice(e.length-2,e.length);return(0,H.h)("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},!s&&this.renderMyDeviceAcquirer(),i.map(r=>this.renderAcquirer(r)),(0,H.h)("span",{role:"presentation",style:{"white-space":"nowrap"}},n.map(r=>this.renderAcquirer(r))))}}[kn](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:e}=this.props,s=(0,H.h)("span",null,(0,H.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},(0,H.h)("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),(0,H.h)("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),i=e("poweredBy",{uppy:s});return(0,H.h)("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},i)}render(){return(0,H.h)("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,e=>{this.fileInput=e}),this.renderHiddenInput(!0,e=>{this.folderInput=e}),this.renderDropPasteBrowseTagline(),this.props.acquirers.length>0&&this.renderAcquirers(this.props.acquirers,this.props.disableLocalFiles),(0,H.h)("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&(0,H.h)("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}};var xn=ep,Nt=j;const tp=xe,sp=xn,ip=t=>(0,Nt.h)("div",{className:tp("uppy-Dashboard-AddFilesPanel",t.className),"data-uppy-panelType":"AddFiles","aria-hidden":t.showAddFilesPanel},(0,Nt.h)("div",{className:"uppy-DashboardContent-bar"},(0,Nt.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},t.i18n("addingMoreFiles")),(0,Nt.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>t.toggleAddFilesPanel(!1)},t.i18n("back"))),(0,Nt.h)(sp,t));var rp=ip;function np(t){const{tagName:e}=t.target;if(e==="INPUT"||e==="TEXTAREA"){t.stopPropagation();return}t.preventDefault(),t.stopPropagation()}var Un=np,Dt=j;const ap=xe,Xt=Un;function op(t){let{activePickerPanel:e,className:s,hideAllPanels:i,i18n:n,state:r,uppy:a}=t;return(0,Dt.h)("div",{className:ap("uppy-DashboardContent-panel",s),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:Xt,onDragLeave:Xt,onDrop:Xt,onPaste:Xt},(0,Dt.h)("div",{className:"uppy-DashboardContent-bar"},(0,Dt.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:e.name})),(0,Dt.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},n("cancel"))),(0,Dt.h)("div",{className:"uppy-DashboardContent-panelBody"},a.getPlugin(e.id).render(r)))}var lp=op,Ze=j;const up=xe;function dp(t){const e=t.files[t.fileCardFor];return(0,Ze.h)("div",{className:up("uppy-DashboardContent-panel",t.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},(0,Ze.h)("div",{className:"uppy-DashboardContent-bar"},(0,Ze.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},t.i18nArray("editing",{file:(0,Ze.h)("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),(0,Ze.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t.hideAllPanels},t.i18n("cancel")),(0,Ze.h)("button",{className:"uppy-DashboardContent-save",type:"button",onClick:t.saveFileEditor},t.i18n("save"))),(0,Ze.h)("div",{className:"uppy-DashboardContent-panelBody"},t.editors.map(s=>t.uppy.getPlugin(s.id).render(t.state))))}var cp=dp,Te=j;const Ce={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function hp(t,e,s,i){if(i===void 0&&(i={}),t)return Ce.STATE_ERROR;if(e)return Ce.STATE_COMPLETE;if(s)return Ce.STATE_PAUSED;let n=Ce.STATE_WAITING;const r=Object.keys(i);for(let a=0;a<r.length;a++){const{progress:u}=i[r[a]];if(u.uploadStarted&&!u.uploadComplete)return Ce.STATE_UPLOADING;u.preprocess&&n!==Ce.STATE_UPLOADING&&(n=Ce.STATE_PREPROCESSING),u.postprocess&&n!==Ce.STATE_UPLOADING&&n!==Ce.STATE_PREPROCESSING&&(n=Ce.STATE_POSTPROCESSING)}return n}function pp(t){let{files:e,i18n:s,isAllComplete:i,isAllErrored:n,isAllPaused:r,inProgressNotPausedFiles:a,newFiles:u,processingFiles:h}=t;switch(hp(n,i,r,e)){case"uploading":return s("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return s("processingXFiles",{smart_count:h.length});case"paused":return s("uploadPaused");case"waiting":return s("xFilesSelected",{smart_count:u.length});case"complete":return s("uploadComplete")}}function fp(t){const{i18n:e,isAllComplete:s,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:r,uppy:a}=t;let{allowNewUpload:u}=t;return u&&n&&(u=t.totalFileCount<t.maxNumberOfFiles),(0,Te.h)("div",{className:"uppy-DashboardContent-bar"},!s&&!i?(0,Te.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>a.cancelAll()},e("cancel")):(0,Te.h)("div",null),(0,Te.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},(0,Te.h)(pp,t)),u?(0,Te.h)("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>r(!0)},(0,Te.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},(0,Te.h)("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),(0,Te.h)("span",{className:"uppy-DashboardContent-addMoreCaption"},e("addMore"))):(0,Te.h)("div",null))}var mp=fp,te=j,gp=hi;const yp=xe,bp=Pi,Jt=Un,vp=Tn;let wp=class extends te.Component{constructor(e){super(e),this.form=document.createElement("form"),this.updateMeta=(r,a)=>{this.setState(u=>{let{formState:h}=u;return{formState:{...h,[a]:r}}})},this.handleSave=r=>{r.preventDefault();const a=this.props.fileCardFor;this.props.saveFileCard(this.state.formState,a)},this.handleCancel=()=>{const r=this.props.files[this.props.fileCardFor];this.props.uppy.emit("file-editor:cancel",r),this.props.toggleFileCard(!1)},this.saveOnEnter=r=>{if(r.keyCode===13){r.stopPropagation(),r.preventDefault();const a=this.props.files[this.props.fileCardFor];this.props.saveFileCard(this.state.formState,a.id)}},this.renderMetaFields=()=>{const r=this.getMetaFields()||[],a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return r.map(u=>{const h=`uppy-Dashboard-FileCard-input-${u.id}`,c=this.props.requiredMetaFields.includes(u.id);return(0,te.h)("fieldset",{key:u.id,className:"uppy-Dashboard-FileCard-fieldset"},(0,te.h)("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:h},u.name),u.render!==void 0?u.render({value:this.state.formState[u.id],onChange:y=>this.updateMeta(y,u.id),fieldCSSClasses:a,required:c,form:this.form.id},te.h):(0,te.h)("input",{className:a.text,id:h,form:this.form.id,type:u.type||"text",required:c,value:this.state.formState[u.id],placeholder:u.placeholder,onKeyUp:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyDown:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onKeyPress:"form"in HTMLInputElement.prototype?void 0:this.saveOnEnter,onInput:y=>this.updateMeta(y.target.value,u.id),"data-uppy-super-focusable":!0}))})};const s=this.props.files[this.props.fileCardFor],i=this.getMetaFields()||[],n={};i.forEach(r=>{n[r.id]=s.meta[r.id]||""}),this.state={formState:n},this.form.id=(0,gp.nanoid)()}componentWillMount(){this.form.addEventListener("submit",this.handleSave),document.body.appendChild(this.form)}componentWillUnmount(){this.form.removeEventListener("submit",this.handleSave),document.body.removeChild(this.form)}getMetaFields(){return typeof this.props.metaFields=="function"?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields}render(){const e=this.props.files[this.props.fileCardFor],s=this.props.canEditFile(e);return(0,te.h)("div",{className:yp("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:Jt,onDragLeave:Jt,onDrop:Jt,onPaste:Jt},(0,te.h)("div",{className:"uppy-DashboardContent-bar"},(0,te.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:(0,te.h)("span",{className:"uppy-DashboardContent-titleFile"},e.meta?e.meta.name:e.name)})),(0,te.h)("button",{className:"uppy-DashboardContent-back",type:"button",form:this.form.id,title:this.props.i18n("finishEditingFile"),onClick:this.handleCancel},this.props.i18n("cancel"))),(0,te.h)("div",{className:"uppy-Dashboard-FileCard-inner"},(0,te.h)("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:bp(e.type).color}},(0,te.h)(vp,{file:e}),s&&(0,te.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:i=>{this.handleSave(i),this.props.openFileEditor(e)},form:this.form.id},this.props.i18n("editFile"))),(0,te.h)("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),(0,te.h)("div",{className:"uppy-Dashboard-FileCard-actions"},(0,te.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"form"in HTMLButtonElement.prototype?"submit":"button",onClick:"form"in HTMLButtonElement.prototype?void 0:this.handleSave,form:this.form.id},this.props.i18n("saveChanges")),(0,te.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel,form:this.form.id},this.props.i18n("cancel")))))}};var Fp=wp,Ls=j;const Sp=xe,dt="uppy-transition-slideDownUp",vr=250;let Pp=class extends Ls.Component{constructor(e){super(e),this.state={cachedChildren:null,className:""}}componentWillUpdate(e){const{cachedChildren:s}=this.state,i=(0,Ls.toChildArray)(e.children)[0];if(s===i)return null;const n={cachedChildren:i};i&&!s&&(n.className=`${dt}-enter`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${dt}-enter ${dt}-enter-active`}),this.enterTimeout=setTimeout(()=>{this.setState({className:""})},vr)})),s&&!i&&this.leaveTimeout===void 0&&(n.cachedChildren=s,n.className=`${dt}-leave`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${dt}-leave ${dt}-leave-active`}),this.leaveTimeout=setTimeout(()=>{this.setState({cachedChildren:null,className:""})},vr)})),this.setState(n)}render(){const{cachedChildren:e,className:s}=this.state;return e?(0,Ls.cloneElement)(e,{className:Sp(s,e.props.className)}):null}};var Op=Pp,$=j;function He(){return He=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},He.apply(this,arguments)}const Ep=xe,Tp=Kc,Cp=Zh,Ap=xn,kp=rp,xp=lp,Up=cp,Bp=mp,Rp=Fp,Yt=Op,wr=900,Fr=700,zs=576,Np=400;function Dp(t){const e=t.totalFileCount===0,s=t.containerWidth>zs,i=Ep({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":t.disabled,"uppy-Dashboard--animateOpenClose":t.animateOpenClose,"uppy-Dashboard--isClosing":t.isClosing,"uppy-Dashboard--isDraggingOver":t.isDraggingOver,"uppy-Dashboard--modal":!t.inline,"uppy-size--md":t.containerWidth>zs,"uppy-size--lg":t.containerWidth>Fr,"uppy-size--xl":t.containerWidth>wr,"uppy-size--height-md":t.containerHeight>Np,"uppy-Dashboard--isAddFilesPanelVisible":t.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":t.areInsidesReadyToBeVisible});let n=1;t.containerWidth>wr?n=5:t.containerWidth>Fr?n=4:t.containerWidth>zs&&(n=3);const r=t.showSelectedFiles&&!e,a=t.recoveredState?Object.keys(t.recoveredState.files).length:null,u=t.files?Object.keys(t.files).filter(y=>t.files[y].isGhost).length:null,h=()=>u>0?t.i18n("recoveredXFiles",{smart_count:u}):t.i18n("recoveredAllFiles");return(0,$.h)("div",{className:i,"data-uppy-theme":t.theme,"data-uppy-num-acquirers":t.acquirers.length,"data-uppy-drag-drop-supported":!t.disableLocalFiles&&Tp(),"aria-hidden":t.inline?"false":t.isHidden,"aria-disabled":t.disabled,"aria-label":t.inline?t.i18n("dashboardTitle"):t.i18n("dashboardWindowTitle"),onPaste:t.handlePaste,onDragOver:t.handleDragOver,onDragLeave:t.handleDragLeave,onDrop:t.handleDrop},(0,$.h)("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:t.handleClickOutside}),(0,$.h)("div",{className:"uppy-Dashboard-inner","aria-modal":!t.inline&&"true",role:!t.inline&&"dialog",style:{width:t.inline&&t.width?t.width:"",height:t.inline&&t.height?t.height:""}},t.inline?null:(0,$.h)("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":t.i18n("closeModal"),title:t.i18n("closeModal"),onClick:t.closeModal},(0,$.h)("span",{"aria-hidden":"true"},"Ã—")),(0,$.h)("div",{className:"uppy-Dashboard-innerWrap"},(0,$.h)("div",{className:"uppy-Dashboard-dropFilesHereHint"},t.i18n("dropHint")),r&&(0,$.h)(Bp,t),a&&(0,$.h)("div",{className:"uppy-Dashboard-serviceMsg"},(0,$.h)("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},(0,$.h)("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},(0,$.h)("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),(0,$.h)("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),(0,$.h)("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),(0,$.h)("strong",{className:"uppy-Dashboard-serviceMsg-title"},t.i18n("sessionRestored")),(0,$.h)("div",{className:"uppy-Dashboard-serviceMsg-text"},h())),r?(0,$.h)(Cp,He({},t,{itemsPerRow:n})):(0,$.h)(Ap,He({},t,{isSizeMD:s})),(0,$.h)(Yt,null,t.showAddFilesPanel?(0,$.h)(kp,He({key:"AddFiles"},t,{isSizeMD:s})):null),(0,$.h)(Yt,null,t.fileCardFor?(0,$.h)(Rp,He({key:"FileCard"},t)):null),(0,$.h)(Yt,null,t.activePickerPanel?(0,$.h)(xp,He({key:"Picker"},t)):null),(0,$.h)(Yt,null,t.showFileEditor?(0,$.h)(Up,He({key:"Editor"},t)):null),(0,$.h)("div",{className:"uppy-Dashboard-progressindicators"},t.progressindicators.map(y=>t.uppy.getPlugin(y.id).render(t.state))))))}var _p=Dp,Ip={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."}}},Sr=j,Mp=ft,$p=hi,Pr=fs;function ye(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Lp=0;function gt(t){return"__private_"+Lp+++"_"+t}const zp=Td,jp=Ld,Vp=rc,Or=oc,js=vi,qp=bc,Er=Pc,Hp=wi,Wp=Wc,Gp=_p,Kp={version:"2.4.3"},Xp=Ip,Vs=Er.default||Er,Tr=9,Jp=27;function Cr(){const t={};return t.promise=new Promise((e,s)=>{t.resolve=e,t.reject=s}),t}function Yp(){return(0,Sr.h)("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},(0,Sr.h)("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var _t=gt("openFileEditorWhenFilesAdded"),et=gt("attachRenderFunctionToTarget"),qs=gt("isTargetSupported"),Hs=gt("getAcquirers"),Ws=gt("getProgressIndicators"),Me=gt("getEditors");let Bn=class extends Mp.UIPlugin{constructor(e,s){var i;super(e,s),i=this,this.removeTarget=r=>{const u=this.getPluginState().targets.filter(h=>h.id!==r.id);this.setPluginState({targets:u})},this.addTarget=r=>{const a=r.id||r.constructor.name,u=r.title||a,h=r.type;if(h!=="acquirer"&&h!=="progressindicator"&&h!=="editor"){const P="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";this.uppy.log(P,"error");return}const c={id:a,name:u,type:h},v=this.getPluginState().targets.slice();return v.push(c),this.setPluginState({targets:v}),this.el},this.hideAllPanels=()=>{const r=this.getPluginState(),a={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};r.activePickerPanel===a.activePickerPanel&&r.showAddFilesPanel===a.showAddFilesPanel&&r.showFileEditor===a.showFileEditor&&r.activeOverlayType===a.activeOverlayType||this.setPluginState(a)},this.showPanel=r=>{const{targets:a}=this.getPluginState(),u=a.filter(h=>h.type==="acquirer"&&h.id===r)[0];this.setPluginState({activePickerPanel:u,activeOverlayType:"PickerPanel"})},this.canEditFile=r=>{const{targets:a}=this.getPluginState();return ye(this,Me)[Me](a).some(h=>this.uppy.getPlugin(h.id).canEditFile(r))},this.openFileEditor=r=>{const{targets:a}=this.getPluginState(),u=ye(this,Me)[Me](a);this.setPluginState({showFileEditor:!0,fileCardFor:r.id||null,activeOverlayType:"FileEditor"}),u.forEach(h=>{this.uppy.getPlugin(h.id).selectFile(r)})},this.saveFileEditor=()=>{const{targets:r}=this.getPluginState();ye(this,Me)[Me](r).forEach(u=>{this.uppy.getPlugin(u.id).save()}),this.hideAllPanels()},this.openModal=()=>{const{promise:r,resolve:a}=Cr();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const u=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",u,!1),a()};this.el.addEventListener("animationend",u,!1)}else this.setPluginState({isHidden:!1}),a();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),r},this.closeModal=function(r){r===void 0&&(r={});const{manualClose:a=!0}=r,{isHidden:u,isClosing:h}=i.getPluginState();if(u||h)return;const{promise:c,resolve:y}=Cr();if(i.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),i.opts.animateOpenClose){i.setPluginState({isClosing:!0});const P=()=>{i.setPluginState({isHidden:!0,isClosing:!1}),i.superFocus.cancel(),i.savedActiveElement.focus(),i.el.removeEventListener("animationend",P,!1),y()};i.el.addEventListener("animationend",P,!1)}else i.setPluginState({isHidden:!0}),i.superFocus.cancel(),i.savedActiveElement.focus(),y();if(document.removeEventListener("keydown",i.handleKeyDownInModal),a&&i.opts.browserBackButtonClose){var v;(v=history.state)!=null&&v[i.modalName]&&history.back()}return i.uppy.emit("dashboard:modal-closed"),c},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=r=>{const{capabilities:a}=this.uppy.getState();this.uppy.setState({capabilities:{...a,darkMode:r}})},this.handleSystemDarkModeChange=r=>{const a=r.matches;this.uppy.log(`[Dashboard] Dark mode is ${a?"on":"off"}`),this.setDarkModeCapability(a)},this.toggleFileCard=(r,a)=>{const u=this.uppy.getFile(a);r?this.uppy.emit("dashboard:file-edit-start",u):this.uppy.emit("dashboard:file-edit-complete",u),this.setPluginState({fileCardFor:r?a:null,activeOverlayType:r?"FileCard":null})},this.toggleAddFilesPanel=r=>{this.setPluginState({showAddFilesPanel:r,activeOverlayType:r?"AddFiles":null})},this.addFiles=r=>{const a=r.map(u=>({source:this.id,name:u.name,type:u.type,data:u,meta:{relativePath:u.relativePath||u.webkitRelativePath||null}}));try{this.uppy.addFiles(a)}catch(u){this.uppy.log(u)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(r=>{const a=r[0],{width:u,height:h}=a.contentRect;this.uppy.log(`[Dashboard] resized: ${u} / ${h}`,"debug"),this.setPluginState({containerWidth:u,containerHeight:h,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const r=this.getPluginState(),a=!this.opts.inline&&r.isHidden;!r.areInsidesReadyToBeVisible&&!a&&(this.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=r=>{this.el.contains(r.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableAllFocusableElements=r=>{const a=js(this.el.querySelectorAll(Hp));r?a.forEach(u=>{const h=u.getAttribute("tabindex");h&&(u.dataset.inertTabindex=h),u.setAttribute("tabindex","-1")}):a.forEach(u=>{"inertTabindex"in u.dataset?u.setAttribute("tabindex",u.dataset.inertTabindex):u.removeAttribute("tabindex")}),this.dashboardIsDisabled=r},this.updateBrowserHistory=()=>{var r;(r=history.state)!=null&&r[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=r=>{var a;this.isModalOpen()&&(!r.state||!r.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(a=r.state)!=null&&a[this.modalName]&&history.back()},this.handleKeyDownInModal=r=>{r.keyCode===Jp&&this.requestCloseModal(r),r.keyCode===Tr&&Pr.forModal(r,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=r=>{this.uppy.iteratePlugins(u=>{u.type==="acquirer"&&(u.handleRootPaste==null||u.handleRootPaste(r))});const a=js(r.clipboardData.files);a.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(a))},this.handleInputChange=r=>{r.preventDefault();const a=js(r.target.files);a.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(a))},this.handleDragOver=r=>{var a,u;r.preventDefault(),r.stopPropagation();const h=()=>{let P=!0;return this.uppy.iteratePlugins(O=>{O.canHandleRootDrop!=null&&O.canHandleRootDrop(r)&&(P=!0)}),P},c=()=>{const{types:P}=r.dataTransfer;return P.some(O=>O==="Files")},y=h(),v=c();if(!y&&!v||this.opts.disabled||this.opts.disableLocalFiles&&(v||!y)||!this.uppy.getState().allowNewUpload){r.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}r.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(a=(u=this.opts).onDragOver)==null||a.call(u,r)},this.handleDragLeave=r=>{var a,u;r.preventDefault(),r.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(a=(u=this.opts).onDragLeave)==null||a.call(u,r)},this.handleDrop=async r=>{var a,u;r.preventDefault(),r.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(v=>{v.type==="acquirer"&&(v.handleRootDrop==null||v.handleRootDrop(r))});let h=!1;const c=v=>{this.uppy.log(v,"error"),h||(this.uppy.info(v.message,"error"),h=!0)},y=await qp(r.dataTransfer,{logDropError:c});y.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(y)),(a=(u=this.opts).onDrop)==null||a.call(u,r)},this.handleRequestThumbnail=r=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",r)},this.handleCancelThumbnail=r=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",r)},this.handleKeyDownInInline=r=>{r.keyCode===Tr&&Pr.forInline(r,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=r=>{this.el.contains(document.activeElement)&&this.handlePaste(r)},this.handleComplete=r=>{let{failed:a}=r;this.opts.closeAfterFinish&&a.length===0&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,_t,{writable:!0,value:r=>{const a=r[0];this.canEditFile(a)&&this.openFileEditor(a)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const r=Or(this.opts.trigger);r?r.forEach(a=>a.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("file-editor:complete",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.on("files-added",ye(this,_t)[_t])},this.removeEvents=()=>{const r=Or(this.opts.trigger);!this.opts.inline&&r&&r.forEach(a=>a.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("file-editor:complete",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.off("files-added",ye(this,_t)[_t])},this.superFocusOnEachUpdate=()=>{const r=this.el.contains(document.activeElement),a=document.activeElement===document.body||document.activeElement===null,u=this.uppy.getState().info.length===0,h=!this.opts.inline;u&&(h||r||a&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableAllFocusableElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableAllFocusableElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(r,a)=>{this.uppy.setFileMeta(a,r),this.toggleFileCard(!1,a)},Object.defineProperty(this,et,{writable:!0,value:r=>{const a=this.uppy.getPlugin(r.id);return{...r,icon:a.icon||this.opts.defaultPickerIcon,render:a.render}}}),Object.defineProperty(this,qs,{writable:!0,value:r=>{const a=this.uppy.getPlugin(r.id);return typeof a.isSupported!="function"?!0:a.isSupported()}}),Object.defineProperty(this,Hs,{writable:!0,value:Vs(r=>r.filter(a=>a.type==="acquirer"&&ye(this,qs)[qs](a)).map(ye(this,et)[et]))}),Object.defineProperty(this,Ws,{writable:!0,value:Vs(r=>r.filter(a=>a.type==="progressindicator").map(ye(this,et)[et]))}),Object.defineProperty(this,Me,{writable:!0,value:Vs(r=>r.filter(a=>a.type==="editor").map(ye(this,et)[et]))}),this.render=r=>{const a=this.getPluginState(),{files:u,capabilities:h,allowNewUpload:c}=r,{newFiles:y,uploadStartedFiles:v,completeFiles:P,erroredFiles:O,inProgressFiles:d,inProgressNotPausedFiles:m,processingFiles:w,isUploadStarted:g,isAllComplete:p,isAllErrored:B,isAllPaused:E}=this.uppy.getObjectOfFilesPerState(),A=ye(this,Hs)[Hs](a.targets),C=ye(this,Ws)[Ws](a.targets),U=ye(this,Me)[Me](a.targets);let D;return this.opts.theme==="auto"?D=h.darkMode?"dark":"light":D=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Gp({state:r,isHidden:a.isHidden,files:u,newFiles:y,uploadStartedFiles:v,completeFiles:P,erroredFiles:O,inProgressFiles:d,inProgressNotPausedFiles:m,processingFiles:w,isUploadStarted:g,isAllComplete:p,isAllErrored:B,isAllPaused:E,totalFileCount:Object.keys(u).length,totalProgress:r.totalProgress,allowNewUpload:c,acquirers:A,theme:D,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:a.activePickerPanel,showFileEditor:a.showFileEditor,saveFileEditor:this.saveFileEditor,disableAllFocusableElements:this.disableAllFocusableElements,animateOpenClose:this.opts.animateOpenClose,isClosing:a.isClosing,progressindicators:C,editors:U,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:r.recoveredState,metaFields:a.metaFields,resumableUploads:h.resumableUploads||!1,individualCancellation:h.individualCancellation,isMobileDevice:h.isMobileDevice,fileCardFor:a.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:a.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:a.containerWidth,containerHeight:a.containerHeight,areInsidesReadyToBeVisible:a.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:a.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},this.discoverProviderPlugins=()=>{this.uppy.iteratePlugins(r=>{r&&!r.target&&r.opts&&r.opts.target===this.constructor&&this.addTarget(r)})},this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:r,closeAfterFinish:a}=this.opts;if(r&&a)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:u,allowMultipleUploadBatches:h}=this.uppy.opts;(u||h)&&a&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:c}=this.opts;c&&this.mount(c,this),(this.opts.plugins||[]).forEach(P=>{const O=this.uppy.getPlugin(P);O&&O.mount(this,O)}),this.opts.disableStatusBar||this.uppy.use(zp,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(jp,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(Vp,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailHeight:this.opts.thumbnailHeight,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const v=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${v?"on":"off"}`),this.setDarkModeCapability(v),this.opts.theme==="auto"&&this.darkModeMediaQuery.addListener(this.handleSystemDarkModeChange),this.discoverProviderPlugins(),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const a=this.uppy.getPlugin(`${this.id}:Informer`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableStatusBar){const a=this.uppy.getPlugin(`${this.id}:StatusBar`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableThumbnailGenerator){const a=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);a&&this.uppy.removePlugin(a)}(this.opts.plugins||[]).forEach(a=>{const u=this.uppy.getPlugin(a);u&&u.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery.removeListener(this.handleSystemDarkModeChange),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.modalName=`uppy-Dashboard-${(0,$p.nanoid)()}`,this.defaultLocale=Xp;const n={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Yp,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:()=>{this.uppy.reset(),this.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:()=>this.closeModal(),showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};this.opts={...n,...s},this.i18nInit(),this.superFocus=Wp(),this.ifFocusedOnUppyRecently=!1,this.makeDashboardInsidesVisibleAnywayTimeout=null,this.removeDragOverClassTimeout=null}};Bn.VERSION=Kp.version;var Qp=Bn,Zp=Qp;const ef=ci(Zp);const tf=$t({__name:"FileUploader",props:{uppyOptions:{},dashboardOptions:{},xhrOptions:{},resumableOptions:{}},emits:["uploadSuccess","complete","done"],setup(t,{emit:e}){const s=t,i=e,n=ta(),r=Se();let a;return Nr(()=>{a=new dl(s.uppyOptions),a.use(ef,{inline:!0,target:r.value,proudlyDisplayPoweredByUppy:!1,theme:n.current.value.dark?"dark":"light",doneButtonHandler:()=>{a.cancelAll(),i("done")},...s.dashboardOptions}),a.use(xu,{...s.resumableOptions}),a.on("complete",u=>i("complete",u)),a.on("upload-success",(u,h)=>{i("uploadSuccess",u,h)})}),(u,h)=>(he(),rt("div",{ref_key:"uppyEl",ref:r},null,512))}});const Af=$t({__name:"FileUploaderDialog",props:{isDialogVisible:{type:Boolean,default:!1},maxNumberOfFiles:{default:5},allowedFileTypes:{}},emits:["update:isDialogVisible","done"],setup(t,{emit:e}){const s=e,i=t,n=[{title:"Uploader",icon:"tabler-upload",tab:"uploader"},{title:"gallery",icon:"tabler-photo",tab:"gallery"}],r=Se("uploader"),a=h=>{s("update:isDialogVisible",h)},u=Se([]);return Xs(()=>i.isDialogVisible,()=>u.value=[]),(h,c)=>{const y=aa,v=tf,P=ba;return he(),ht(na,{modelValue:h.isDialogVisible,"onUpdate:modelValue":c[7]||(c[7]=O=>a(O)),class:"v-dialog-sm","content-class":"overflow-visible",scrollable:"","scroll-strategy":"block"},{default:W(()=>[z(y,{onClick:c[0]||(c[0]=O=>a(!1))}),z(Js,null,{default:W(()=>[z(ca,{modelValue:se(r),"onUpdate:modelValue":c[1]||(c[1]=O=>Qt(r)?r.value=O:null),grow:"",stacked:""},{default:W(()=>[(he(),rt(li,null,xr(n,O=>z(pa,{key:O.icon,value:O.tab},{default:W(()=>[z(Rr,{size:"20",start:"",icon:O.icon},null,8,["icon"]),rs(" "+di(h.$t(O.title)),1)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),z(ha,{modelValue:se(r),"onUpdate:modelValue":c[6]||(c[6]=O=>Qt(r)?r.value=O:null),touch:!1},{default:W(()=>[z(Ii,{value:"uploader"},{default:W(()=>[z(v,{"uppy-options":{restrictions:{maxNumberOfFiles:h.maxNumberOfFiles,allowedFileTypes:h.allowedFileTypes}},onUploadSuccess:c[2]||(c[2]=(O,d)=>se(u).push(d.body)),onDone:c[3]||(c[3]=O=>h.$emit("done",se(u)))},null,8,["uppy-options"])]),_:1}),z(Ii,{value:"gallery"},{default:W(()=>[z(sa,{style:{"block-size":"450px"},class:"overflow-auto pa-0"},{default:W(()=>[z(P,{"max-number-selectable-files":h.maxNumberOfFiles,"allowed-file-types":h.allowedFileTypes,selectable:"",variant:"checkbox",grid:{cols:"12",sm:"6"},modelValue:se(u),"onUpdate:modelValue":c[4]||(c[4]=O=>Qt(u)?u.value=O:null),"search-posisions":"0px"},null,8,["max-number-selectable-files","allowed-file-types","modelValue"])]),_:1}),z(ia,{class:"d-flex justify-end gap-3 flex-wrap"},{default:W(()=>[z(ra,{onClick:c[5]||(c[5]=O=>h.$emit("done",se(u)))},{default:W(()=>[rs("Done")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])}}});export{Af as _,ma as a,ba as b};
