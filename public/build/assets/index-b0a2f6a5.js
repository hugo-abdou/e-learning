import{_ as N}from"./ActionButton-42114dd8.js";import{d as y,t as b,I as _,o as m,f,B as s,y as t,dS as k,ap as P,D as V,e as o,ah as R,x as w,aF as x,dT as z,av as B,aP as T,dU as A,dK as E,dV as g,dW as j,dQ as L,aj as M,cZ as U,m as F,G,bh as K,j as Q,n as W,bv as Y,k as Z}from"./main-85c91a26.js";import{V as q}from"./VChip-72ddf64b.js";import{V as v}from"./VSpacer-ceb774a5.js";import{V as H}from"./VPagination-452297c5.js";import{V as J}from"./VMenu-b096078e.js";import{V as O}from"./VList-d1048358.js";const X=y({__name:"PdfType",props:{media:null},setup(l,{expose:n}){const a=b({page:1,pages:0}),e=_({get:()=>a.value.page||0,set:i=>{a.value.page=i}});return n({...a.value}),(i,c)=>{const h=z;return m(),f(x,{class:"media-card"},{default:s(()=>[t(h,{ref_key:"pdfViwer",ref:a,document:l.media,"can-open-preview":""},null,8,["document"]),t(k,{absolute:"",density:"compact",class:"px-2"},{default:s(()=>[t(q,{rounded:"sm",size:"small",class:"ml-1",color:"surface",variant:"elevated"},{default:s(()=>{var d,p;return[P(" page "+V((d=o(a))==null?void 0:d.page)+" of "+V((p=o(a))==null?void 0:p.pages)+" pages ",1)]}),_:1}),t(v),t(H,{color:"surface",variant:"elevated",modelValue:o(e),"onUpdate:modelValue":c[0]||(c[0]=d=>R(e)?e.value=d:null),length:Math.ceil(o(a).pages/1),"total-visible":5},null,8,["modelValue","length"]),t(v),w(i.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3})}}});const ee=B(X,[["__scopeId","data-v-ec13d670"]]),te=y({__name:"ImageType",props:{media:null},setup(l){return(n,a)=>(m(),f(x,{class:"media-card"},{default:s(()=>[t(T,{src:l.media.url,cover:""},null,8,["src"]),t(k,{absolute:"",density:"compact",class:"px-2"},{default:s(()=>[t(v),w(n.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3}))}});const ae=B(te,[["__scopeId","data-v-20186660"]]),oe=y({__name:"VideoType",props:{media:null},setup(l,{expose:n}){const a=b();return n({...a.value}),(e,i)=>{const c=A;return m(),f(c,{ref_key:"plyr",ref:a,src:l.media.url,poster:l.media.thumb_url},null,8,["src","poster"])}}});const se=y({__name:"index",props:{isPreview:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},aspectRatio:null,media:null},emits:["onDelete","update:pdf","update:media"],setup(l,{emit:n}){const a=l,e=b(a.media),i=_(()=>e.value.thumb_url||E(e.value.type)),c=_(()=>({aspectRatio:a.aspectRatio||e.value.width/e.value.height})),h=_(()=>{switch(e.value.type){case g.pdf:return ee;case g.image:return ae;case g.video:return oe;default:throw new Error("Media Type dos not exist")}}),d=_(()=>[{title:"Delete",_if:a.deletable,props:{"prepend-icon":"tabler-trash",onClick:()=>S(e.value)}},{title:"retry",_if:e.value.status===j.Error,props:{"prepend-icon":"tabler-refresh",onClick:$}},{title:"share",_if:!0,props:{"prepend-icon":"tabler-share"}}]),p=L(),re=r=>{p.openMediaDialog(e.value,r)},$=async()=>{try{const r=await p.retry(e.value.id);e.value=r}catch{}},S=r=>{confirm("are you sure you want to delete this media")&&n("onDelete",r.id)};return(r,le)=>{const I=N;return l.isPreview?(m(),f(x,{key:0,color:"surface",class:"h-100 w-100 media-card"},{default:s(()=>[t(T,{style:M(o(c)),src:o(i),cover:""},null,8,["style","src"]),t(k,{absolute:"",density:"compact"},{default:s(()=>[t(U,{style:{width:"85%"},class:"text-white",title:o(e).name},{default:s(()=>[P(V(o(e).name),1)]),_:1},8,["title"]),t(v),t(J,{attach:r.$el,transition:"speed-dial",location:"top end"},{activator:s(({props:u})=>[t(I,F(u,{color:"#fff",variant:"text",icon:"mdi-dots-vertical"}),null,16)]),default:s(()=>[t(O,{items:o(d).filter(({_if:u})=>u)},null,8,["items"]),G("",!0)]),_:1},8,["attach"])]),_:1})]),_:1})):(m(),f(Z(o(h)),{key:1,style:M(o(c)),media:o(e),class:"media-card"},K({_:2},[Q(r.$slots,(u,C)=>({name:C,fn:s(D=>[w(r.$slots,C,W(Y(D||{})),void 0,!0)])}))]),1032,["style","media"]))}}});const me=B(se,[["__scopeId","data-v-af8c1b68"]]);export{me as M};
