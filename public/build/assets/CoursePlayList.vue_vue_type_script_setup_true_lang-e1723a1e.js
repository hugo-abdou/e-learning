import{_ as w}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-2bad32a0.js";import{_ as z}from"./ActionButton-c35f54ff.js";import{_ as L}from"./ResponsiveText.vue_vue_type_script_setup_true_lang-42b06bee.js";import{d as B,r as N,G as $,o,h as p,f as t,c as b,j as A,q as u,F as g,b as n,x as m,k as f,a0 as x,bh as D,y as _,b$ as F,t as J}from"./main-dd42a7da.js";import{b as M,c as O}from"./utils-d59cd350.js";import{a as v,b as V,V as P,c as j}from"./VList-dcf79c63.js";import{V as q}from"./VChip-36ee8e62.js";import{V as E}from"./VSpacer-837f6556.js";const G=!1,te=B({__name:"CoursePlayList",props:{chapters:{},attachment:{}},emits:["update:attachment","play"],setup(k,{expose:I,emit:C}){const y=k,h=C,c=N([]),S=a=>{a[0]&&h("update:attachment",a[0])};return I({next:()=>{var a,s;if(y.attachment){let i=((a=y.attachment)==null?void 0:a.index)+1;((s=c.value[i])==null?void 0:s.type)==="header"&&i++;const l=c.value.find(({index:e})=>i===e);l&&h("update:attachment",l)}},prev:()=>{}}),$(()=>{c.value=y.chapters.reduce((s,{attachments:r,title:i,id:l})=>(r.length&&(s.push({type:"header",title:i,id:l}),s.push(...JSON.parse(JSON.stringify(r.map(e=>({...e,chapter_id:l})))))),s),[]).map((s,r)=>({...s,index:r}));const a=c.value.filter(({type:s})=>s!=="header")[0];h("update:attachment",a)}),(a,s)=>{const r=L,i=z,l=w;return o(),p(P,{lines:"three",border:G,selected:[a.attachment],"onUpdate:selected":S},{default:t(()=>[(o(!0),b(g,null,A(u(c),e=>(o(),b(g,{key:e.id},[e.type!=="header"?(o(),p(v,{key:0,class:"mt-2",value:e,title:e.name},{prepend:t(({isActive:d})=>[e.type==="video"&&e.playing&&d?(o(),p(x,{key:0,class:"position-absolute",style:{"inset-inline-start":"3px"},size:"14",icon:"tabler-pause"})):f("",!0),n(D,{style:{"aspect-ratio":"16/9","inline-size":"100px"},class:"rounded mr-2 bg-background border",src:e.thumb_url||u(M)(e.type),cover:""},null,8,["src"])]),title:t(({title:d})=>[n(r,{text:String(d),"max-lines":2,"char-width":2},{default:t(({text:T})=>[m(_(T),1)]),_:2},1032,["text"])]),default:t(()=>[n(j,{class:"d-flex gap-2 pa-1 align-center"},{default:t(()=>[n(x,{size:"16",icon:u(O)(e.type)},null,8,["icon"]),e.type==="video"?(o(),p(q,{key:0,size:"x-small"},{default:t(()=>[n(x,{icon:"mdi-clock-fast",size:"16",class:"mr-1"}),m(" "+_(u(F)(e.duration)),1)]),_:2},1024)):f("",!0),n(E),e.download?(o(),p(l,{key:1,text:"download"},{default:t(({props:d})=>[n(i,J({size:"x-small",icon:"mdi-download",download:"",href:e.path},d),null,16,["href"])]),_:2},1024)):f("",!0)]),_:2},1024)]),_:2},1032,["value","title"])):(o(),p(v,{key:1},{default:t(()=>[n(V,null,{default:t(()=>[m(_(a.$t("Chapter"))+" - "+_(e.title),1)]),_:2},1024)]),_:2},1024))],64))),128)),u(c).length?f("",!0):(o(),p(v,{key:0},{default:t(()=>[n(V,null,{default:t(()=>[m("Chapter empty")]),_:1})]),_:1}))]),_:1},8,["selected"])}}});export{te as _};
