import{_ as w}from"./CoursePlayList.vue_vue_type_script_setup_true_lang-da1e9d07.js";import{t as P,a3 as M,r as p,Q as B,aA as L,bX as d,w as k,v as l,z as f,A as r,n as s,H as o,x as V,s as S,bV as N,B as _,aa as y,a2 as R,L as T}from"./plugins-c4f6eef2.js";import{M as U}from"./index-b80f65a5.js";import{P as A}from"./vue3-perfect-scrollbar.esm-10b8ead5.js";import{V as E}from"./VSkeletonLoader-06e9f617.js";import{a as h,V as I}from"./VRow-09d0f266.js";import{V as $}from"./VCard-5958db4d.js";import"./InfoTooltip.vue_vue_type_script_setup_true_lang-f00c108e.js";import"./VTooltip-67331cb4.js";import"./VOverlay-c05a2eb8.js";import"./forwardRefs-6ea3df5c.js";import"./scopeId-2f824a6c.js";import"./ActionButton-c071f23c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveText.vue_vue_type_script_setup_true_lang-95cff139.js";import"./utils-ce2588c9.js";import"./useCourseStore-4716e2d5.js";import"./VList-fccd8390.js";import"./index-ef226c9d.js";import"./ssrBoot-c2ff78e8.js";import"./createSimpleFunctional-9b6c5de5.js";import"./VAvatar-0def7634.js";import"./VDivider-330fa8e1.js";import"./VChip-1d481e33.js";import"./VSpacer-11e98961.js";import"./VToolbar-86dabc33.js";import"./_commonjsHelpers-de833af9.js";import"./VPagination-97ee5240.js";import"./VCardActions-02c72c88.js";import"./VCardText-4cd1fd13.js";const j={key:0,class:"position-relative h-100 border rounded"},z={key:0,class:"position-absolute w-100 h-100 d-flex gap-1 align-center justify-center",style:{"background-color":"rgba(0, 0, 0, 56.8%)",inset:"0"}},ke=P({__name:"[media]",setup(H){const m=M(),a=p(),i=p(!1);B();const u=p(),v=p(),C=L(()=>{if(!a.value)return{};if(a.value.type===d.video)return{onReady:e=>{var t;return u.value=(t=e.target)==null?void 0:t.plyr},onEnded:e=>i.value=!0,onPause:e=>a.value.playing=!1,onPlay:e=>a.value.playing=!0};if(a.value.type===d.pdf)return{"onUpdate:pdf":b}}),b=({page:e,pages:t})=>{e==t&&(i.value=!0)},g=()=>{v.value.next(),i.value=!1},x=()=>{var e;((e=a.value)==null?void 0:e.type)===d.video&&setTimeout(()=>{var t;(t=u.value)==null||t.play()},500),i.value=!1};return k(a,e=>{e&&e.type==="video"&&(setTimeout(()=>{var t;(t=u.value)==null||t.play()},500),i.value=!1)}),k(()=>m.params.media,()=>{const e=m.params.media.split("-"),t=e[e.length-2],c=e[e.length-1];console.log({chapterId:c,mediaId:t})},{immediate:!0}),(e,t)=>{const c=w;return l(),f(I,{align:"start",class:"gap-y-2"},{default:r(()=>[s(h,{cols:"12",md:"9",class:"py-0"},{default:r(()=>{var n;return[o(a)?(l(),V("div",j,[(l(),f(o(U),S(o(C),{key:(n=o(a))==null?void 0:n.id,"aspect-ratio":"1.77",media:o(a)}),N({_:2},[o(a).type===o(d).image?{name:"toolbar",fn:r(()=>[s(_,{variant:"elevated",color:"default","append-icon":"mdi-skip-forward",onClick:g},{default:r(()=>[y(" Continue ")]),_:1})]),key:"0"}:void 0]),1040,["media"])),o(i)?(l(),V("div",z,[s(_,{color:"default","prepend-icon":"mdi-rotate-left",onClick:x},{default:r(()=>[y(" Start Over ")]),_:1}),s(_,{color:"default","append-icon":"mdi-skip-forward",onClick:g},{default:r(()=>[y(" Continue ")]),_:1})])):R("",!0)])):(l(),f(o(E),{key:1,type:["image","image"]}))]}),_:1}),s(h,{cols:"12",md:"3",class:"rounded py-0"},{default:r(()=>[s($,null,{default:r(()=>[s(o(A),{options:{wheelPropagation:!0}},{default:r(()=>[s(c,{ref_key:"playList",ref:v,selected:o(a),"onUpdate:selected":t[0]||(t[0]=n=>T(a)?a.value=n:null),"course-id":Number(o(m).params.id)},null,8,["selected","course-id"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ke as default};
