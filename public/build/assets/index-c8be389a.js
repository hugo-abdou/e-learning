import{_ as Q}from"./ActionButton-893daa0c.js";import{d as h,o as i,h as c,f as o,b as t,bk as z,B as $,br as g,b9 as V,_ as M,r as S,a8 as _,v as R,y as N,z as C,q as a,b2 as U,eQ as W,e as T,c4 as Y,c2 as x,eK as m,eR as F,I as G,k as D,cg as J,K as P,al as O,bD as X,bW as Z,j as ee,i as ae,bH as te,bI as se}from"./main-2d2efdef.js";import{b as oe,d as k}from"./utils-cf604421.js";import{V as b}from"./VSpacer-f886726f.js";import{V as j}from"./VChip-5110b4ca.js";import{V as re}from"./VPagination-1f9c92d0.js";import{V as le}from"./VRow-b362c44e.js";import{V as ne}from"./VMenu-1ed28082.js";import{V as ie}from"./VList-3e9a4151.js";const ce=h({__name:"ImageType",props:{media:{}},setup(f){return(l,r)=>(i(),c(V,{class:"media-card"},{default:o(()=>[t(z,{src:l.media.url,cover:""},null,8,["src"]),t(g,{absolute:"",density:"compact",class:"px-2"},{default:o(()=>[t(b),$(l.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3}))}});const de=M(ce,[["__scopeId","data-v-7872693c"]]),pe=h({__name:"PdfType",props:{media:{}},setup(f,{expose:l}){const r=S({page:1,pages:0}),n=_({get:()=>r.value.page||0,set:e=>{r.value.page=e}});return l({...r.value}),(e,y)=>{const p=W;return i(),c(V,{class:"media-card"},{default:o(()=>[t(p,R({ref_key:"pdfViwer",ref:r},e.$attrs,{document:e.media,"can-open-preview":""}),null,16,["document"]),t(g,{absolute:"",density:"compact",class:"px-2"},{default:o(()=>[t(j,{rounded:"sm",size:"small",class:"ml-1",color:"surface",variant:"elevated"},{default:o(()=>{var d,v;return[N(" page "+C((d=a(r))==null?void 0:d.page)+" of "+C((v=a(r))==null?void 0:v.pages)+" pages ",1)]}),_:1}),t(b),t(re,{color:"surface",variant:"elevated",modelValue:a(n),"onUpdate:modelValue":y[0]||(y[0]=d=>U(n)?n.value=d:null),length:Math.ceil(a(r).pages/1),"total-visible":5},null,8,["modelValue","length"]),t(b),$(e.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3})}}});const ue=M(pe,[["__scopeId","data-v-845a5169"]]),me=T("iframe",{src:"https://iframe.mediadelivery.net/embed/179002/b48d09ac-f82b-408f-914b-1129e0553418?autoplay=false&loop=false&muted=false&preload=false&responsive=true",loading:"lazy",style:{border:"0",height:"100%",width:"100%","aspect-ratio":"16/9"},allow:"accelerometer;gyroscope;autoplay;encrypted-media;picture-in-picture;",allowfullscreen:"true"},null,-1),_e=h({inheritAttrs:!1,__name:"VideoType",props:{media:{}},setup(f,{expose:l}){const r=S();return l({...r.value}),(n,e)=>(i(),c(V,null,{default:o(()=>[me]),_:1}))}}),fe={class:"card-header-actions pa-1"},ye={class:"d-flex align-center justify-center w-100 me-2"},ve=h({__name:"index",props:{isPreview:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},aspectRatio:{},media:{}},emits:["onDelete","update:pdf","update:media"],setup(f,{emit:l}){Y();const r=f,n=l,e=S(r.media),y=_(()=>e.value.thumb_url||oe(e.value.type)),p=_(()=>({aspectRatio:r.aspectRatio||e.value.width/e.value.height})),d=_(()=>{switch(e.value.type){case x.pdf:return ue;case x.image:return de;case x.video:return _e;default:throw new Error("Media Type dos not exist")}}),v=_(()=>[{title:"Delete",_if:r.deletable,props:{"prepend-icon":"tabler-trash",onClick:()=>L(e.value)}},{title:"retry",_if:e.value.status===m.Pending||e.value.status===m.Processing,props:{"prepend-icon":"tabler-refresh",onClick:A}},{title:"retry",_if:e.value.status===m.Error||!0,props:{"prepend-icon":"tabler-refresh",onClick:K}}]),w=F(),E=s=>{w.openMediaDialog(e.value,s)},A=async()=>{try{const s=await w.getById(e.value.id);e.value=s,n("update:media",s)}catch{}};G(()=>{});const K=async()=>{try{const s=await w.retry(e.value.id);e.value=s}catch{}},L=s=>{n("onDelete",s.id)};return(s,I)=>{const q=Q;return s.isPreview?(i(),c(V,{key:0,style:P(a(p)),color:"surface",class:"media-card w-100 h-100 overflow-hidden"},{default:o(()=>[T("div",fe,[a(e).status===a(m).Processing||a(e).status===a(m).Error?(i(),c(j,{key:0,variant:"flat",size:"x-small",text:a(k)(a(e).status).lable,color:a(k)(a(e).status).color,"prepend-icon":a(k)(a(e).status).icon},null,8,["text","color","prepend-icon"])):D("",!0)]),t(z,{src:a(y),style:P(a(p)),cover:""},{placeholder:o(()=>[t(le,{class:"fill-height ma-0",align:"center",justify:"center"},{default:o(()=>[t(J,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:1},8,["src","style"]),t(g,{absolute:"",density:"compact",class:"toolbar-overlay pa-2"},{default:o(()=>[T("div",ye,[a(e).url?(i(),c(O,{key:0,onClick:I[0]||(I[0]=u=>E(a(e).type)),icon:"tabler-play",variant:"elevated"})):D("",!0)])]),_:1}),t(g,{absolute:"",density:"compact",class:"toolbar-actions"},{default:o(()=>[t(X,{style:{"inline-size":"85%"},class:"text-white",title:a(e).name},{default:o(()=>[N(C(a(e).name),1)]),_:1},8,["title"]),t(b),t(ne,{attach:s.$el,transition:"speed-dial",location:"top end"},{activator:o(({props:u})=>[t(q,R(u,{color:"#fff",variant:"text",icon:"mdi-dots-vertical"}),null,16)]),default:o(()=>[t(ie,{items:a(v).filter(({_if:u})=>u)},null,8,["items"])]),_:1},8,["attach"])]),_:1})]),_:1},8,["style"])):(i(),c(ae(a(d)),{key:1,style:P(a(p)),media:a(e),class:"media-card"},Z({_:2},[ee(s.$slots,(u,B)=>({name:B,fn:o(H=>[$(s.$slots,B,te(se(H||{})),void 0,!0)])}))]),1032,["style","media"]))}}});const Te=M(ve,[["__scopeId","data-v-7b3573fb"]]);export{Te as _};
