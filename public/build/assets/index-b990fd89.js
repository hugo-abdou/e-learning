import{_ as A}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-0f689ef1.js";import{_ as R}from"./AppTextField.vue_vue_type_script_setup_true_lang-ea0dc63c.js";import{_ as F}from"./AppSelect.vue_vue_type_script_setup_true_lang-6b856003.js";import{a as P,b as x,p as J}from"./utils-c92527c4.js";import{d as O,t as c,J as X,r as q,o as y,i as G,y as t,B as a,au as C,aI as H,aX as K,at as $,e as s,w as n,ai as S,as as d,D as r,ah as u,cN as f,f as D,E as B,a_ as L}from"./main-d3200a92.js";import{u as Q}from"./useCourseStore-3c100176.js";import{l as W}from"./lodash-470102d3.js";import{V as N}from"./VDivider-4e3adaff.js";import{V as Y}from"./VDataTableServer-26098cc2.js";import{V as Z}from"./VSkeletonLoader-0929afb0.js";import{V as T}from"./VChip-a6de0ffd.js";import{V as ee}from"./VMenu-fe26a8c9.js";import{V as te,a as _,b as g}from"./VList-66bd46f3.js";import{V as ae}from"./VPagination-3e74e9d0.js";import"./VInput-a4774bed.js";import"./VSpacer-92b60b12.js";import"./VTextField-ff3454b2.js";import"./VCheckboxBtn-1b353d8a.js";import"./VTable-a87e5866.js";import"./ssrBoot-4f9d510a.js";const se={class:"d-flex justify-end flex-wrap gap-4"},le={class:"d-flex align-center gap-2 py-2 text-capitalize"},oe={class:"d-flex flex-column"},ie={class:"text-base"},re={class:"text-capitalize"},ne={class:"text-capitalize"},ue={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},de={class:"text-sm text-disabled mb-0"},pe=O({__name:"index",setup(ce){const h=c(null),p=c(0),b=c([]),v=c(!1),o=c({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),V=Q(),U=l=>V.deleteCourse(l).then(m),z=l=>V.publishCourse(l).then(m),m=W.debounce(()=>{v.value=!0,V.getCourses(o.value).then(({data:l,meta:i})=>{b.value=l,p.value=i.total}).finally(()=>v.value=!1)},500),E=[{title:"Title",key:"title"},{title:"Status",key:"status",width:70,align:"center"},{title:"Difficulty",key:"difficulty",width:70,align:"center"},{title:"",key:"actions",sortable:!1,width:70}];return X(Object.keys(o.value).map(l=>()=>o.value[l]),([l,i,w])=>{m()}),(l,i)=>{const w=F,I=R,j=q("RouterLink"),M=A;return y(),G("section",null,[t($,null,{default:a(()=>[t(C,{cols:"12"},{default:a(()=>[t(H,{title:l.$t("Cours")},{default:a(()=>[t(K,null,{default:a(()=>[t($,{align:"end"},{default:a(()=>[t(C,{cols:"12",sm:"2"},{default:a(()=>[t(w,{label:l.$t("Items Per Page"),items:[10,20,50,100],modelValue:s(o).itemsPerPage,"onUpdate:modelValue":i[0]||(i[0]=e=>s(o).itemsPerPage=e)},null,8,["label","modelValue"])]),_:1}),t(C,{class:"d-flex gap-5"},{default:a(()=>[t(I,{modelValue:s(o).search,"onUpdate:modelValue":i[1]||(i[1]=e=>s(o).search=e),placeholder:l.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),n("div",se,[t(S,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:a(()=>[d(r(l.$t("Add New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),t(N),t(s(Y),{"items-per-page":s(o).itemsPerPage,"onUpdate:itemsPerPage":i[3]||(i[3]=e=>s(o).itemsPerPage=e),page:s(o).page,"onUpdate:page":i[4]||(i[4]=e=>s(o).page=e),items:s(b),"items-length":s(p),headers:E.map(e=>({...e,title:l.$t(e.title)})),class:"text-no-wrap","onUpdate:options":i[5]||(i[5]=e=>o.value=e),loading:s(v)},{loading:a(()=>[t(s(Z),{class:"pt-2",type:["table-tbody"]})]),"item.title":a(({item:e})=>[n("div",le,[n("div",oe,[n("h6",ie,[t(j,{to:{name:"course-id",params:{id:e.raw.id}},class:"font-weight-medium user-list-name"},{default:a(()=>[d(r(e.raw.title),1)]),_:2},1032,["to"])])])])]),"item.status":a(({item:e})=>[t(T,{color:s(P)(e.raw.status).color},{default:a(()=>[t(u,{icon:s(P)(e.raw.status).icon,class:"ma-1"},null,8,["icon"]),n("span",re,r(e.raw.status),1)]),_:2},1032,["color"])]),"item.difficulty":a(({item:e})=>[t(T,{color:s(x)(e.raw.difficulty).color},{default:a(()=>[t(u,{icon:s(x)(e.raw.difficulty).icon,class:"ma-1"},null,8,["icon"]),n("span",ne,r(e.raw.difficulty),1)]),_:2},1032,["color"])]),"item.actions":a(({item:e})=>[t(S,{icon:"",variant:"text",size:"small",color:"medium-emphasis"},{default:a(()=>[t(u,{size:"24",icon:"tabler-dots-vertical"}),t(ee,{activator:"parent"},{default:a(()=>[t(te,null,{default:a(()=>[t(_,{to:{name:"course-id-edit",params:{id:e.raw.id}}},{prepend:a(()=>[t(u,{icon:"tabler-edit"})]),default:a(()=>[t(g,null,{default:a(()=>[d(r(l.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.raw.status===s(f).Draft||e.raw.status===s(f).Error?(y(),D(_,{key:0,onClick:k=>z(e.raw.id)},{prepend:a(()=>[t(u,{icon:"material-symbols:publish-rounded"})]),default:a(()=>[t(g,null,{default:a(()=>[d(r(l.$t("Publish")),1)]),_:1})]),_:2},1032,["onClick"])):B("",!0),e.raw.status===s(f).Draft||e.raw.status===s(f).Scheduled?(y(),D(_,{key:1,onClick:k=>h.value=e.raw.id},{prepend:a(()=>[t(u,{icon:"solar:calendar-broken"})]),default:a(()=>[t(g,null,{default:a(()=>[d(r(l.$t("Schedule publish")),1)]),_:1})]),_:2},1032,["onClick"])):B("",!0),t(_,{onClick:k=>U(e.raw.id)},{prepend:a(()=>[t(u,{icon:"tabler-trash"})]),default:a(()=>[t(g,null,{default:a(()=>[d(r(l.$t("Delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[t(N),n("div",ue,[n("p",de,r(s(J)(s(o),s(p))),1),t(ae,{"model-value":s(o).page,"onUpdate:modelValue":i[2]||(i[2]=e=>o.value={...s(o),page:e}),length:Math.ceil(s(p)/s(o).itemsPerPage),"total-visible":l.$vuetify.display.xs?1:Math.ceil(s(p)/s(o).itemsPerPage)},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),t(M,{onDone:i[6]||(i[6]=e=>(h.value=null,s(m)())),"course-id":s(h)},null,8,["course-id"])]),_:1})]),_:1})])}}});typeof L=="function"&&L(pe);export{pe as default};
