import{_ as T}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-5233097e.js";import{_ as w}from"./ActionButton-e7de0636.js";import{_ as L}from"./ResponsiveText.vue_vue_type_script_setup_true_lang-bd59f7a9.js";import{d as B,r as N,G as $,o,h as p,f as t,c as b,j as A,p as u,F as g,b as n,v as m,z as f,a0 as h,bp as D,x as _,bR as F,s as J}from"./main-6e33e0f4.js";import{b as M,c as O}from"./utils-fc59a690.js";import{V as P,a as v,b as V,c as R}from"./VList-1acb65c4.js";import{V as j}from"./VChip-fe1053c6.js";import{V as E}from"./VSpacer-7809d458.js";const G=!1,te=B({__name:"CoursePlayList",props:{chapters:{},attachment:{}},emits:["update:attachment","play"],setup(k,{expose:I,emit:z}){const y=k,x=z,c=N([]),C=a=>{a[0]&&x("update:attachment",a[0])};return I({next:()=>{var a,s;if(y.attachment){let i=((a=y.attachment)==null?void 0:a.index)+1;((s=c.value[i])==null?void 0:s.type)==="header"&&i++;const l=c.value.find(({index:e})=>i===e);l&&x("update:attachment",l)}},prev:()=>{}}),$(()=>{c.value=y.chapters.reduce((s,{attachments:r,title:i,id:l})=>(r.length&&(s.push({type:"header",title:i,id:l}),s.push(...JSON.parse(JSON.stringify(r.map(e=>({...e,chapter_id:l})))))),s),[]).map((s,r)=>({...s,index:r}));const a=c.value.filter(({type:s})=>s!=="header")[0];x("update:attachment",a)}),(a,s)=>{const r=L,i=w,l=T;return o(),p(P,{lines:"three",border:G,selected:[a.attachment],"onUpdate:selected":C},{default:t(()=>[(o(!0),b(g,null,A(u(c),e=>(o(),b(g,{key:e.id},[e.type!=="header"?(o(),p(v,{key:0,class:"mt-2",value:e,title:e.name},{prepend:t(({isActive:d})=>[e.type==="video"&&e.playing&&d?(o(),p(h,{key:0,class:"position-absolute",style:{"inset-inline-start":"3px"},size:"14",icon:"tabler-pause"})):f("",!0),n(D,{style:{"aspect-ratio":"16/9","inline-size":"100px"},class:"rounded mr-2 bg-background border",src:e.thumb_url||u(M)(e.type),cover:""},null,8,["src"])]),title:t(({title:d})=>[n(r,{text:String(d),"max-lines":2,"char-width":2},{default:t(({text:S})=>[m(_(S),1)]),_:2},1032,["text"])]),default:t(()=>[n(R,{class:"d-flex gap-2 pa-1 align-center"},{default:t(()=>[n(h,{size:"16",icon:u(O)(e.type)},null,8,["icon"]),e.type==="video"?(o(),p(j,{key:0,size:"x-small"},{default:t(()=>[n(h,{icon:"mdi-clock-fast",size:"16",class:"mr-1"}),m(" "+_(u(F)(e.duration)),1)]),_:2},1024)):f("",!0),n(E),e.download?(o(),p(l,{key:1,text:"download"},{default:t(({props:d})=>[n(i,J({size:"x-small",icon:"mdi-download",download:"",href:e.path},d),null,16,["href"])]),_:2},1024)):f("",!0)]),_:2},1024)]),_:2},1032,["value","title"])):(o(),p(v,{key:1},{default:t(()=>[n(V,null,{default:t(()=>[m(_(a.$t("Chapter"))+" - "+_(e.title),1)]),_:2},1024)]),_:2},1024))],64))),128)),u(c).length?f("",!0):(o(),p(v,{key:0},{default:t(()=>[n(V,null,{default:t(()=>[m("Chapter empty")]),_:1})]),_:1}))]),_:1},8,["selected"])}}});export{te as _};
