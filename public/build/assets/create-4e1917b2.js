import{_ as R}from"./CourseChaptersForm.vue_vue_type_script_setup_true_lang-b1a877fd.js";import{_ as W}from"./CourseDetailsForm.vue_vue_type_script_setup_true_lang-4f8d9238.js";import{V as U}from"./VSlideGroupItem-966d6ead.js";import{d as E,t as S,G as w,aP as H,o,f as _,B as c,i as m,F as B,j as O,w as n,z as L,e as s,y as i,ah as f,D as v,E as g,ak as F,s as T,at as q,au as N,ai as x,as as z,aW as $}from"./main-6856e496.js";import{V as J}from"./VSlideGroup-1ea281a1.js";import{u as K}from"./useCourseStore-925d065a.js";import{V as M,a as D}from"./VWindowItem-78145d21.js";import{V as Q}from"./VContainer-04b439fa.js";import"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-e4bbeb16.js";import"./GalleryView.vue_vue_type_script_setup_true_lang-27e7cfff.js";import"./utils-3e673e05.js";import"./VChip-bb22c723.js";import"./VSpacer-6c1ac7c1.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-24a58000.js";import"./VInput-05f64f58.js";import"./VTextField-3f8fbc0a.js";import"./VCheckbox-de9fcfb8.js";import"./VCheckboxBtn-a53b3bbd.js";import"./lodash-9761b882.js";import"./validators-f52bbb1d.js";import"./VExpansionPanel-62a31f2b.js";import"./VTooltip-4a77e37d.js";import"./VDivider-42d2cf99.js";import"./VForm-3c4b92a0.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-29d1b390.js";import"./VList-83a806ee.js";import"./ssrBoot-4fa9a4ce.js";import"./VMenu-02b0b56f.js";import"./VSwitch-6d3d89c5.js";const X=["onClick"],Y={key:0,class:"stepper-icon-step text-high-emphasis d-flex align-center gap-2"},Z={class:"stepper-icon"},ee={class:"stepper-title font-weight-medium mb-0"},te={key:0,class:"stepper-subtitle"},se={class:"text-sm"},oe={key:1,class:"d-flex align-center gap-x-2"},ae={class:"d-flex align-center gap-2"},ie={class:"d-flex align-center justify-center",style:{"block-size":"24px","inline-size":"24px"}},re={key:0,class:"stepper-step-indicator"},le={class:"text-h4 step-number"},ne={style:{"line-height":"0"}},ce={class:"text-sm font-weight-medium step-title"},pe={key:0,class:"text-xs step-subtitle"},ue={key:0,class:"stepper-step-line"},de=E({__name:"AppStepper",props:{items:null,currentStep:{default:0},direction:{default:"horizontal"},iconSize:{default:52},isActiveStepValid:{type:Boolean,default:void 0}},emits:["update:currentStep"],setup(A,{emit:r}){const e=A,l=S(e.currentStep||0),y=w(()=>p=>p<l.value?"stepper-steps-completed":p===l.value?"stepper-steps-active":""),V=w(()=>p=>e.direction==="horizontal"&&e.items.length-1!==p),h=w(()=>e.isActiveStepValid!==void 0);return H(()=>{e.currentStep!==void 0&&e.currentStep<e.items.length&&e.currentStep>=0&&(l.value=e.currentStep),r("update:currentStep",l.value)}),(p,u)=>(o(),_(J,{modelValue:s(l),"onUpdate:modelValue":u[0]||(u[0]=t=>F(l)?l.value=t:null),class:"app-stepper","show-arrows":"",direction:e.direction},{default:c(()=>[(o(!0),m(B,null,O(e.items,(t,a)=>(o(),_(U,{key:t.title,value:a},{default:c(()=>[n("div",{class:L(["cursor-pointer mx-1",[!e.isActiveStepValid&&s(h)&&"stepper-steps-invalid",s(y)(a)]]),onClick:b=>!s(h)&&r("update:currentStep",a)},[t.icon?(o(),m("div",Y,[n("div",{class:L(["d-flex align-center gap-4 step-wrapper",[e.direction==="horizontal"&&"flex-column"]])},[n("div",Z,[i(f,{icon:t.icon,size:t.size||e.iconSize},null,8,["icon","size"])]),n("div",null,[n("p",ee,v(t.title),1),t.subtitle?(o(),m("span",te,[n("span",se,v(t.subtitle),1)])):g("",!0)])],2),s(V)(a)?(o(),_(f,{key:0,class:"flip-in-rtl stepper-chevron-indicator mx-6",size:"24",icon:"tabler-chevron-right"})):g("",!0)])):(o(),m("div",oe,[n("div",ae,[n("div",ie,[a>=s(l)?(o(),m(B,{key:0},[!s(h)||e.isActiveStepValid||a!==s(l)?(o(),m("div",re)):(o(),_(f,{key:1,icon:"tabler-alert-circle",size:"24",color:"error"}))],64)):(o(),_(f,{key:1,icon:"custom-check-circle",class:"stepper-step-icon",size:"24"}))]),n("h4",le,v((a+1).toString().padStart(2,"0")),1)]),n("div",ne,[n("h6",ce,v(t.title),1),t.subtitle?(o(),m("span",pe,v(t.subtitle),1)):g("",!0)]),s(V)(a)?(o(),m("div",ue)):g("",!0)]))],10,X)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","direction"]))}});const me={class:"d-flex justify-space-between mt-8"},_e=E({__name:"create",setup(A){const r=S(0);S({});const e=S([{icon:"tabler-clipboard",title:"Details",subtitle:"Enter Coure Details",discription:"Provide data with this form to create your Coure",component:null},{icon:"grommet-icons:chapter-add",title:"Chapters",subtitle:"Add Chapters",discription:"Add Chapters",component:null}]),l=S(),y=async()=>{var u,t;const p=e.value[r.value];try{if(p.title.toLocaleLowerCase()==="details"){const a=await((u=p.component)==null?void 0:u.validate());l.value=await h.createCourse(a)}if(p.title.toLocaleLowerCase()==="chapters"&&l.value){const b=(await((t=p.component)==null?void 0:t.validate())).map(({title:k,documents:I,video:C,is_main:P},j)=>({title:k,is_main:P,video:(C==null?void 0:C.id)||null,documents:I.map(({id:G})=>G),order:j})),d=l.value.id;await Promise.all(b.map(k=>h.createChapter(d,k))),V.push({name:"course"})}e.value.length-1>r.value&&r.value++}catch{}},V=T(),h=K();return(p,u)=>{const t=de,a=W,b=R;return o(),_(Q,null,{default:c(()=>[i(q,{align:"center"},{default:c(()=>[i(N,{cols:"12"},{default:c(()=>[i(t,{"current-step":s(r),direction:"horizontal",items:s(e),"icon-size":"22",class:"stepper-icon-step-bg"},null,8,["current-step","items"])]),_:1}),i(N,{cols:"12"},{default:c(()=>[i(M,{modelValue:s(r),"onUpdate:modelValue":u[0]||(u[0]=d=>F(r)?r.value=d:null),class:"disable-tab-transition stepper-content mt-5"},{default:c(()=>[i(D,null,{default:c(()=>[i(a,{ref:d=>s(e)[0].component=d},null,512)]),_:1}),i(D,null,{default:c(()=>[i(b,{ref:d=>s(e)[1].component=d},null,512)]),_:1})]),_:1},8,["modelValue"]),n("div",me,[i(x,{variant:"plain",color:"secondary",disabled:s(r)===0,onClick:u[1]||(u[1]=d=>r.value--)},{default:c(()=>[i(f,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),z(" Previous ")]),_:1},8,["disabled"]),s(e).length-1===s(r)?(o(),_(x,{key:0,color:"success",onClick:y},{default:c(()=>[z(" submit "),i(f,{icon:"tabler-check",end:"",class:"flip-in-rtl"})]),_:1})):(o(),_(x,{key:1,variant:"plain",onClick:y},{default:c(()=>[z(" Next "),i(f,{icon:"tabler-arrow-right",end:"",class:"flip-in-rtl"})]),_:1}))])]),_:1})]),_:1})]),_:1})}}});typeof $=="function"&&$(_e);export{_e as default};
