import{_ as O}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-6f5fff48.js";import{_ as W}from"./AppTextField.vue_vue_type_script_setup_true_lang-24a58000.js";import{_ as q}from"./AppSelect.vue_vue_type_script_setup_true_lang-29d1b390.js";import{a as D,b as B,p as G}from"./utils-3e673e05.js";import{d as H,t as f,J as K,r as Q,o as d,i as w,y as t,B as a,au as C,aI as X,aT as Y,at as L,e as s,w as r,ai as T,as as c,D as n,ah as u,F as z,j as Z,f as k,aL as ee,aS as I,E as P,cJ as _,aW as M}from"./main-6856e496.js";import{u as te}from"./useCourseStore-925d065a.js";import{l as ae}from"./lodash-9761b882.js";import{V as U}from"./VDivider-42d2cf99.js";import{V as se,a as le}from"./VPagination-cbe1c6c4.js";import{V as oe}from"./VSkeletonLoader-a6222a43.js";import{V as j}from"./VChip-bb22c723.js";import{V as ie}from"./VMenu-02b0b56f.js";import{V as re,a as v,b as h}from"./VList-83a806ee.js";import"./VInput-05f64f58.js";import"./VSpacer-6c1ac7c1.js";import"./VTextField-3f8fbc0a.js";import"./VCheckboxBtn-a53b3bbd.js";import"./VTable-62d9e2e5.js";import"./ssrBoot-4fa9a4ce.js";const ne={class:"d-flex justify-end flex-wrap gap-4"},ue={class:"d-flex align-center gap-2 py-2 text-capitalize"},de={class:"d-flex flex-column"},ce={class:"text-base"},pe={class:"text-capitalize"},me={class:"text-capitalize"},fe={class:"v-avatar-group pa-2 staked-images"},ge={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},_e={class:"text-sm text-disabled mb-0"},ve=H({__name:"index",setup(he){const y=f(null),p=f(0),x=f([]),V=f(!1),o=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),b=te(),E=l=>b.deleteCourse(l).then(g),N=l=>b.publishCourse(l).then(g),g=ae.debounce(()=>{V.value=!0,b.getCourses({...o.value,additional:{hasMedia:!0}}).then(({data:l,meta:i})=>{x.value=l,p.value=i.total}).finally(()=>V.value=!1)},500),A=[{title:"Title",key:"title"},{title:"Media",key:"media",sortable:!1},{title:"Status",key:"status",width:70,align:"center"},{title:"Difficulty",key:"difficulty",width:70,align:"center"},{title:"",key:"actions",sortable:!1,width:70}];return K(Object.keys(o.value).map(l=>()=>o.value[l]),([l,i,$])=>{g()}),(l,i)=>{const $=q,F=W,R=Q("RouterLink"),J=O;return d(),w("section",null,[t(L,null,{default:a(()=>[t(C,{cols:"12"},{default:a(()=>[t(X,{title:l.$t("Cours")},{default:a(()=>[t(Y,null,{default:a(()=>[t(L,{align:"end"},{default:a(()=>[t(C,{cols:"12",sm:"2"},{default:a(()=>[t($,{label:l.$t("Items Per Page"),items:[10,20,50,100],modelValue:s(o).itemsPerPage,"onUpdate:modelValue":i[0]||(i[0]=e=>s(o).itemsPerPage=e)},null,8,["label","modelValue"])]),_:1}),t(C,{class:"d-flex gap-5"},{default:a(()=>[t(F,{modelValue:s(o).search,"onUpdate:modelValue":i[1]||(i[1]=e=>s(o).search=e),placeholder:l.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),r("div",ne,[t(T,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:a(()=>[c(n(l.$t("Add New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),t(U),t(s(se),{"items-per-page":s(o).itemsPerPage,"onUpdate:itemsPerPage":i[3]||(i[3]=e=>s(o).itemsPerPage=e),page:s(o).page,"onUpdate:page":i[4]||(i[4]=e=>s(o).page=e),items:s(x),"items-length":s(p),headers:A.map(e=>({...e,title:l.$t(e.title)})),class:"text-no-wrap","onUpdate:options":i[5]||(i[5]=e=>o.value=e),loading:s(V)},{loading:a(()=>[t(s(oe),{class:"pt-2",type:["table-tbody"]})]),"item.title":a(({item:e})=>[r("div",ue,[r("div",de,[r("h6",ce,[t(R,{to:{name:"course-id",params:{id:e.raw.id}},class:"font-weight-medium user-list-name"},{default:a(()=>[c(n(e.raw.title),1)]),_:2},1032,["to"])])])])]),"item.status":a(({item:e})=>[t(j,{color:s(D)(e.raw.status).color},{default:a(()=>[t(u,{icon:s(D)(e.raw.status).icon,class:"ma-1"},null,8,["icon"]),r("span",pe,n(e.raw.status),1)]),_:2},1032,["color"])]),"item.difficulty":a(({item:e})=>[t(j,{color:s(B)(e.raw.difficulty).color},{default:a(()=>[t(u,{icon:s(B)(e.raw.difficulty).icon,class:"ma-1"},null,8,["icon"]),r("span",me,n(e.raw.difficulty),1)]),_:2},1032,["color"])]),"item.media":a(({item:e})=>[r("div",fe,[(d(!0),w(z,null,Z(e.raw.media,(m,S)=>(d(),w(z,{key:S},[S<4?(d(),k(ee,{key:0,variant:"outlined",rounded:"lg",style:{width:"70px"},size:"52",class:"relative"},{default:a(()=>[t(I,{src:m,style:{top:"0"},class:"w-100 h-100 position-absolute blurred-background",cover:""},null,8,["src"]),t(I,{cover:"",src:m},null,8,["src"])]),_:2},1024)):P("",!0)],64))),128))])]),"item.actions":a(({item:e})=>[t(T,{icon:"",variant:"text",size:"small",color:"medium-emphasis"},{default:a(()=>[t(u,{size:"24",icon:"tabler-dots-vertical"}),t(ie,{activator:"parent"},{default:a(()=>[t(re,null,{default:a(()=>[t(v,{to:{name:"course-id-edit",params:{id:e.raw.id}}},{prepend:a(()=>[t(u,{icon:"tabler-edit"})]),default:a(()=>[t(h,null,{default:a(()=>[c(n(l.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.raw.status===s(_).Draft||e.raw.status===s(_).Error?(d(),k(v,{key:0,onClick:m=>N(e.raw.id)},{prepend:a(()=>[t(u,{icon:"material-symbols:publish-rounded"})]),default:a(()=>[t(h,null,{default:a(()=>[c(n(l.$t("Publish")),1)]),_:1})]),_:2},1032,["onClick"])):P("",!0),e.raw.status===s(_).Draft||e.raw.status===s(_).Scheduled?(d(),k(v,{key:1,onClick:m=>y.value=e.raw.id},{prepend:a(()=>[t(u,{icon:"solar:calendar-broken"})]),default:a(()=>[t(h,null,{default:a(()=>[c(n(l.$t("Schedule publish")),1)]),_:1})]),_:2},1032,["onClick"])):P("",!0),t(v,{onClick:m=>E(e.raw.id)},{prepend:a(()=>[t(u,{icon:"tabler-trash"})]),default:a(()=>[t(h,null,{default:a(()=>[c(n(l.$t("Delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[t(U),r("div",ge,[r("p",_e,n(s(G)(s(o),s(p))),1),t(le,{"model-value":s(o).page,"onUpdate:modelValue":i[2]||(i[2]=e=>o.value={...s(o),page:e}),length:Math.ceil(s(p)/s(o).itemsPerPage),"total-visible":l.$vuetify.display.xs?1:Math.ceil(s(p)/s(o).itemsPerPage)},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),t(J,{onDone:i[6]||(i[6]=e=>(y.value=null,s(g)())),"course-id":s(y)},null,8,["course-id"])]),_:1})]),_:1})])}}});typeof M=="function"&&M(ve);export{ve as default};
