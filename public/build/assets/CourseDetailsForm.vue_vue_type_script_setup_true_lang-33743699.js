import{_ as ne}from"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-96225a97.js";import{_ as ie}from"./AppSelect.vue_vue_type_script_setup_true_lang-7047b746.js";import{_ as se}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-bdcf6d8e.js";import{a2 as re,ap as ue,c1 as de,ay as ce,a6 as I,r as x,a5 as fe,bL as me,G as ve,w as h,aR as pe,aa as xe,bN as Ve,b as t,s as B,F as S,J as O,at as ge,c2 as be,c3 as ye,aZ as E,c4 as he,a8 as we,a7 as _e,d as Ce,bC as Fe,c5 as L,o as H,c as J,f as r,p as i,bb as ke,bi as Pe,bj as $e,h as Ie,aj as Re,e as Be,a0 as Se,v as Ue,x as De}from"./main-a2dafca8.js";import{r as Z}from"./validators-f52bbb1d.js";import{M as Te}from"./index-81056f03.js";import{U as Me}from"./utils-6c19ea7e.js";import{V as Ne}from"./VForm-f835a97e.js";import{V as ze,a as R}from"./VRow-04a39927.js";import{a as Ae,u as Ee,V as K,b as He}from"./VInput-07e5c4dd.js";import{a as Ge,V as qe}from"./VTextField-7a6c51ae.js";import{m as je,f as Oe,V as Le}from"./VField-90969b14.js";const Je=re({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...Ae(),...je()},"VTextarea"),Ze=ue()({name:"VTextarea",directives:{Intersect:de},inheritAttrs:!1,props:Je(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,U){let{attrs:k,emit:w,slots:u}=U;const a=ce(e,"modelValue"),{isFocused:f,focus:D,blur:T}=Ee(e),o=I(()=>typeof e.counterValue=="function"?e.counterValue(a.value):(a.value||"").toString().length),s=I(()=>{if(k.maxlength)return k.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function V(l,c){var d,m;!e.autofocus||!l||(m=(d=c[0].target)==null?void 0:d.focus)==null||m.call(d)}const _=x(),g=x(),n=fe(""),C=x(),Q=I(()=>e.persistentPlaceholder||f.value||e.active);function M(){var l;C.value!==document.activeElement&&((l=C.value)==null||l.focus()),f.value||D()}function W(l){M(),w("click:control",l)}function X(l){w("mousedown:control",l)}function Y(l){l.stopPropagation(),M(),E(()=>{a.value="",he(e["onClick:clear"],l)})}function ee(l){var d;const c=l.target;if(a.value=c.value,(d=e.modelModifiers)!=null&&d.trim){const m=[c.selectionStart,c.selectionEnd];E(()=>{c.selectionStart=m[0],c.selectionEnd=m[1]})}}const b=x(),P=x(+e.rows),N=I(()=>["plain","underlined"].includes(e.variant));me(()=>{e.autoGrow||(P.value=+e.rows)});function y(){e.autoGrow&&E(()=>{if(!b.value||!g.value)return;const l=getComputedStyle(b.value),c=getComputedStyle(g.value.$el),d=parseFloat(l.getPropertyValue("--v-field-padding-top"))+parseFloat(l.getPropertyValue("--v-input-padding-top"))+parseFloat(l.getPropertyValue("--v-field-padding-bottom")),m=b.value.scrollHeight,$=parseFloat(l.lineHeight),z=Math.max(parseFloat(e.rows)*$+d,parseFloat(c.getPropertyValue("--v-input-control-height"))),A=parseFloat(e.maxRows)*$+d||1/0,p=_e(m??0,z,A);P.value=Math.floor((p-d)/$),n.value=we(p)})}ve(y),h(a,y),h(()=>e.rows,y),h(()=>e.maxRows,y),h(()=>e.density,y);let v;return h(b,l=>{l?(v=new ResizeObserver(y),v.observe(b.value)):v==null||v.disconnect()}),pe(()=>{v==null||v.disconnect()}),xe(()=>{const l=!!(u.counter||e.counter||e.counterValue),c=!!(l||u.details),[d,m]=Ve(k),[{modelValue:$,...z}]=K.filterProps(e),[A]=Oe(e);return t(K,B({ref:_,modelValue:a.value,"onUpdate:modelValue":p=>a.value=p,class:["v-textarea v-text-field",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-text-field--prefixed":e.prefix,"v-text-field--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow,"v-text-field--plain-underlined":N.value},e.class],style:e.style},d,z,{centerAffix:P.value===1&&!N.value,focused:f.value}),{...u,default:p=>{let{isDisabled:F,isDirty:G,isReadonly:te,isValid:ae}=p;return t(Le,B({ref:g,style:{"--v-textarea-control-height":n.value},onClick:W,onMousedown:X,"onClick:clear":Y,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},A,{active:Q.value||G.value,centerAffix:P.value===1&&!N.value,dirty:G.value||e.dirty,disabled:F.value,focused:f.value,error:ae.value===!1}),{...u,default:le=>{let{props:{class:q,...j}}=le;return t(S,null,[e.prefix&&t("span",{class:"v-text-field__prefix"},[e.prefix]),O(t("textarea",B({ref:C,class:q,value:a.value,onInput:ee,autofocus:e.autofocus,readonly:te.value,disabled:F.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:M,onBlur:T},j,m),null),[[ge("intersect"),{handler:V},null,{once:!0}]]),e.autoGrow&&O(t("textarea",{class:[q,"v-textarea__sizer"],id:`${j.id}-sizer`,"onUpdate:modelValue":oe=>a.value=oe,ref:b,readonly:!0,"aria-hidden":"true"},null),[[be,a.value]]),e.suffix&&t("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:c?p=>{var F;return t(S,null,[(F=u.details)==null?void 0:F.call(u,p),l&&t(S,null,[t("span",null,null),t(Ge,{active:e.persistentCounter||f.value,value:o.value,max:s.value},u.counter)])])}:void 0})}),ye({},_,g,C)}}),Ke={key:0,style:{"max-block-size":"200px"},class:"h-100"},Qe={class:"d-flex flex-column align-center"},ut=Ce({__name:"CourseDetailsForm",props:{course:{default:()=>({title:"",description:"",status:Fe.Draft,difficulty:L.Beginner,thumbnail:null,prerequisite_id:null})}},setup(e,{expose:U,emit:k}){const w=e,u=x(!1),a=x(w.course),f=x({}),D=async()=>{try{const{valid:o}=await f.value.validate();return o?Promise.resolve(a.value):Promise.reject(new Error("validation faild"))}catch(o){throw o}},T=o=>{a.value.thumbnail=o[0].thumb_url,u.value=!1};return U({formEl:f,validate:D}),h(()=>w.course,o=>{a.value=o}),(o,s)=>{const V=se,_=ie,g=ne;return H(),J(S,null,[t(i(Ne),{ref_key:"formEl",ref:f},{default:r(()=>[t(Pe,null,{default:r(()=>[t($e,null,{default:r(()=>[t(ze,{class:"mt-0"},{default:r(()=>[t(R,{cols:"12",md:"4"},{default:r(()=>[i(a).thumbnail?(H(),J("div",Ke,[t(Te,{media:{thumb_url:i(a).thumbnail,status:2,type:"image"},deletable:"","is-preview":"",onOnDelete:s[0]||(s[0]=n=>i(a).thumbnail=null)},null,8,["media"])])):(H(),Ie(V,{key:1,text:o.$t("media.upload.description")},{default:r(({props:n})=>[t(Re,B({...n,...i(Me),style:"min-height: 130px"},{onClick:s[1]||(s[1]=C=>u.value=!0)}),{default:r(()=>[Be("div",Qe,[t(Se,{icon:"flat-color-icons:add-image",size:"28"}),t(He,{class:"mt-2"},{default:r(()=>[Ue(De(o.$t("media.thumbnale")),1)]),_:1})])]),_:2},1040)]),_:1},8,["text"]))]),_:1}),t(R,{cols:"12",md:"8"},{default:r(()=>[t(qe,{modelValue:i(a).title,"onUpdate:modelValue":s[2]||(s[2]=n=>i(a).title=n),rules:[i(Z)],label:o.$t("course.fields.title.label"),class:"mb-5"},{"append-inner":r(()=>[t(V,{text:o.$t("course.fields.title.description")},null,8,["text"])]),_:1},8,["modelValue","rules","label"]),t(Ze,{modelValue:i(a).description,"onUpdate:modelValue":s[3]||(s[3]=n=>i(a).description=n),rules:[i(Z)],label:o.$t("course.fields.description.label")},{"append-inner":r(()=>[t(V,{text:o.$t("course.fields.description.description")},null,8,["text"])]),_:1},8,["modelValue","rules","label"])]),_:1}),t(R,{cols:"12",sm:"6"},{default:r(()=>[t(_,{modelValue:i(a).difficulty,"onUpdate:modelValue":s[4]||(s[4]=n=>i(a).difficulty=n),items:Object.values(i(L)).map(n=>({title:o.$t(`course.fields.difficulty.options.${n}`),value:n})),label:o.$t("course.fields.difficulty.label")},{"append-inner":r(()=>[t(V,{text:o.$t("course.fields.difficulty.description")},null,8,["text"])]),_:1},8,["modelValue","items","label"])]),_:1}),t(R,{cols:"12",sm:"6"},{default:r(()=>[t(_,{modelValue:i(a).prerequisite_id,"onUpdate:modelValue":s[5]||(s[5]=n=>i(a).prerequisite_id=n),items:[],label:o.$t("course.fields.prerequisite.label")},{"append-inner":r(()=>[t(V,{text:o.$t("course.fields.prerequisite.description")},null,8,["text"])]),_:1},8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),t(g,{"is-dialog-visible":i(u),"onUpdate:isDialogVisible":s[6]||(s[6]=n=>ke(u)?u.value=n:null),"allowed-file-types":["image/*"],"max-number-of-files":1,onDone:T},null,8,["is-dialog-visible"])],64)}}});export{ut as _};
