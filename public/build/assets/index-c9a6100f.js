import{_ as F}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-5265f034.js";import{_ as q}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-a31bc9e3.js";import{_ as G}from"./AppTextField.vue_vue_type_script_setup_true_lang-f6764959.js";import{_ as J}from"./AppSelect.vue_vue_type_script_setup_true_lang-cf974350.js";import{d as K,t as f,L as O,r as Q,o as d,i as $,y as a,B as s,ar as b,aF as H,aQ as W,aq as S,e as t,w as n,af as D,ap as p,D as r,cI as X,cJ as B,cK as c,f as g,E as u,G as k,cL as L,aU as Y,aV as T}from"./main-85c91a26.js";import{u as Z}from"./useCourseStore-8c81fa27.js";import{l as ee}from"./lodash-2f49d3d1.js";import{f as te}from"./formatters-2598f6f8.js";import{V as U}from"./VDivider-fc49786d.js";import{V as ae}from"./VDataTableServer-7728fcc0.js";import{V as z}from"./VChip-72ddf64b.js";import{V as se}from"./VMenu-b096078e.js";import{V as oe,a as h,b as v}from"./VList-d1048358.js";import{V as le}from"./VPagination-452297c5.js";import"./DateTimePicker.vue_vue_type_style_index_0_lang-74170f9b.js";import"./VInput-ad0c2452.js";import"./VSpacer-ceb774a5.js";import"./VTooltip-9a294455.js";import"./VTextField-97301478.js";import"./VSelect-d6943ac4.js";import"./VCheckboxBtn-c00e4a70.js";import"./VTable-cf305d2d.js";const ie={class:"d-flex justify-end flex-wrap gap-4"},re={class:"d-flex align-center gap-2 py-2 text-capitalize"},ne={class:"d-flex flex-column"},ue={class:"text-base"},de={class:"text-capitalize ml-1"},pe={key:0,class:"text-capitalize ml-1"},ce={class:"text-capitalize"},me={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},fe={class:"text-sm text-disabled mb-0"},_e=K({__name:"index",setup(ge){const y=f(null),m=f(0),V=f([]),w=f(!1),l=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),C=Z(),E=o=>C.deleteCourse(o).then(_),I=o=>C.publishCourse(o).then(_),_=ee.debounce(()=>{V.value.length||(w.value=!0),C.getCourses(l.value).then(({data:o,meta:i})=>{V.value=o,m.value=i.total}).finally(()=>w.value=!1)},500),N=[{title:"Title",key:"title"},{title:"Status",key:"status",width:70},{title:"Difficulty",key:"difficulty",width:70},{title:"",key:"actions",sortable:!1,width:70}];return O(Object.keys(l.value).map(o=>()=>l.value[o]),([o,i,x])=>{_()}),(o,i)=>{const x=J,j=G,M=Q("RouterLink"),A=q,R=F;return d(),$("section",null,[a(S,null,{default:s(()=>[a(b,{cols:"12"},{default:s(()=>[a(H,{title:o.$t("Cours")},{default:s(()=>[a(W,null,{default:s(()=>[a(S,{align:"end"},{default:s(()=>[a(b,{cols:"12",sm:"2"},{default:s(()=>[a(x,{label:o.$t("Items Per Page"),items:[10,20,50,100],modelValue:t(l).itemsPerPage,"onUpdate:modelValue":i[0]||(i[0]=e=>t(l).itemsPerPage=e)},null,8,["label","modelValue"])]),_:1}),a(b,{class:"d-flex gap-5"},{default:s(()=>[a(j,{modelValue:t(l).search,"onUpdate:modelValue":i[1]||(i[1]=e=>t(l).search=e),placeholder:o.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),n("div",ie,[a(D,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:s(()=>[p(r(o.$t("Add New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(U),a(t(ae),{"items-per-page":t(l).itemsPerPage,"onUpdate:itemsPerPage":i[3]||(i[3]=e=>t(l).itemsPerPage=e),page:t(l).page,"onUpdate:page":i[4]||(i[4]=e=>t(l).page=e),items:t(V),"items-length":t(m),headers:N.map(e=>({...e,title:o.$t(e.title)})),class:"text-no-wrap","onUpdate:options":i[5]||(i[5]=e=>l.value=e),loading:t(w)},{loading:s(()=>[a(t(X),{class:"pt-2",type:["table-tbody"]})]),"item.title":s(({item:e})=>[n("div",re,[n("div",ne,[n("h6",ue,[a(M,{to:{name:"course-id",params:{id:e.raw.id}},class:"font-weight-medium user-list-name"},{default:s(()=>[p(r(e.raw.title),1)]),_:2},1032,["to"])])])])]),"item.status":s(({item:e})=>[a(z,{color:t(B)(e.raw.status).color},{prepend:s(()=>[e.raw.status===t(c).Scheduled?(d(),g(A,{key:0,icon:"mdi-clock-time-five-outline",text:t(te)(e.raw.schedule_at)},null,8,["text"])):(d(),g(u,{key:1,icon:t(B)(e.raw.status).icon},null,8,["icon"]))]),default:s(()=>[n("span",de,r(e.raw.status),1),e.raw.status===t(c).Error?(d(),$("span",pe,r(`#${e.raw.id}`),1)):k("",!0)]),_:2},1032,["color"])]),"item.difficulty":s(({item:e})=>[a(z,{color:t(L)(e.raw.difficulty).color},{default:s(()=>[a(u,{icon:t(L)(e.raw.difficulty).icon,class:"ma-1"},null,8,["icon"]),n("span",ce,r(e.raw.difficulty),1)]),_:2},1032,["color"])]),"item.actions":s(({item:e})=>[a(D,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:s(()=>[a(u,{size:"24",icon:"tabler-dots-vertical"}),a(se,{activator:"parent"},{default:s(()=>[a(oe,null,{default:s(()=>[a(h,{to:{name:"course-id-edit",params:{id:e.raw.id}}},{prepend:s(()=>[a(u,{icon:"tabler-edit"})]),default:s(()=>[a(v,null,{default:s(()=>[p(r(o.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.raw.status===t(c).Draft||e.raw.status===t(c).Error?(d(),g(h,{key:0,onClick:P=>I(e.raw.id)},{prepend:s(()=>[a(u,{icon:"material-symbols:publish-rounded"})]),default:s(()=>[a(v,null,{default:s(()=>[p(r(o.$t("Publish")),1)]),_:1})]),_:2},1032,["onClick"])):k("",!0),e.raw.status===t(c).Draft||e.raw.status===t(c).Scheduled?(d(),g(h,{key:1,onClick:P=>y.value=e.raw.id},{prepend:s(()=>[a(u,{icon:"solar:calendar-broken"})]),default:s(()=>[a(v,null,{default:s(()=>[p(r(o.$t("Schedule publish")),1)]),_:1})]),_:2},1032,["onClick"])):k("",!0),a(h,{onClick:P=>E(e.raw.id)},{prepend:s(()=>[a(u,{icon:"tabler-trash"})]),default:s(()=>[a(v,null,{default:s(()=>[p(r(o.$t("Delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[a(U),n("div",me,[n("p",fe,r(t(Y)(t(l),t(m))),1),a(le,{"model-value":t(l).page,"onUpdate:modelValue":i[2]||(i[2]=e=>l.value={...t(l),page:e}),length:Math.ceil(t(m)/t(l).itemsPerPage),"total-visible":o.$vuetify.display.xs?1:Math.ceil(t(m)/t(l).itemsPerPage)},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),a(R,{onDone:i[6]||(i[6]=e=>(y.value=null,t(_)())),"course-id":t(y)},null,8,["course-id"])]),_:1})]),_:1})])}}});typeof T=="function"&&T(_e);export{_e as default};
