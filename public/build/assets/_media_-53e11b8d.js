import{_ as w}from"./CoursePlayList.vue_vue_type_script_setup_true_lang-1a7d74b6.js";import{t as P,a3 as M,r as p,Q as B,aA as L,bX as d,w as k,v as l,z as f,A as r,n as s,H as o,x as V,s as S,bV as N,B as _,aa as y,a2 as R,L as T}from"./plugins-1ca62e54.js";import{M as U}from"./index-b32b8b4e.js";import{P as A}from"./vue3-perfect-scrollbar.esm-2f0bef5a.js";import{V as E}from"./VSkeletonLoader-2a84e475.js";import{a as h,V as I}from"./VRow-063e83bb.js";import{V as $}from"./VCard-2a55749d.js";import"./InfoTooltip.vue_vue_type_script_setup_true_lang-d423ce93.js";import"./VTooltip-98a36fe7.js";import"./VOverlay-ce640807.js";import"./forwardRefs-6ea3df5c.js";import"./scopeId-598a8366.js";import"./ActionButton-0cde9d24.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveText.vue_vue_type_script_setup_true_lang-a85a0c1a.js";import"./utils-4f96d8b5.js";import"./useCourseStore-b2aa19e2.js";import"./VList-32d892a6.js";import"./index-290985fb.js";import"./ssrBoot-6bb28df7.js";import"./createSimpleFunctional-4f87dcb7.js";import"./VAvatar-15acdbba.js";import"./VDivider-e9bd568d.js";import"./VChip-412e0c07.js";import"./VSpacer-b2217678.js";import"./VToolbar-96f2844b.js";import"./_commonjsHelpers-de833af9.js";import"./VPagination-03e938d2.js";import"./VCardActions-114e80cb.js";import"./VCardText-f87185bc.js";const j={key:0,class:"position-relative h-100 border rounded"},z={key:0,class:"position-absolute w-100 h-100 d-flex gap-1 align-center justify-center",style:{"background-color":"rgba(0, 0, 0, 56.8%)",inset:"0"}},ke=P({__name:"[media]",setup(H){const m=M(),a=p(),i=p(!1);B();const u=p(),v=p(),C=L(()=>{if(!a.value)return{};if(a.value.type===d.video)return{onReady:e=>{var t;return u.value=(t=e.target)==null?void 0:t.plyr},onEnded:e=>i.value=!0,onPause:e=>a.value.playing=!1,onPlay:e=>a.value.playing=!0};if(a.value.type===d.pdf)return{"onUpdate:pdf":b}}),b=({page:e,pages:t})=>{e==t&&(i.value=!0)},g=()=>{v.value.next(),i.value=!1},x=()=>{var e;((e=a.value)==null?void 0:e.type)===d.video&&setTimeout(()=>{var t;(t=u.value)==null||t.play()},500),i.value=!1};return k(a,e=>{e&&e.type==="video"&&(setTimeout(()=>{var t;(t=u.value)==null||t.play()},500),i.value=!1)}),k(()=>m.params.media,()=>{const e=m.params.media.split("-"),t=e[e.length-2],c=e[e.length-1];console.log({chapterId:c,mediaId:t})},{immediate:!0}),(e,t)=>{const c=w;return l(),f(I,{align:"start",class:"gap-y-2"},{default:r(()=>[s(h,{cols:"12",md:"9",class:"py-0"},{default:r(()=>{var n;return[o(a)?(l(),V("div",j,[(l(),f(o(U),S(o(C),{key:(n=o(a))==null?void 0:n.id,"aspect-ratio":"1.77",media:o(a)}),N({_:2},[o(a).type===o(d).image?{name:"toolbar",fn:r(()=>[s(_,{variant:"elevated",color:"default","append-icon":"mdi-skip-forward",onClick:g},{default:r(()=>[y(" Continue ")]),_:1})]),key:"0"}:void 0]),1040,["media"])),o(i)?(l(),V("div",z,[s(_,{color:"default","prepend-icon":"mdi-rotate-left",onClick:x},{default:r(()=>[y(" Start Over ")]),_:1}),s(_,{color:"default","append-icon":"mdi-skip-forward",onClick:g},{default:r(()=>[y(" Continue ")]),_:1})])):R("",!0)])):(l(),f(o(E),{key:1,type:["image","image"]}))]}),_:1}),s(h,{cols:"12",md:"3",class:"rounded py-0"},{default:r(()=>[s($,null,{default:r(()=>[s(o(A),{options:{wheelPropagation:!0}},{default:r(()=>[s(c,{ref_key:"playList",ref:v,selected:o(a),"onUpdate:selected":t[0]||(t[0]=n=>T(a)?a.value=n:null),"course-id":Number(o(m).params.id)},null,8,["selected","course-id"])]),_:1})]),_:1})]),_:1})]),_:1})}}});export{ke as default};
