import{_ as M}from"./CourseScheduleDialog.vue_vue_type_script_setup_true_lang-3b73ffb3.js";import{_ as R}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-1bc17a1b.js";import{_ as A}from"./AppTextField.vue_vue_type_script_setup_true_lang-235432c3.js";import{_ as q}from"./AppSelect.vue_vue_type_script_setup_true_lang-5c14f55a.js";import{f as F}from"./formatters-386d1040.js";import{u as O}from"./useCourseStore-6cd84d06.js";import{r as S,a as w,p as G}from"./utils-cf604421.js";import{d as H,r as f,w as J,a as K,o as n,h as u,f as l,b as a,b9 as Q,bf as W,q as t,e as r,al as D,y as P,z as d,c0 as X,c1 as p,a3 as v,c as Y,k as _}from"./main-2d2efdef.js";import{l as Z}from"./lodash-af665324.js";import{V as z,a as $}from"./VRow-b362c44e.js";import{V as B}from"./VDivider-56b2b415.js";import{V as ee}from"./VDataTableServer-ff091fcc.js";import{V as T}from"./VChip-5110b4ca.js";import{V as te}from"./VMenu-1ed28082.js";import{V as ae,a as c,b as le}from"./VList-3e9a4151.js";import{V as se}from"./VPagination-1f9c92d0.js";import"./DateTimePicker.vue_vue_type_style_index_0_lang-12f1c32b.js";import"./component-32c86fd4.js";import"./VField-92f9d8a9.js";import"./VInput-84038333.js";import"./VSpacer-f886726f.js";import"./VTooltip-dfa1b725.js";import"./VTextField-a58b9262.js";import"./VSelect-4c5979a9.js";import"./VCheckboxBtn-c66b2d93.js";import"./VSelectionControl-23864fe7.js";import"./VTable-97ddfd2c.js";const oe={class:"d-flex justify-end flex-wrap gap-4"},ie={class:"d-flex align-center gap-2 py-2 text-capitalize"},ne={class:"d-flex flex-column"},re={class:"text-base"},ue={class:"text-capitalize ml-1"},de={key:0,class:"text-capitalize ml-1"},pe={class:"text-capitalize"},ce={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},me={class:"text-sm text-disabled mb-0"},qe=H({__name:"index",setup(fe){const y=f(null),m=f(0),b=f([]),C=f(!1),i=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),V=O(),L=s=>V.deleteCourse(s).then(g),k=(s,o="Published")=>V.publishCourse(s,o).then(g),g=Z.debounce(()=>{b.value.length||(C.value=!0),V.getCourses(i.value).then(({data:s,meta:o})=>{b.value=s,m.value=o.total}).finally(()=>C.value=!1)},500),U=[{title:"Title",key:"title"},{title:"Status",key:"status",width:70},{title:"Difficulty",key:"difficulty",width:70},{title:"",key:"actions",sortable:!1,width:70}];return J(Object.keys(i.value).map(s=>()=>i.value[s]),([s,o,x])=>{g()}),(s,o)=>{const x=q,I=A,N=K("RouterLink"),j=R,E=M;return n(),u(z,null,{default:l(()=>[a($,{cols:"12"},{default:l(()=>[a(Q,{title:s.$t("Cours")},{default:l(()=>[a(W,null,{default:l(()=>[a(z,{align:"end"},{default:l(()=>[a($,{cols:"12",sm:"2"},{default:l(()=>[a(x,{modelValue:t(i).itemsPerPage,"onUpdate:modelValue":o[0]||(o[0]=e=>t(i).itemsPerPage=e),label:s.$t("Items Per Page"),items:[10,20,50,100]},null,8,["modelValue","label"])]),_:1}),a($,{class:"d-flex gap-5"},{default:l(()=>[a(I,{modelValue:t(i).search,"onUpdate:modelValue":o[1]||(o[1]=e=>t(i).search=e),placeholder:s.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),r("div",oe,[a(D,{"prepend-icon":"tabler-plus",to:{name:"course-create"}},{default:l(()=>[P(d(s.$t("New Cour")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(B),a(t(ee),{"items-per-page":t(i).itemsPerPage,"onUpdate:itemsPerPage":o[3]||(o[3]=e=>t(i).itemsPerPage=e),page:t(i).page,"onUpdate:page":o[4]||(o[4]=e=>t(i).page=e),items:t(b),"items-length":t(m),headers:U.map(e=>({...e,title:s.$t(e.title)})),class:"text-no-wrap",loading:t(C),"onUpdate:options":o[5]||(o[5]=e=>i.value=e)},{loading:l(()=>[a(t(X),{class:"pt-2",type:["table-tbody"]})]),"item.title":l(({item:e})=>[r("div",ie,[r("div",ne,[r("h6",re,[a(N,{to:{name:"course-id",params:{id:e.id}},class:"font-weight-medium user-list-name"},{default:l(()=>[P(d(e.title),1)]),_:2},1032,["to"])])])])]),"item.status":l(({item:e})=>[a(T,{color:t(S)(e.status).color},{prepend:l(()=>[e.status===t(p).Scheduled?(n(),u(j,{key:0,icon:"mdi-clock-time-five-outline",text:t(F)(e.schedule_at)},null,8,["text"])):(n(),u(v,{key:1,icon:t(S)(e.status).icon},null,8,["icon"]))]),default:l(()=>[r("span",ue,d(e.status),1),e.status===t(p).Error?(n(),Y("span",de,d(`#${e.id}`),1)):_("",!0)]),_:2},1032,["color"])]),"item.difficulty":l(({item:e})=>[a(T,{color:t(w)(e.difficulty).color},{default:l(()=>[a(v,{icon:t(w)(e.difficulty).icon,class:"ma-1"},null,8,["icon"]),r("span",pe,d(e.difficulty),1)]),_:2},1032,["color"])]),"item.actions":l(({item:e})=>[a(D,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:l(()=>[a(v,{size:"24",icon:"tabler-dots-vertical"}),a(te,{activator:"parent"},{default:l(()=>[a(ae,null,{default:l(()=>[a(c,{to:{name:"course-id-edit",params:{id:e.id}}},{prepend:l(()=>[a(v,{icon:"tabler-edit"})]),default:l(()=>[a(le,null,{default:l(()=>[P(d(s.$t("Edit")),1)]),_:1})]),_:2},1032,["to"]),e.status===t(p).Published?(n(),u(c,{key:0,onClick:h=>k(e.id,"Closed"),"prepend-icon":"material-symbols:close-rounded",title:s.$t("Close")},null,8,["onClick","title"])):_("",!0),e.status===t(p).Published?(n(),u(c,{key:1,onClick:h=>k(e.id,"Private"),"prepend-icon":"material-symbols:private-connectivity-outline",title:s.$t("Private")},null,8,["onClick","title"])):_("",!0),e.status!==t(p).Published?(n(),u(c,{key:2,onClick:h=>k(e.id),"prepend-icon":"material-symbols:publish-rounded",title:s.$t("Publish")},null,8,["onClick","title"])):_("",!0),e.status===t(p).Draft||e.status===t(p).Scheduled?(n(),u(c,{key:3,onClick:h=>y.value=e.id,"prepend-icon":"solar:calendar-broken",title:s.$t("Schedule publish")},null,8,["onClick","title"])):_("",!0),a(c,{"prepend-icon":"tabler-trash",title:s.$t("Delete"),onClick:h=>L(e.id)},null,8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:l(()=>[a(B),r("div",ce,[r("p",me,d(t(G)(t(i),t(m))),1),a(se,{"model-value":t(i).page,length:Math.ceil(t(m)/t(i).itemsPerPage),"total-visible":s.$vuetify.display.xs?1:Math.ceil(t(m)/t(i).itemsPerPage),"onUpdate:modelValue":o[2]||(o[2]=e=>i.value={...t(i),page:e})},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),a(E,{"course-id":t(y),onDone:o[6]||(o[6]=e=>(y.value=null,t(g)()))},null,8,["course-id"])]),_:1})]),_:1})}}});export{qe as default};
