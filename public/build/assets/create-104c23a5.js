import{_ as j}from"./DateTimePicker.vue_vue_type_style_index_0_lang-93a11bf5.js";import{_ as q}from"./CustomRadiosWithIcon-543a6ecd.js";import{_ as A}from"./CourseChaptersForm.vue_vue_type_script_setup_true_lang-b0d0d4a8.js";import{_ as G}from"./CourseDetailsForm.vue_vue_type_script_setup_true_lang-fd46e006.js";import{_ as J}from"./AppStepper.vue_vue_type_style_index_0_lang-f4bcb4aa.js";import{d as L,r as m,c0 as D,m as M,o as S,h as g,f as t,b as e,q as l,b4 as V,y as u,bG as F,e as Z,am as k,a4 as I,z as x}from"./main-de81c04a.js";import{u as H}from"./useCourseStore-458c7fca.js";import{a as R,V as K}from"./VRow-712fdf8b.js";import{a as Q,b as P}from"./VWindowItem-74310388.js";import{V as X,a as T,b as B,c as N}from"./VExpansionPanel-b89eeb00.js";import"./component-912afb63.js";import"./VField-cd3a8674.js";import"./VInput-b77c619e.js";import"./VRadioGroup-a114d6de.js";import"./VSelectionControl-18614d5a.js";import"./FileUploaderDialog.vue_vue_type_script_setup_true_lang-1ad539a5.js";import"./VCheckboxBtn-a8607aa9.js";import"./AppTextField.vue_vue_type_script_setup_true_lang-d0874295.js";import"./VTextField-687a8006.js";import"./lodash-5f4e712f.js";import"./preact.module-7f17e2b0.js";import"./InfoTooltip.vue_vue_type_script_setup_true_lang-5436e5d8.js";import"./VTooltip-3bc1a349.js";import"./ActionButton-7996e9d4.js";import"./validators-3b3891f3.js";import"./useQuizzesStore-e152037b.js";import"./VForm-5850c8d7.js";import"./VMenu-e0abccb1.js";import"./VList-2584110e.js";import"./ssrBoot-7790c7e6.js";import"./VDivider-faf1c2d7.js";import"./VSelect-d4ff51fd.js";import"./VSwitch-b42882ed.js";import"./AppSelect.vue_vue_type_script_setup_true_lang-c9bff932.js";import"./VTextarea-eeb9225e.js";import"./VSlideGroup-37f5fce8.js";import"./VSlideGroupItem-3f7ec3ae.js";const Y={class:"d-flex justify-space-between mt-8"},ze=L({__name:"create",setup(ee){const i=m(0),p=m("publish"),f=m("Private"),U=[{title:"Private",desc:"Only you and people you choose can watch your video",value:D.Private,icon:{icon:"carbon:virtual-private-cloud",size:"28"}},{title:"Publish",desc:"Everyone can watch your video",value:D.Published,icon:{icon:"mdi-public",size:"28"}}],v=m(new Date().toISOString()),r=m([{id:1,icon:"tabler-clipboard",title:"course.steps.details.title",component:null},{id:2,icon:"grommet-icons:chapter-add",title:"course.steps.chapters.title",component:null},{id:3,icon:"mdi-publish",title:"course.steps.visibility.title",component:null}]),c=m(),$=M(),_=H(),z=async()=>{var a,b,y,h;const n=r.value[i.value];try{if(n.id===1){const s=await((a=n.component)==null?void 0:a.validate());c.value=await _.createCourse(s)}if(n.id===2&&c.value){const C=(await((b=n.component)==null?void 0:b.validate())).map((w,W)=>{const E={};return w.attachments.forEach(d=>{E[d.id]={name:d.name,watermark:d.watermark,type:d.type,download:d.download,visibility:JSON.stringify(d.visibility)}}),{...w,attachments:E,order:W}}),o=(y=c.value)==null?void 0:y.id;await Promise.all(C.map(w=>_.createChapter(o,w)))}r.value.length-1>i.value&&i.value++}catch(s){((h=s==null?void 0:s.response)==null?void 0:h.status)===500&&r.value.length-1>i.value&&$.push({name:"course"}),console.error(s)}},O=async()=>{try{if(!c.value)throw new Error("Course not Found");p.value==="schedule"&&await _.scheduleCourse(c.value.id,v.value),p.value==="publish"&&await _.publishCourse(c.value.id,f.value),$.push({name:"course"})}catch(n){throw n}};return(n,a)=>{const b=J,y=G,h=A,s=q,C=j;return S(),g(K,{align:"center"},{default:t(()=>[e(R,null,{default:t(()=>[e(b,{"current-step":l(i),items:l(r)},null,8,["current-step","items"])]),_:1}),e(R,{cols:"12"},{default:t(()=>[e(Q,{modelValue:l(i),"onUpdate:modelValue":a[3]||(a[3]=o=>V(i)?i.value=o:null),class:"disable-tab-transition stepper-content mt-5"},{default:t(()=>[e(P,null,{default:t(()=>[e(y,{ref:o=>l(r)[0].component=o},null,512)]),_:1}),e(P,null,{default:t(()=>[e(h,{ref:o=>l(r)[1].component=o},null,512)]),_:1}),e(P,null,{default:t(()=>[e(X,{modelValue:l(p),"onUpdate:modelValue":a[2]||(a[2]=o=>V(p)?p.value=o:null),mandatory:"force",style:{"max-width":"500px","margin-inline":"auto"},variant:"accordion"},{default:t(()=>[e(T,{value:"publish"},{default:t(()=>[e(B,null,{default:t(()=>[u(" Save or publish ")]),_:1}),e(F,{class:"mb-2"},{default:t(()=>[u(" Make your video public or private ")]),_:1}),e(N,null,{default:t(()=>[e(s,{"selected-radio":l(f),"onUpdate:selectedRadio":a[0]||(a[0]=o=>V(f)?f.value=o:null),"radio-content":U,"grid-column":{md:"6"}},null,8,["selected-radio"])]),_:1})]),_:1}),e(T,{value:"schedule"},{default:t(()=>[e(B,null,{default:t(()=>[u(" Schedule ")]),_:1}),e(F,{class:"mb-2"},{default:t(()=>[u(" Select a date to make your video public. ")]),_:1}),e(N,null,{default:t(()=>[e(C,{modelValue:l(v),"onUpdate:modelValue":a[1]||(a[1]=o=>V(v)?v.value=o:null),style:{width:"min-content"},config:{inline:!0,enableTime:!0,dateFormat:"Z"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]),Z("div",Y,[e(k,{variant:"plain",color:"secondary",disabled:l(i)===0,onClick:a[4]||(a[4]=o=>i.value--)},{default:t(()=>[e(I,{icon:"tabler-arrow-left",start:"",class:"flip-in-rtl"}),u(" "+x(n.$t("previous")),1)]),_:1},8,["disabled"]),l(r).length-1===l(i)?(S(),g(k,{key:0,"append-icon":"tabler-check",color:"success",onClick:O},{default:t(()=>[u(x(n.$t(l(p))),1)]),_:1})):(S(),g(k,{key:1,variant:"plain",onClick:z},{default:t(()=>[u(x(n.$t("next"))+" ",1),e(I,{icon:"tabler-arrow-right",end:"",class:"flip-in-rtl"})]),_:1}))])]),_:1})]),_:1})}}});export{ze as default};
