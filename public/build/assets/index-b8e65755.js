import{f as O}from"./formatters-386d1040.js";import{_ as R}from"./DateTimePicker.vue_vue_type_style_index_0_lang-c2aa8feb.js";import{_ as F}from"./DialogCloseBtn.vue_vue_type_script_setup_true_lang-3d4c07f0.js";import{V as H}from"./VCardActions-114e80cb.js";import{V as G}from"./VSpacer-b2217678.js";import{t as I,r as f,v as n,z as p,A as o,n as a,B as w,aa as k,H as t,L as N,w as J,D as b,E as u,eu as c,C as B,x as K,a2 as y}from"./plugins-1ca62e54.js";import{V as W}from"./VDialog-5c924145.js";import{_ as X}from"./InfoTooltip.vue_vue_type_script_setup_true_lang-d423ce93.js";import{_ as Y}from"./AppTextField.vue_vue_type_script_setup_true_lang-9838b75e.js";import{_ as Z}from"./AppSelect.vue_vue_type_script_setup_true_lang-ed142275.js";import{u as U}from"./useQuizzesStore-6ffdf938.js";import{r as T,p as ee}from"./utils-4f96d8b5.js";import{l as te}from"./lodash-f6b38868.js";import{V as ae}from"./VCard-2a55749d.js";import{V as le}from"./VCardText-f87185bc.js";import{V as j,a as S}from"./VRow-063e83bb.js";import{V as E}from"./VDivider-e9bd568d.js";import{V as oe}from"./VDataTableServer-eb4d016e.js";import{V as ie}from"./VSkeletonLoader-2a84e475.js";import{V as se}from"./VTooltip-98a36fe7.js";import{V as ne}from"./VChip-412e0c07.js";import{V as re}from"./VMenu-3b09bac4.js";import{V as ue,a as V}from"./VList-32d892a6.js";import{V as pe}from"./VPagination-03e938d2.js";import"./component-ac08781a.js";import"./VField-5f020633.js";import"./VInput-0f0d564d.js";import"./index-290985fb.js";import"./forwardRefs-6ea3df5c.js";import"./createSimpleFunctional-4f87dcb7.js";import"./VOverlay-ce640807.js";import"./scopeId-598a8366.js";import"./dialog-transition-7fd252b6.js";import"./VTextField-38237e59.js";import"./VSelect-4231bef2.js";import"./VCheckboxBtn-bf01db5f.js";import"./VSelectionControl-1b1614f2.js";import"./_commonjsHelpers-de833af9.js";import"./VAvatar-15acdbba.js";import"./VTable-1a36a4c7.js";import"./ssrBoot-6bb28df7.js";const de=I({__name:"ScheduleDialog",props:{isDialogVisible:{type:Boolean}},emits:["select","update:isDialogVisible"],setup(x,{emit:g}){const d=x,v=g,r=f(new Date().toISOString()),i=()=>{v("select",r.value)},z=()=>v("update:isDialogVisible",!1);return(_,P)=>{const h=F,$=R;return n(),p(W,{"model-value":d.isDialogVisible,"onUpdate:modelValue":z,width:"266"},{default:o(()=>[a(h,{onClick:z}),a($,{modelValue:t(r),"onUpdate:modelValue":P[0]||(P[0]=m=>N(r)?r.value=m:null),class:"w-100",config:{inline:!0}},{default:o(()=>[a(H,{class:"d-flex justify-space-between pt-2 border-t"},{default:o(()=>[a(G),a(w,{size:"small",variant:"flat",onClick:i},{default:o(()=>[k(" Save ")]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model-value"])}}}),me={class:"d-flex justify-end flex-wrap gap-4"},ce={class:"truncate",style:{"max-width":"10vw"}},fe={class:"text-capitalize ml-1"},ge={key:0,class:"text-capitalize ml-1"},ve={class:"d-flex align-center justify-sm-space-between justify-center flex-wrap gap-3 pa-5 pt-3"},Ve={class:"text-sm text-disabled mb-0"},it=I({__name:"index",setup(x){const g=f(null),d=f(0),v=f([]),r=f(!1),i=f({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),z=U(),_=te.debounce(()=>{v.value.length||(r.value=!0),z.getQuizzes({params:i.value}).then(({data:l,meta:s})=>{v.value=l,d.value=s.total}).finally(()=>r.value=!1)},500),P=[{title:"Title",key:"title"},{title:"Description",key:"description"},{title:"Status",key:"status"},{title:"Created at",key:"created_at"},{title:"",key:"actions",sortable:!1,width:70}];J(Object.keys(i.value).map(l=>()=>i.value[l]),([l,s,Q])=>{_()});const h=U(),$=l=>h.deleteQuiz(l).then(_),m=f(!1),q=l=>{g.value&&h.scheduleQuiz(g.value,l).finally(()=>{m.value=!1,g.value=null,_()})},D=(l,s="Published")=>h.publishQuiz(l,s).then(_);return(l,s)=>{const Q=Z,A=Y,L=X,M=de;return n(),p(j,null,{default:o(()=>[a(S,{cols:"12"},{default:o(()=>[a(ae,{title:l.$t("Quizzes")},{default:o(()=>[a(le,null,{default:o(()=>[a(j,{align:"end"},{default:o(()=>[a(S,{cols:"12",sm:"2"},{default:o(()=>[a(Q,{modelValue:t(i).itemsPerPage,"onUpdate:modelValue":s[0]||(s[0]=e=>t(i).itemsPerPage=e),label:l.$t("Items Per Page"),items:[10,20,50,100]},null,8,["modelValue","label"])]),_:1}),a(S,{class:"d-flex gap-5"},{default:o(()=>[a(A,{modelValue:t(i).search,"onUpdate:modelValue":s[1]||(s[1]=e=>t(i).search=e),placeholder:l.$t("Search"),density:"compact"},null,8,["modelValue","placeholder"]),b("div",me,[a(w,{"prepend-icon":"tabler-plus",to:{name:"quizzes-create"}},{default:o(()=>[k(u(l.$t("New Quiz")),1)]),_:1})])]),_:1})]),_:1})]),_:1}),a(E),a(t(oe),{"items-per-page":t(i).itemsPerPage,"onUpdate:itemsPerPage":s[3]||(s[3]=e=>t(i).itemsPerPage=e),page:t(i).page,"onUpdate:page":s[4]||(s[4]=e=>t(i).page=e),items:t(v),"items-length":t(d),headers:P.map(e=>({...e,title:l.$t(e.title)})),class:"text-no-wrap",loading:t(r),"onUpdate:options":s[5]||(s[5]=e=>i.value=e)},{loading:o(()=>[a(t(ie),{class:"pt-2",type:["table-tbody"]})]),"item.title":o(({item:e})=>[k(u(e.title)+" - ("+u(e.duration)+" min) ",1)]),"item.description":o(({item:e})=>[b("div",ce,[a(se,{"max-width":"400",activator:"parent"},{default:o(()=>[k(u(e.description),1)]),_:2},1024),k(" "+u(e.description),1)])]),"item.status":o(({item:e})=>[a(ne,{color:t(T)(e.status).color},{prepend:o(()=>[e.status===t(c).Scheduled?(n(),p(L,{key:0,icon:"mdi-clock-time-five-outline",text:("formatDate"in l?l.formatDate:t(O))(e.schedule_at)},null,8,["text"])):(n(),p(B,{key:1,icon:t(T)(e.status).icon},null,8,["icon"]))]),default:o(()=>[b("span",fe,u(e.status),1),e.status===t(c).Error?(n(),K("span",ge,u(`#${e.id}`),1)):y("",!0)]),_:2},1032,["color"])]),"item.actions":o(({item:e})=>[a(w,{icon:"",variant:"text",size:"x-small",color:"medium-emphasis"},{default:o(()=>[a(B,{size:"24",icon:"tabler-dots-vertical"}),a(re,{activator:"parent"},{default:o(()=>[a(ue,null,{default:o(()=>[a(V,{"prepend-icon":"tabler-edit",title:l.$t("Edit")},null,8,["title"]),e.status===t(c).Published?(n(),p(V,{key:0,onClick:C=>D(e.id,"Closed"),"prepend-icon":"material-symbols:close-rounded",title:l.$t("Close")},null,8,["onClick","title"])):y("",!0),e.status===t(c).Published?(n(),p(V,{key:1,onClick:C=>D(e.id,"Private"),"prepend-icon":"material-symbols:private-connectivity-outline",title:l.$t("Private")},null,8,["onClick","title"])):y("",!0),e.status!==t(c).Published?(n(),p(V,{key:2,onClick:C=>D(e.id),"prepend-icon":"material-symbols:publish-rounded",title:l.$t("Publish")},null,8,["onClick","title"])):y("",!0),e.status===t(c).Draft||e.status===t(c).Scheduled?(n(),p(V,{key:3,onClick:C=>(m.value=!0,g.value=e.id),"prepend-icon":"solar:calendar-broken",title:l.$t("Schedule publish")},null,8,["onClick","title"])):y("",!0),a(V,{"prepend-icon":"tabler-trash",title:l.$t("Delete"),onClick:C=>$(e.id)},null,8,["title","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:o(()=>[a(E),b("div",ve,[b("p",Ve,u(t(ee)(t(i),t(d))),1),a(pe,{"model-value":t(i).page,length:Math.ceil(t(d)/t(i).itemsPerPage),"total-visible":l.$vuetify.display.xs?1:Math.ceil(t(d)/t(i).itemsPerPage),"onUpdate:modelValue":s[2]||(s[2]=e=>i.value={...t(i),page:e})},null,8,["model-value","length","total-visible"])])]),_:1},8,["items-per-page","page","items","items-length","headers","loading"])]),_:1},8,["title"]),a(M,{onSelect:q,"is-dialog-visible":t(m),"onUpdate:isDialogVisible":s[6]||(s[6]=e=>N(m)?m.value=e:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1})}}});export{it as default};
