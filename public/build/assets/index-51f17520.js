import{_ as k}from"./AppTextField.vue_vue_type_script_setup_true_lang-7e68b421.js";import{d as S,r as n,w as E,o as b,h,f as a,b as s,bc as j,bd as M,y as u,z as V,bG as q,bh as T,e as m,q as t,b4 as _,am as x,bb as $,cf as L,cg as z,c as G,j as I,F as W,c2 as H,bF as J,v as U,aU as K}from"./main-83f81ad7.js";import{V as O}from"./VForm-ee00a18c.js";import{V as Q}from"./VAlert-359bb4e1.js";import{V as X}from"./VCheckbox-0bad0c9a.js";import{_ as Y}from"./AppSelect.vue_vue_type_script_setup_true_lang-b3c9fd04.js";import{u as Z}from"./useRolesStore-bfb1d70b.js";import{a as A,V as ee}from"./VRow-4a6d7b26.js";import{V as B}from"./VDivider-1b4c54ac.js";import{V as se}from"./VDataTableServer-27e4f63c.js";import"./VInput-c65df7da.js";import"./VTextField-d890cb14.js";import"./VField-d76a4324.js";import"./VCheckboxBtn-29b3e515.js";import"./VSelectionControl-a9b789af.js";import"./VSelect-241a8653.js";import"./VList-26f98dda.js";import"./ssrBoot-7be77cee.js";import"./VMenu-2063156d.js";import"./VTable-5fc5d78e.js";const te={class:"d-flex align-end gap-3 mb-3"},ae=S({__name:"AddEditPermissionDialog",props:{isDialogVisible:{type:Boolean},permissionName:{default:""}},emits:["update:isDialogVisible","update:permissionName"],setup(D,{emit:P}){const r=D,d=P,l=n(""),o=()=>{d("update:isDialogVisible",!1),l.value=""},f=()=>{d("update:isDialogVisible",!1),d("update:permissionName",l.value)};return E(r,()=>{l.value=r.permissionName}),(g,c)=>{const v=z,y=k;return b(),h(L,{width:g.$vuetify.display.smAndDown?"auto":600,"model-value":r.isDialogVisible,"onUpdate:modelValue":o},{default:a(()=>[s(v,{onClick:o}),s($,{class:"pa-sm-8 pa-5"},{default:a(()=>[s(j,{class:"text-center"},{default:a(()=>[s(M,{class:"text-h5"},{default:a(()=>[u(V(r.permissionName?"Edit":"Add")+" Permission ",1)]),_:1}),s(q,null,{default:a(()=>[u(V(r.permissionName?"Edit":"Add")+" permission as per your requirements. ",1)]),_:1})]),_:1}),s(T,{class:"mt-1"},{default:a(()=>[s(O,null,{default:a(()=>[s(Q,{type:"warning",title:"Warning!",variant:"tonal",class:"mb-6"},{default:a(()=>[u(" By editing the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding. ")]),_:1}),m("div",te,[s(y,{modelValue:t(l),"onUpdate:modelValue":c[0]||(c[0]=w=>_(l)?l.value=w:null),density:"compact",label:"Permission Name",placeholder:"Enter Permission Name"},null,8,["modelValue"]),s(x,{onClick:f},{default:a(()=>[u(" Update ")]),_:1})]),s(X,{label:"Set as core permission"})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}});const ie=m("h5",{class:"text-h4 mb-6"},"Permissions List",-1),oe=m("p",{class:"mb-0"}," Each category (Basic, Professional, and Business) includes the four predefined roles shown below. ",-1),le={class:"d-flex align-center gap-4 flex-wrap"},ne={class:"d-flex gap-2"},re={class:"d-flex align-center justify-space-between flex-wrap gap-3 pa-5 pt-3"},me={class:"text-sm text-medium-emphasis mb-0"},Be=S({__name:"index",setup(D){const P=[{title:"Name",key:"name"},{title:"Assigned To",key:"roles",sortable:!1},{title:"Created Date",key:"created_at",sortable:!1}],r=n(),d=n(""),l=n(0),o=n({page:1,itemsPerPage:10,sortBy:[],groupBy:[],search:void 0}),f=n(!1),g=n(!1),c=n(""),v=n(1),y=Z();return E(()=>o.value.itemsPerPage,async()=>{var i;const p=await y.fetchPermissions(o.value);r.value=p.data,p.meta&&(v.value=p.meta.total/p.meta.per_page||0,l.value=((i=p.meta)==null?void 0:i.total)||0)},{immediate:!0}),(p,i)=>{const F=Y,R=k,N=ae;return b(),h(ee,null,{default:a(()=>[s(A,{cols:"12"},{default:a(()=>[ie,oe]),_:1}),s(A,{cols:"12"},{default:a(()=>[s($,null,{default:a(()=>[s(T,{class:"d-flex align-center justify-space-between flex-wrap gap-4"},{default:a(()=>[s(F,{modelValue:t(o).itemsPerPage,"onUpdate:modelValue":i[0]||(i[0]=e=>t(o).itemsPerPage=e),items:[10,20,50,100],style:{width:"5rem"}},null,8,["modelValue"]),m("div",le,[s(R,{modelValue:t(d),"onUpdate:modelValue":i[1]||(i[1]=e=>_(d)?d.value=e:null),placeholder:"Search",density:"compact",style:{width:"12.5rem"}},null,8,["modelValue"])])]),_:1}),s(B),s(t(se),{"items-per-page":t(o).itemsPerPage,"onUpdate:itemsPerPage":i[3]||(i[3]=e=>t(o).itemsPerPage=e),page:t(o).page,"onUpdate:page":i[4]||(i[4]=e=>t(o).page=e),"items-length":t(l),headers:P,items:t(r),class:"text-medium-emphasis text-no-wrap","onUpdate:options":i[5]||(i[5]=e=>o.value=e)},{"item.roles":a(({item:e})=>[m("div",ne,[(b(!0),G(W,null,I(e.roles,C=>(b(),h(K,{key:C,color:"primary",label:"",class:"font-weight-medium"},{default:a(()=>[u(V(C),1)]),_:2},1024))),128))])]),bottom:a(()=>[s(B),m("div",re,[m("p",me,V(t(H)(t(o),t(l))),1),s(J,{modelValue:t(o).page,"onUpdate:modelValue":i[2]||(i[2]=e=>t(o).page=e),length:Math.ceil(t(l)/t(o).itemsPerPage),"total-visible":p.$vuetify.display.xs?1:Math.ceil(t(l)/t(o).itemsPerPage)},{prev:a(e=>[s(x,U({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>[u(" Previous ")]),_:2},1040)]),next:a(e=>[s(x,U({variant:"tonal",color:"default"},e,{icon:!1}),{default:a(()=>[u(" Next ")]),_:2},1040)]),_:1},8,["modelValue","length","total-visible"])])]),"item.created_at":a(({item:e})=>[m("span",null,V(e.created_at),1)]),_:1},8,["items-per-page","page","items-length","items"])]),_:1}),s(N,{isDialogVisible:t(f),"onUpdate:isDialogVisible":i[6]||(i[6]=e=>_(f)?f.value=e:null),"permission-name":t(c),"onUpdate:permissionName":i[7]||(i[7]=e=>_(c)?c.value=e:null)},null,8,["isDialogVisible","permission-name"]),s(N,{isDialogVisible:t(g),"onUpdate:isDialogVisible":i[8]||(i[8]=e=>_(g)?g.value=e:null)},null,8,["isDialogVisible"])]),_:1})]),_:1})}}});export{Be as default};
