import{cQ as X,ac as ee,cZ as ae,M as te,ab as le,aC as ne,df as oe,aD as se,t as B,a4 as E,G as V,aa as ue,y as s,F as ie,m as _,de as re,as as ce,aS as de,c_ as fe,d as z,cm as O,o as R,i as me,e as I,f as ve,E as pe,bm as he,j as ye,B as Ce,x as Ve,n as M,bA as K,z as ke}from"./main-d3200a92.js";import{u as ge,a as _e}from"./VInput-a4774bed.js";import{m as be,V as N}from"./VTextField-ff3454b2.js";import{m as we,u as xe,V as Pe,a as U}from"./VList-66bd46f3.js";import{V as De}from"./VMenu-fe26a8c9.js";import{c as Be}from"./VCheckboxBtn-1b353d8a.js";import{V as Ie}from"./VChip-a6de0ffd.js";const Se=X({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:ee,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:ae},...we({itemChildren:!1})},"v-select"),Te=te()({name:"VSelect",props:{...Se(),...le(be({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...ne({transition:{component:oe}})},emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,b){let{slots:t}=b;const{t:c}=se(),v=B(),S=B(),h=E(e,"menu"),o=V({get:()=>h.value,set:a=>{var n;h.value&&!a&&((n=S.value)!=null&&n.Î¨openChildren)||(h.value=a)}}),{items:k,transformIn:H,transformOut:j}=xe(e),u=E(e,"modelValue",[],a=>H(fe(a)),a=>{const n=j(a);return e.multiple?n:n[0]??null}),y=ge(),w=V(()=>u.value.map(a=>k.value.find(n=>e.valueComparator(n.value,a.value))||a)),$=V(()=>w.value.map(a=>a.props.value)),g=B(!1);let T="",A;const F=V(()=>e.hideSelected?k.value.filter(a=>!w.value.some(n=>n===a)):k.value),C=B();function q(a){e.openOnClear&&(o.value=!0)}function G(){e.hideNoData&&!k.value.length||e.readonly||y!=null&&y.isReadonly.value||(o.value=!o.value)}function Q(a){var l,m,p,r;if(e.readonly||y!=null&&y.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(o.value=!0),["Escape","Tab"].includes(a.key)&&(o.value=!1),a.key==="ArrowDown"?(l=C.value)==null||l.focus("next"):a.key==="ArrowUp"?(m=C.value)==null||m.focus("prev"):a.key==="Home"?(p=C.value)==null||p.focus("first"):a.key==="End"&&((r=C.value)==null||r.focus("last"));const n=1e3;function f(i){const d=i.key.length===1,L=!i.ctrlKey&&!i.metaKey&&!i.altKey;return d&&L}if(e.multiple||!f(a))return;const P=performance.now();P-A>n&&(T=""),T+=a.key.toLowerCase(),A=P;const D=k.value.find(i=>i.title.toLowerCase().startsWith(T));D!==void 0&&(u.value=[D])}function x(a){if(e.multiple){const n=$.value.findIndex(f=>e.valueComparator(f,a.value));if(n===-1)u.value=[...u.value,a];else{const f=[...u.value];f.splice(n,1),u.value=f}}else u.value=[a],o.value=!1}function W(a){var n;(n=C.value)!=null&&n.$el.contains(a.relatedTarget)||(o.value=!1)}function Y(a){g.value=!0}function Z(a){var n;a.relatedTarget==null&&((n=v.value)==null||n.focus())}return ue(()=>{const a=!!(e.chips||t.chip),n=!!(!e.hideNoData||F.value.length||t.prepend||t.append||t["no-data"]),f=u.value.length>0,[P]=N.filterProps(e),D=f||!g.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return s(N,_({ref:v},P,{modelValue:u.value.map(l=>l.props.value).join(", "),"onUpdate:modelValue":l=>{l==null&&(u.value=[])},focused:g.value,"onUpdate:focused":l=>g.value=l,validationValue:u.externalValue,dirty:f,class:["v-select",{"v-select--active-menu":o.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length},e.class],style:e.style,appendInnerIcon:e.menuIcon,readonly:!0,placeholder:D,"onClick:clear":q,"onMousedown:control":G,onBlur:W,onKeydown:Q}),{...t,default:()=>s(ie,null,[s(De,_({ref:S,modelValue:o.value,"onUpdate:modelValue":l=>o.value=l,activator:"parent",contentClass:"v-select__content",eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition},e.menuProps),{default:()=>[n&&s(Pe,{ref:C,selected:$.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:l=>l.preventDefault(),onFocusin:Y,onFocusout:Z},{default:()=>{var l,m,p;return[!F.value.length&&!e.hideNoData&&(((l=t["no-data"])==null?void 0:l.call(t))??s(U,{title:c(e.noDataText)},null)),(m=t["prepend-item"])==null?void 0:m.call(t),F.value.map((r,i)=>{var d;return t.item?(d=t.item)==null?void 0:d.call(t,{item:r,index:i,props:_(r.props,{onClick:()=>x(r)})}):s(U,_({key:i},r.props,{onClick:()=>x(r)}),{prepend:L=>{let{isSelected:J}=L;return e.multiple&&!e.hideSelected?s(Be,{modelValue:J,ripple:!1,tabindex:"-1"},null):void 0}})}),(p=t["append-item"])==null?void 0:p.call(t)]}})]}),w.value.map((l,m)=>{var i;function p(d){d.stopPropagation(),d.preventDefault(),x(l)}const r={"onClick:close":p,modelValue:!0,"onUpdate:modelValue":void 0};return s("div",{key:l.value,class:"v-select__selection"},[a?t.chip?s(re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:l.title}}},{default:()=>{var d;return[(d=t.chip)==null?void 0:d.call(t,{item:l,index:m,props:r})]}}):s(Ie,_({key:"chip",closable:e.closableChips,size:"small",text:l.title},r),null):((i=t.selection)==null?void 0:i.call(t,{item:l,index:m}))??s("span",{class:"v-select__selection-text"},[l.title,e.multiple&&m<w.value.length-1&&s("span",{class:"v-select__selection-comma"},[ce(",")])])])})])})}),de({isFocused:g,menu:o,select:x},v)}}),Fe=z({name:"AppSelect",inheritAttrs:!1}),Ke=z({...Fe,setup(e){const b=V(()=>{const c=O(),v=c.id||c.label;return v?`app-select-${v}-${Math.random().toString(36).slice(2,7)}`:void 0}),t=V(()=>O().label);return(c,v)=>(R(),me("div",{class:ke(["app-select flex-grow-1",c.$attrs.class])},[I(t)?(R(),ve(_e,{key:0,for:I(b),class:"mb-1 text-body-2 text-high-emphasis",text:I(t)},null,8,["for","text"])):pe("",!0),s(Te,M(K({...c.$attrs,class:null,label:void 0,variant:"outlined",id:I(b),menuProps:{contentClass:["app-inner-list","app-select__content","v-select__content",c.$attrs.multiple!==void 0?"v-list-select-multiple":""]}})),he({_:2},[ye(c.$slots,(S,h)=>({name:h,fn:Ce(o=>[Ve(c.$slots,h,M(K(o||{})))])}))]),1040)],2))}});export{Te as V,Ke as _};
