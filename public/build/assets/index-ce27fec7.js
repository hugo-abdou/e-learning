import{_ as U}from"./ActionButton-3dcfae7b.js";import{d as h,o as i,h as c,f as r,b as a,bh as z,A as C,bn as g,b8 as V,_ as S,r as T,a7 as f,t as $,x as A,y as x,q as t,b1 as Y,e6 as H,c2 as J,c0 as K,b_ as P,e7 as _,e3 as O,G as Q,e as D,k as R,ch as W,I as k,ak as X,bA as Z,bS as ee,j as te,i as ae,bE as se,bF as oe}from"./main-e240daf5.js";import{b as re,d as M}from"./utils-860c5d06.js";import{V as b}from"./VSpacer-517dd3fc.js";import{V as E}from"./VChip-6e0dcd1f.js";import{V as le}from"./VPagination-b6aef300.js";import{V as ne}from"./VRow-aa2cbdf3.js";import{V as ie}from"./VMenu-949c4526.js";import{V as ce}from"./VList-4243452f.js";const de=h({__name:"ImageType",props:{media:{}},setup(y){return(n,s)=>(i(),c(V,{class:"media-card"},{default:r(()=>[a(z,{src:n.media.url,cover:""},null,8,["src"]),a(g,{absolute:"",density:"compact",class:"px-2"},{default:r(()=>[a(b),C(n.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3}))}});const pe=S(de,[["__scopeId","data-v-7872693c"]]),ue=h({__name:"PdfType",props:{media:{}},setup(y,{expose:n}){const s=T({page:1,pages:0}),l=f({get:()=>s.value.page||0,set:e=>{s.value.page=e}});return n({...s.value}),(e,d)=>{const u=H;return i(),c(V,{class:"media-card"},{default:r(()=>[a(u,$({ref_key:"pdfViwer",ref:s},e.$attrs,{document:e.media,"can-open-preview":""}),null,16,["document"]),a(g,{absolute:"",density:"compact",class:"px-2"},{default:r(()=>[a(E,{rounded:"sm",size:"small",class:"ml-1",color:"surface",variant:"elevated"},{default:r(()=>{var p,v;return[A(" page "+x((p=t(s))==null?void 0:p.page)+" of "+x((v=t(s))==null?void 0:v.pages)+" pages ",1)]}),_:1}),a(b),a(le,{color:"surface",variant:"elevated",modelValue:t(l),"onUpdate:modelValue":d[0]||(d[0]=p=>Y(l)?l.value=p:null),length:Math.ceil(t(s).pages/1),"total-visible":5},null,8,["modelValue","length"]),a(b),C(e.$slots,"toolbar",{},void 0,!0)]),_:3})]),_:3})}}});const me=S(ue,[["__scopeId","data-v-845a5169"]]),_e=h({inheritAttrs:!1,__name:"VideoType",props:{media:{}},setup(y,{expose:n}){const s=T();return n({...s.value}),(l,e)=>{const d=J;return i(),c(V,null,{default:r(()=>[a(d,$({ref_key:"plyr",ref:s},l.$attrs,{src:l.media.url,poster:l.media.thumb_url}),null,16,["src","poster"])]),_:1})}}}),fe={class:"card-header-actions pa-1"},ye={class:"d-flex align-center justify-center w-100 me-2"},ve=h({__name:"index",props:{isPreview:{type:Boolean,default:!1},deletable:{type:Boolean,default:!1},aspectRatio:{},media:{}},emits:["onDelete","update:pdf","update:media"],setup(y,{emit:n}){K();const s=y,l=n,e=T(s.media),d=f(()=>e.value.thumb_url||re(e.value.type)),u=f(()=>({aspectRatio:s.aspectRatio||e.value.width/e.value.height})),p=f(()=>{switch(e.value.type){case P.pdf:return me;case P.image:return pe;case P.video:return _e;default:throw new Error("Media Type dos not exist")}}),v=f(()=>[{title:"Delete",_if:s.deletable,props:{"prepend-icon":"tabler-trash",onClick:()=>q(e.value)}},{title:"retry",_if:e.value.status===_.Pending||e.value.status===_.Processing,props:{"prepend-icon":"tabler-refresh",onClick:j}},{title:"retry",_if:e.value.status===_.Error||!0,props:{"prepend-icon":"tabler-refresh",onClick:L}}]),w=O(),N=o=>{w.openMediaDialog(e.value,o)},j=async()=>{try{const o=await w.getById(e.value.id);e.value=o,l("update:media",o)}catch{}};Q(()=>{});const L=async()=>{try{const o=await w.retry(e.value.id);e.value=o}catch{}},q=o=>{l("onDelete",o.id)};return(o,I)=>{const F=U;return o.isPreview?(i(),c(V,{key:0,style:k(t(u)),color:"surface",class:"media-card w-100 h-100 overflow-hidden"},{default:r(()=>[D("div",fe,[t(e).status===t(_).Processing||t(e).status===t(_).Error?(i(),c(E,{key:0,variant:"flat",size:"x-small",text:t(M)(t(e).status).lable,color:t(M)(t(e).status).color,"prepend-icon":t(M)(t(e).status).icon},null,8,["text","color","prepend-icon"])):R("",!0)]),a(z,{src:t(d),style:k(t(u)),cover:""},{placeholder:r(()=>[a(ne,{class:"fill-height ma-0",align:"center",justify:"center"},{default:r(()=>[a(W,{indeterminate:"",color:"grey-lighten-5"})]),_:1})]),_:1},8,["src","style"]),a(g,{absolute:"",density:"compact",class:"toolbar-overlay pa-2"},{default:r(()=>[D("div",ye,[t(e).url?(i(),c(X,{key:0,onClick:I[0]||(I[0]=m=>N(t(e).type)),icon:"tabler-play",variant:"elevated"})):R("",!0)])]),_:1}),a(g,{absolute:"",density:"compact",class:"toolbar-actions"},{default:r(()=>[a(Z,{style:{"inline-size":"85%"},class:"text-white",title:t(e).name},{default:r(()=>[A(x(t(e).name),1)]),_:1},8,["title"]),a(b),a(ie,{attach:o.$el,transition:"speed-dial",location:"top end"},{activator:r(({props:m})=>[a(F,$(m,{color:"#fff",variant:"text",icon:"mdi-dots-vertical"}),null,16)]),default:r(()=>[a(ce,{items:t(v).filter(({_if:m})=>m)},null,8,["items"])]),_:1},8,["attach"])]),_:1})]),_:1},8,["style"])):(i(),c(ae(t(p)),{key:1,style:k(t(u)),media:t(e),class:"media-card"},ee({_:2},[te(o.$slots,(m,B)=>({name:B,fn:r(G=>[C(o.$slots,B,se(oe(G||{})),void 0,!0)])}))]),1032,["style","media"]))}}});const Ce=S(ve,[["__scopeId","data-v-7b3573fb"]]);export{Ce as M};
